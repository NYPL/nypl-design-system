import { HStack, VStack, Grid, Box } from "@chakra-ui/react";
import {
  Meta,
  Story,
  Canvas,
  ArgsTable,
  Description,
} from "@storybook/addon-docs";
import { withDesign } from "storybook-addon-designs";

import Heading from "../Heading/Heading";
import SimpleGrid from "../Grid/SimpleGrid";
import Toggle from "./Toggle";
import { getCategory } from "../../utils/componentCategories";
import DSProvider from "../../theme/provider";

<Meta
  title={getCategory("Toggle")}
  component={Toggle}
  decorators={[withDesign]}
  parameters={{
    design: {
      type: "figma",
      url: "https://www.figma.com/file/qShodlfNCJHb8n03IFyApM/Main?node-id=31581%3A302",
    },
    jest: ["Toggle.test.tsx"],
  }}
  argTypes={{
    defaultChecked: { control: false },
    id: { control: false },
    key: { table: { disable: true } },
    name: { control: false },
    onChange: { control: false },
    ref: { table: { disable: true } },
    size: {
      control: {
        table: { defaultValue: { summary: "default" } },
      },
    },
  }}
/>

# Toggle

| Component Version | DS Version |
| ----------------- | ---------- |
| Added             | `0.25.8`   |
| Latest            | `1.3.0`    |

## Table of Contents

- [Overview](#overview)
- [Component Props](#component-props)
- [Accessibility](#accessibility)
- [Sizes](#sizes)
- [Controlled Toggle](#controlled-toggle)
- [Browser States](#browser-states)
- [Layouts](#layouts)

## Overview

<Description of={Toggle} />

The `Toggle` component is used as an alternative for the Checkbox component and
returns a boolean response. Like the Checkbox component, the `Toggle` component
can display a label to the right of the toggle and helper/error text below the toggle.

### Best Practices

`Toggle` components are commonly used for “on/off” switches to perform binary
actions that occur immediately after a user “flips the switch.”

The Toggle component label should clarify the action being performed. Labels
should be short and to the point, often three words or less.

## Component Props

<Canvas>
  <Story
    name="Toggle"
    args={{
      defaultChecked: false,
      helperText: "This is the helper text!",
      id: "toggle-1",
      invalidText: "",
      isChecked: undefined,
      isDisabled: false,
      isInvalid: false,
      isRequired: false,
      labelText: "Test Label",
      name: "toggle-1",
      onChange: undefined,
      size: "ToogleSizes.Large",
    }}
  >
    {(args) => <Toggle {...args} />}
  </Story>
</Canvas>

<ArgsTable story="Toggle" />

## Accessibility

The `Toggle` component is implemented using Chakra's `Switch` component. While
some accessibility resources state that using a `<button>` element is better for
a toggle or switch component, Chakra UI internally uses a `checkbox` element.
Because Chakra's `Switch` component handles the internal state so well and its
styles, we chose this over implementing this component with a `<button>` element.

For comparison and reference, resources that build toggle components with the
`<button>` element are linked below.

Resources:

- [Chakra UI Switch](https://chakra-ui.com/docs/components/form/switch)
- [W3C Switch Example Using HTML Button](https://w3c.github.io/aria-practices/examples/switch/switch-button.html)
- [Inclusive Components Toggle Buttons](https://inclusive-components.design/toggle-button/)
- [Accessible HTML Toggle Button (Switch)](https://www.erikkroes.nl/blog/accessible-html-toggle-button-switch/)

## Sizes

<Canvas>
  <DSProvider>
    <SimpleGrid columns="2">
      <VStack align="left" spacing="s">
        <Heading level={3}>Default</Heading>
        <Toggle defaultChecked={true} id="default-checked" labelText="On" />
        <Toggle id="default" labelText="Off" />
      </VStack>
      <VStack align="left" spacing="s">
        <Heading level={3}>Small</Heading>
        <Toggle
          defaultChecked={true}
          id="small-checked"
          size="small"
          labelText="On"
        />
        <Toggle id="default-small" size="small" labelText="Off" />
      </VStack>
    </SimpleGrid>
  </DSProvider>
</Canvas>

## Controlled Toggle

Note that the `isChecked` property in this example is set to `true`. Clicking
on it won't change the toggle; The `isChecked` prop must now be controlled
and removed manually by the parent component that controls this state. The
`onChange` function will be called every time the `isChecked` prop changes.

```jsx
const isChecked = true;
const onChange = (e) => {
  // This will return the value through the event object.
  console.log(e.target.value);
};

<Toggle
  id="toggle"
  isChecked={true}
  labelText="Controlled Toggle"
  onChange={onChange}
/>;
```

<Canvas>
  <DSProvider>
    <Toggle
      id="toggle"
      isChecked={true}
      labelText="Controlled Toggle"
      onChange={(e) => {
        console.log(e.target.value);
      }}
    />
  </DSProvider>
</Canvas>

## Browser States

<Canvas>
  <DSProvider>
    <SimpleGrid columns="3">
      <VStack align="left" spacing="s">
        <Heading level={3}>Default</Heading>
        <Toggle defaultChecked={true} id="checked-default2" labelText="On" />
        <Toggle id="default2" labelText="Off" />
      </VStack>
      <VStack align="left" spacing="s">
        <Heading level={3}>Disabled</Heading>
        <Toggle
          defaultChecked={true}
          id="disabled-checked"
          isDisabled={true}
          labelText="On"
        />
        <Toggle id="disabled2" isDisabled={true} labelText="Off" />
      </VStack>
      <VStack align="left" spacing="s">
        <Heading level={3}>Error</Heading>
        <Toggle
          defaultChecked={true}
          id="error-default"
          isInvalid={true}
          labelText="On"
        />
        <Toggle id="error2" isInvalid={true} labelText="Off" />
      </VStack>
    </SimpleGrid>
  </DSProvider>
</Canvas>

## Layouts

<Canvas>
  <DSProvider>
    <SimpleGrid columns="2">
      <VStack align="left" spacing="s">
        <Heading level={3}>Grouped</Heading>
        <Toggle defaultChecked={true} id="layout1" labelText="On" />
        <Toggle defaultChecked={true} id="layout2" labelText="On" />
        <Toggle defaultChecked={true} id="layout3" labelText="On" />
        <Toggle defaultChecked={true} id="layout4" labelText="On" />
        <Toggle defaultChecked={true} id="layout5" labelText="On" />
      </VStack>
      <VStack align="left" spacing="s">
        <Heading level={3}>With Helper Text</Heading>
        <Toggle
          defaultChecked={true}
          helperText="Component Helper Text"
          id="helper-text"
          labelText="On"
        />
      </VStack>
    </SimpleGrid>
  </DSProvider>
</Canvas>
