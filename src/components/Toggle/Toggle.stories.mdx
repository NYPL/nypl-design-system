import { HStack, VStack, Grid, Box } from "@chakra-ui/react";
import {
  Meta,
  Story,
  Canvas,
  ArgsTable,
  Description,
} from "@storybook/addon-docs";
import { withDesign } from "storybook-addon-designs";

import Heading from "../Heading/Heading";
import SimpleGrid from "../Grid/SimpleGrid";
import Toggle from "./Toggle";
import { ToggleSizes } from "./ToggleTypes";
import { getCategory } from "../../utils/componentCategories";
import DSProvider from "../../theme/provider";
import { getStorybookEnumValues } from "../../utils/utils";

export const sizeEnumValues = getStorybookEnumValues(
  ToggleSizes,
  "ToggleSizes"
);

<Meta
  title={getCategory("Toggle")}
  component={Toggle}
  decorators={[withDesign]}
  parameters={{
    design: {
      type: "figma",
      url: "https://www.figma.com/file/qShodlfNCJHb8n03IFyApM/Main?node-id=31581%3A302",
    },
    jest: ["Toggle.test.tsx"],
  }}
  argTypes={{
    additionalStyles: { control: false },
    defaultChecked: { control: false },
    id: { control: false },
    key: { table: { disable: true } },
    name: { control: false },
    onChange: { control: false },
    ref: { table: { disable: true } },
    size: {
      control: {
        type: "select",
        table: { defaultValue: { summary: "ToggleSizes.Large" } },
        options: sizeEnumValues.options,
      },
    },
  }}
/>

# Toggle

| Component Version | DS Version |
| ----------------- | ---------- |
| Added             | `0.25.8`   |
| Latest            | `0.25.10`  |

<Description of={Toggle} />

The Toggle component is used as an alternative for the Checkbox component and returns a boolean response. Like the Checkbox component, the Toggle component can display a label to the right of the toggle and helper/error text below the toggle.

### Best Practices

Toggle components are commonly used for “on/off” switches to perform binary actions that occur immediately after a user “flips the switch.”

The Toggle component label should clarify the action being performed. Labels should be short and to the point, often three words or less.

<Canvas>
  <Story
    name="Toggle"
    args={{
      additionalStyles: undefined,
      defaultChecked: false,
      helperText: "This is the helper text!",
      id: "toggle-1",
      invalidText: "",
      isChecked: undefined,
      isDisabled: false,
      isInvalid: false,
      isRequired: false,
      labelText: "Test Label",
      name: "toggle-1",
      onChange: undefined,
      size: "ToogleSizes.Large",
    }}
  >
    {(args) => <Toggle {...args} size={sizeEnumValues.getValue(args.size)} />}
  </Story>
</Canvas>

<ArgsTable story="Toggle" />

## Sizes

<Canvas>
  <DSProvider>
    <SimpleGrid columns="2">
      <VStack align="left" spacing="s">
        <Heading level={3}>Large</Heading>
        <Toggle size={ToggleSizes.Large} defaultChecked={true} labelText="On" />
        <Toggle size={ToggleSizes.Large} labelText="Off" />
      </VStack>
      <VStack align="left" spacing="s">
        <Heading level={3}>Small</Heading>
        <Toggle size={ToggleSizes.Small} defaultChecked={true} labelText="On" />
        <Toggle size={ToggleSizes.Small} labelText="Off" />
      </VStack>
    </SimpleGrid>
  </DSProvider>
</Canvas>

## Controlled Toggle

Note that the `isChecked` property in this example is set to `true`. Clicking
on it won't change the toggle; The `isChecked` prop must now be controlled
and removed manually by the parent component that controls this state. The
`onChange` function will be called every time the `isChecked` prop changes.

```jsx
const isChecked = true;
const onChange = (e) => {
  // This will return the value through the event object.
  console.log(e.target.value);
};

<Toggle isChecked={true} onChange={onChange} labelText="Controlled Toggle" />;
```

<Canvas>
  <DSProvider>
    <Toggle
      isChecked={true}
      onChange={(e) => {
        console.log(e.target.value);
      }}
      labelText="Controlled Toggle"
    />
  </DSProvider>
</Canvas>

## Browser States

<Canvas>
  <DSProvider>
    <SimpleGrid columns="3">
      <VStack align="left" spacing="s">
        <Heading level={3}>Default</Heading>
        <Toggle size={ToggleSizes.Large} defaultChecked={true} labelText="On" />
        <Toggle size={ToggleSizes.Large} labelText="Off" />
      </VStack>
      <VStack align="left" spacing="s">
        <Heading level={3}>Disabled</Heading>
        <Toggle
          size={ToggleSizes.Large}
          defaultChecked={true}
          isDisabled={true}
          labelText="On"
        />
        <Toggle size={ToggleSizes.Large} labelText="Off" isDisabled={true} />
      </VStack>
      <VStack align="left" spacing="s">
        <Heading level={3}>Error</Heading>
        <Toggle
          size={ToggleSizes.Large}
          defaultChecked={true}
          labelText="On"
          isInvalid={true}
        />
        <Toggle size={ToggleSizes.Large} labelText="Off" isInvalid={true} />
      </VStack>
    </SimpleGrid>
  </DSProvider>
</Canvas>

## Layouts

<Canvas>
  <DSProvider>
    <SimpleGrid columns="2">
      <VStack align="left" spacing="s">
        <Heading level={3}>Grouped</Heading>
        <Toggle defaultChecked={true} labelText="On" />
        <Toggle defaultChecked={true} labelText="On" />
        <Toggle defaultChecked={true} labelText="On" />
        <Toggle defaultChecked={true} labelText="On" />
        <Toggle defaultChecked={true} labelText="On" />
      </VStack>
      <VStack align="left" spacing="s">
        <Heading level={3}>With Helper Text</Heading>
        <Toggle
          defaultChecked={true}
          labelText="On"
          helperText="Component Helper Text"
        />
      </VStack>
    </SimpleGrid>
  </DSProvider>
</Canvas>
