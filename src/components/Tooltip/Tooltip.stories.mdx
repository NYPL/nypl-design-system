import {
  ArgsTable,
  Canvas,
  Description,
  Meta,
  Story,
} from "@storybook/addon-docs";
import { withDesign } from "storybook-addon-designs";

import Tooltip from "./Tooltip";
import Button from "../Button/Button";
import Radio from "../Radio/Radio";
import RadioGroup from "../RadioGroup/RadioGroup";
import Icon from "../Icons/Icon";
import Link from "../Link/Link";
import Label from "../Label/Label";
import Image from "../Image/Image";
import { VStack } from "@chakra-ui/react";
import { getCategory } from "../../utils/componentCategories";
import DSProvider from "../../theme/provider";

<Meta
  title={getCategory("Tooltip")}
  component={Tooltip}
  decorators={[withDesign]}
  parameters={{
    design: {
      type: "figma",
      url: "https://www.figma.com/file/qShodlfNCJHb8n03IFyApM/Main?node-id=36835%3A25702",
    },
    jest: ["Tooltip.test.tsx"],
  }}
  argTypes={{
    children: { control: false },
    className: { control: false },
    id: { control: false },
    isDisabled: {
      table: { defaultValue: { summary: false } },
    },
    shouldWrapChildren: {
      table: { defaultValue: { summary: false } },
    },
  }}
/>

# Tooltip

| Component Version | DS Version |
| ----------------- | ---------- |
| Added             | `1.1.0`    |
| Latest            | `1.1.0`    |

## Table of Contents

- [Overview](#overview)
- [Component Props](#component-props)
- [Accessibility](#accessibility)
- [Examples](#examples)

## Overview

<Description of={Tooltip} />

The `Tooltip` component shows contextual help or information about a specific
component when a user hovers or focuses on the component.

## Component Props

<Canvas withToolbar>
  <Story
    name="Tooltip with Controls"
    args={{
      children: undefined,
      className: undefined,
      content:
        "This is a tooltip with information describing the hovered object.",
      id: "tooltip-id",
      isDisabled: false,
      shouldWrapChildren: false,
    }}
  >
    {(args) => (
      <Tooltip {...args}>
        <Button id="tooltip-button">Hover me</Button>
      </Tooltip>
    )}
  </Story>
</Canvas>

<ArgsTable story="Tooltip with Controls" />

## Accessibility

The DS `Tooltip` component is implemented with Chakra UI and Chakra handles the
appropriate aria-describedby attribute for the element that the tooltip is associated with.

The `Tooltip` component is accessible via keyboard. The color contrast between
foreground color and background color is 4.5:1. If text size is 200%, the
button scales with text so there is no overlap.

If a tooltip is associated with a form control (text, radio, checkbox, etc),
the text for the tooltip should be included in the form control label.

Resources:

- [W3C WAI ARIA Tooltip](https://www.w3.org/WAI/ARIA/apg/patterns/tooltip/)
- [MDN ARIA: tooltip role](https://developer.mozilla.org/en-US/docs/Web/Accessibility/ARIA/Roles/tooltip_role)
- [Chakra UI Tooltip](https://chakra-ui.com/docs/components/overlay/tooltip)

## Examples

### Tooltips on form options

When using the `Tooltip` component in forms containing `Checkbox`, `Radio`, and `Toggle`,
the `shouldWrapChildren` prop needs to be included to correctly position the tooltip in
relation to it's child. The underlying `ref` of these components point to the visually hidden
input element. `shouldWrapChildren` ensures that the size of the visually hidden element is
in sync with the rendered visual control.

<Canvas>
  <DSProvider>
    <Tooltip
      content="Invite library staff to share resources at your community event"
      shouldWrapChildren
    >
      <Toggle
        id="radio3"
        labelText="Offsite Community Outreach"
        value="Offsite Community Outreach"
      />
    </Tooltip>
    <RadioGroup
      labelText="What would you like to request?"
      id="radio-group"
      name="tooltip-example"
    >
      <Tooltip
        content="General library orientation or a customized research lesson"
        shouldWrapChildren
      >
        <Radio id="radio1" labelText="Class Visit" value="Class Visit" />
      </Tooltip>
      <Tooltip
        content="Guided exploration of the library and its resources"
        shouldWrapChildren
      >
        <Radio id="radio2" labelText="Group Tour" value="Group Tour" />
      </Tooltip>
      <Tooltip
        content="Invite library staff to share resources at your community event"
        shouldWrapChildren
      >
        <Radio
          id="radio3"
          labelText="Offsite Community Outreach"
          value="Offsite Community Outreach"
        />
      </Tooltip>
    </RadioGroup>
  </DSProvider>
</Canvas>

### Tooltip on Linked Icon

<Canvas>
  <DSProvider>
    <Tooltip content="This is the tooltip text">
      <Link type="action" href="#passed-in-link">
        <Icon decorative id="icon-id" name="search" size="xxlarge" />
      </Link>
    </Tooltip>
  </DSProvider>
</Canvas>

### Tooltip with Icon Content

<Canvas>
  <DSProvider>
    <Tooltip
      content={
        <Icon
          decorative
          id="icon-id"
          name="search"
          size="xxlarge"
          color="ui.white"
        />
      }
    >
      Hover to see search icon
    </Tooltip>
  </DSProvider>
</Canvas>

### Tooltip with Image Content

<Canvas>
  <DSProvider>
    <Tooltip
      content={<Image src="https://placeimg.com/300/300/animals?x=1" alt="" />}
    >
      Hover to see image
    </Tooltip>
  </DSProvider>
</Canvas>

### Disabling Tooltip

A tooltip can be disabled by passing the `isDisabled` prop.

<Canvas>
  <DSProvider>
    <Tooltip
      content="This is a tooltip with information describing the hovered object."
      isDisabled
    >
      <Button id="tooltip-button">Hover me</Button>
    </Tooltip>
  </DSProvider>
</Canvas>

By default, the `Tooltip` is not shown for a disabled `Button`. To show the `Tooltip`
on a disabled `Button`, pass the `shouldWrapChildren` prop.

<Canvas>
  <DSProvider>
    <VStack spacing="input.group.button.vstack" width="150px">
      <Tooltip content="This is a tooltip with information describing the hovered object.">
        <Button id="tooltip-button" isDisabled>
          Disabled Tooltip
        </Button>
      </Tooltip>
      <Tooltip
        content="This is a tooltip with information describing the hovered object."
        shouldWrapChildren
      >
        <Button id="tooltip-button" isDisabled>
          Enabled Tooltip
        </Button>
      </Tooltip>
    </VStack>
  </DSProvider>
</Canvas>
