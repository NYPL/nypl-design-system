import { VStack } from "@chakra-ui/react";
import {
  ArgsTable,
  Canvas,
  Description,
  Meta,
  Story,
} from "@storybook/addon-docs";
import { withDesign } from "storybook-addon-designs";

import Button, { ButtonElementType } from "./Button";
import ButtonGroup from "../ButtonGroup/ButtonGroup";
import Icon from "../Icons/Icon";
import Table from "../Table/Table";
import { getCategory } from "../../utils/componentCategories";
import DSProvider from "../../theme/provider";

export const iconNames = [
  "accessibilityFull",
  "accessibilityPartial",
  "actionCheckCircle",
  "actionCheckCircleFilled",
  "actionExit",
  "actionHelpDefault",
  "actionHelpOutline",
  "alertNotificationImportant",
  "actionLaunch",
  "actionRegistration",
  "actionPower",
  "actionSettings",
  "alertNotificationImportant",
  "alertWarningFilled",
  "alertWarningOutline",
  "arrow",
  "building",
  "check",
  "clock",
  "close",
  "decorativeEnvelope",
  "decorativeLibraryCard",
  "decorativeShoppingBag",
  "download",
  "errorFilled",
  "errorOutline",
  "fileTypeAudio",
  "fileTypeDoc",
  "fileTypeGenericDoc",
  "fileTypeImage",
  "fileTypePdf",
  "fileTypeSpreadsheet",
  "fileTypeVideo",
  "headset",
  "legacyAccountFilled",
  "legacyAccountUnfilled",
  "legacySocialFacebook",
  "legacySocialInstagram",
  "legacySocialTwitter",
  "legacySocialYoutube",
  "locator",
  "minus",
  "plus",
  "search",
  "socialFacebook",
  "socialInstagram",
  "socialTumblr",
  "socialTwitter",
  "socialYoutube",
  "speakerNotes",
  "utilityAccountFilled",
  "utilityAccountUnfilled",
  "utilityHamburger",
  "utilitySearch",
];

<Meta
  title={getCategory("Button")}
  component={Button}
  decorators={[withDesign]}
  parameters={{
    design: {
      type: "figma",
      url: "https://www.figma.com/file/qShodlfNCJHb8n03IFyApM/Master?node-id=11477%3A2298",
    },
    jest: ["Button.test.tsx"],
  }}
  argTypes={{
    buttonText: { description: "Only used for Storybook" },
    buttonType: {
      table: { defaultValue: { summary: "primary" } },
    },
    className: { control: false },
    displayIcon: { description: "Only used for Storybook." },
    displayIconLeft: {
      description: "Move the icon left or right. Only used for Storybook.",
    },
    iconType: {
      control: { type: "select" },
      options: iconNames,
      description: "Select the icon. Only used for Storybook.",
    },
    id: { control: false },
    isDisabled: { table: { defaultValue: { summary: false } } },
    mouseDown: { table: { defaultValue: { summary: false } } },
    onClick: { control: false },
  }}
/>

# Button

| Component Version | DS Version |
| ----------------- | ---------- |
| Added             | `0.0.4`    |
| Latest            | `1.3.0`    |

## Table of Contents

- [Overview](#overview)
- [Component Props](#component-props)
- [Accessibility](#accessibility)
- [Button Groups](#button-groups)
- [With Icons](#with-icons)
- [Patterns](#patterns)
- [Other Examples](#other-examples)
- [Sizes](#sizes)

## Overview

<Description of={Button} />

Update the `buttonType` in the Controls section to see the types of buttons
that can be rendered.

- `"primary"` is used for actions that move the user forward. This is the default.
- `"secondary"` is used for actions that move the user back, such as cancellations.
- `"text"` is used for equally weighted actions in a text based list.
- `"callout"` is used for call to action text such as "Donate".
- `"noBrand"` is a variant used when there is no brand and will display the
  background color as black.
- `"pill"` is used for equally weighted actions within cards and always in a set.
- `"link"` has been deprecated and should not be used.

When one and only one `Icon` component is passed inside a `Button` component with
no text, it will automatically be configured to use the `"iconOnly"` type.

## Component Props

<Canvas withToolbar>
  <Story
    name="Button with Controls"
    args={{
      buttonText: "Button Text",
      buttonType: "primary",
      className: undefined,
      displayIcon: false,
      displayIconLeft: true,
      iconType: "search",
      id: "button-id",
      isDisabled: false,
      mouseDown: undefined,
      onClick: undefined,
      size: "medium",
      type: "button",
    }}
  >
    {(args) => (
      <Button
        buttonType={args.buttonType}
        className={args.className}
        id={args.id}
        isDisabled={args.isDisabled}
        mouseDown={args.mouseDown}
        onClick={args.onClick}
        size={args.size}
        type={args.type}
      >
        {args.displayIcon && args.displayIconLeft && (
          <Icon name={args.iconType} align="left" size="small" />
        )}
        {args.buttonText}
        {args.displayIcon && !args.displayIconLeft && (
          <Icon name={args.iconType} align="right" size="small" />
        )}
      </Button>
    )}
  </Story>
</Canvas>

<ArgsTable story="Button with Controls" />

## Accessibility

The Reservoir `Button` component renders an HTML `<button>` element that is
accessible. `Button`s should be used to perform user actions or submit forms,
never to link and go to another page. For `Button`s without text and only an
icon, make sure to pass an `aria-label` value to the `Button`. `Button`s cannot
have images of text.

`Button`s can be rendered in three sizes through the `size` prop: `"small"`,
`"medium"`, and `"large"`. The default size is `"medium"`. Even though the `"small"`
size is available, we recommend to use the `"medium"` and `"large"` sizes.

Resources:

- [W3C WAI ARIA Button](https://www.w3.org/TR/wai-aria-practices-1.1/#button)
- [W3C WAI ARIA Button Examples](https://www.w3.org/TR/wai-aria-practices-1.1/examples/button/button.html)
- [MDN ARIA: button role](https://developer.mozilla.org/en-US/docs/Web/Accessibility/ARIA/Roles/button_role)
- [Chakra UI Button](https://chakra-ui.com/docs/components/form/button)
- [W3C WAI WCAG Target Size](https://www.w3.org/WAI/WCAG21/Understanding/target-size.html)

## Button Groups

Primary and secondary buttons should be grouped like in the following example.
The `ButtonGroup` component should be used to wrap the `Button` component.

<Canvas>
  <Story name="Button Groups">
    <ButtonGroup>
      <Button buttonType="secondary" id="group-1">
        Button
      </Button>
      <Button id="group-2">Submit</Button>
    </ButtonGroup>
  </Story>
</Canvas>

## With Icons

The `Icon` component collaborates great with the `Button` component. Check out
[`src/components/Icons/Icon.tsx`](https://github.com/NYPL/nypl-design-system/blob/development/src/components/Icons/Icon.tsx)
to see the full list of icon names that can be rendered.

<Canvas>
  <Story name="With Icon">
    <VStack align="left" spacing="input.group.button.vstack" width="150px">
      <Button id="icon-1">
        <Icon name="search" align="left" size="small" />
        Button Text
      </Button>
      <Button id="icon-2">
        Button Text
        <Icon name="search" align="right" size="small" />
      </Button>
    </VStack>
  </Story>
</Canvas>

The icon can be placed to the left or the right of the button text.

<Canvas>
  <DSProvider>
    <ButtonGroup>
      <Button buttonType="secondary" id="icon-left">
        <Icon name="arrow" iconRotation="rotate90" align="left" size="small" />
        Previous
      </Button>
      <Button buttonType="secondary" id="icon-right">
        Next
        <Icon
          name="arrow"
          iconRotation="rotate270"
          align="right"
          size="small"
        />
      </Button>
    </ButtonGroup>
  </DSProvider>
</Canvas>

Text in a button is optional if an icon is rendered, but make sure that there
is an `aria-label` passed to the `Button` component `aria-label="Previous"`.

<Canvas>
  <DSProvider>
    <ButtonGroup>
      <Button aria-label="Previous" buttonType="secondary" id="prev-btn">
        <Icon name="arrow" iconRotation="rotate90" size="small" />
      </Button>
      <Button aria-label="Next" buttonType="secondary" id="next-btn">
        <Icon name="arrow" iconRotation="rotate270" size="small" />
      </Button>
      <Button aria-label="Close" buttonType="secondary" id="close-btn">
        <Icon name="close" size="small" />
      </Button>
    </ButtonGroup>
  </DSProvider>
</Canvas>

## Patterns

Buttons are blue by default but should be red when it is intended to be used as
a call out. The "Back to Top" button must be of `buttonType="secondary"` and
must include an up arrow icon on the right side.

<Canvas>
  <Story name="Patterns">
    <ButtonGroup>
      <Button buttonType="callout" id="donate-btn">
        Donate to this library
      </Button>
      <Button buttonType="secondary" id="top-btn">
        Back to Top
        <Icon
          name="arrow"
          iconRotation="rotate180"
          size="small"
          className="right"
          align="right"
        />
      </Button>
    </ButtonGroup>
  </Story>
</Canvas>

## Other Examples

The variations modified by the `buttonType` prop:

<Canvas>
  <DSProvider>
    <ButtonGroup align="center">
      <Button id="primary-btn">Primary</Button>
      <Button buttonType="secondary" id="secondary-btn">
        Secondary
      </Button>
      <Button buttonType="text" id="text-btn">
        Text
      </Button>
      <Button buttonType="callout" id="callout-btn">
        Callout
      </Button>
      <Button buttonType="noBrand" id="nobrand-btn">
        No Brand
      </Button>
      <Button buttonType="pill" id="pill-btn">
        Pill
      </Button>
      <Button buttonType="link" id="link-btn">
        Link (deprecated)
      </Button>
    </ButtonGroup>
  </DSProvider>
</Canvas>

Modifying the `isDisabled` prop:

<Canvas>
  <DSProvider>
    <ButtonGroup>
      <Button id="enabled-btn" isDisabled={false}>
        Enabled
      </Button>
      <Button id="disabled-btn" isDisabled>
        isDisabled
      </Button>
    </ButtonGroup>
  </DSProvider>
</Canvas>

## Sizes

Update the size of the `Button` component with the `size` prop and values:
`"small"`, `"medium"`, `"large"`. The default size is `"medium"`.

export const sizeHeaders = ["--", "small", "medium (default)", "large"];
export const buttonData = [
  [
    "primary",
    <Button id="p-small" size="small">
      Primary
    </Button>,
    <Button id="p-medium" size="medium">
      Primary
    </Button>,
    <Button id="p-large" size="large">
      Primary
    </Button>,
  ],
  [
    "secondary",
    <Button buttonType="secondary" id="s-small" size="small">
      Secondary
    </Button>,
    <Button buttonType="secondary" id="s-medium" size="medium">
      Secondary
    </Button>,
    <Button buttonType="secondary" id="s-large" size="large">
      Secondary
    </Button>,
  ],
  [
    "text",
    <Button buttonType="text" id="t-small" size="small">
      Text
    </Button>,
    <Button buttonType="text" id="t-medium" size="medium">
      Text
    </Button>,
    <Button buttonType="text" id="t-large" size="large">
      Text
    </Button>,
  ],
  [
    "callout",
    <Button buttonType="callout" id="c-small" size="small">
      Callout
    </Button>,
    <Button buttonType="callout" id="c-medium" size="medium">
      Callout
    </Button>,
    <Button buttonType="callout" id="c-large" size="large">
      Callout
    </Button>,
  ],
  [
    "noBrand",
    <Button buttonType="noBrand" id="nb-small" size="small">
      No Brand
    </Button>,
    <Button buttonType="noBrand" id="nb-medium" size="medium">
      No Brand
    </Button>,
    <Button buttonType="noBrand" id="nb-large" size="large">
      No Brand
    </Button>,
  ],
  [
    "pill",
    <Button buttonType="pill" id="pill-small" size="small">
      Pill
    </Button>,
    <Button buttonType="pill" id="pill-medium" size="medium">
      Pill
    </Button>,
    <Button buttonType="pill" id="pill-large" size="large">
      Pill
    </Button>,
  ],
  [
    "link (deprecated)",
    <Button buttonType="link" id="l-small" size="small">
      Link
    </Button>,
    <Button buttonType="link" id="l-medium" size="medium">
      Link
    </Button>,
    <Button buttonType="link" id="l-large" size="large">
      Link
    </Button>,
  ],
];

<Canvas>
  <DSProvider>
    <Table
      columnHeaders={sizeHeaders}
      id="all-sizes"
      showRowDividers
      tableData={buttonData}
      useRowHeaders
      sx={{
        tbody: {
          th: {
            verticalAlign: "middle",
          },
          td: {
            verticalAlign: "middle",
          },
        },
      }}
    />
  </DSProvider>
</Canvas>
