import { HStack } from "@chakra-ui/react";
import {
  ArgsTable,
  Canvas,
  Description,
  Meta,
  Story,
} from "@storybook/addon-docs";
import { withDesign } from "storybook-addon-designs";

import Checkbox from "./Checkbox";
import { onChangeDefault } from "./Checkbox";
import { getCategory } from "../../utils/componentCategories";
import DSProvider from "../../theme/provider";

<Meta
  title={getCategory("Checkbox")}
  component={Checkbox}
  decorators={[withDesign]}
  parameters={{
    design: {
      type: "figma",
      url: "https://www.figma.com/file/qShodlfNCJHb8n03IFyApM/Main?node-id=11895%3A658",
    },
    jest: ["Checkbox.test.tsx"],
  }}
  argTypes={{
    className: { control: false },
    id: { control: false },
    isChecked: { control: false },
    isDisabled: {
      table: { defaultValue: { summary: false } },
    },
    isIndeterminate: {
      table: { defaultValue: { summary: false } },
    },
    isInvalid: {
      table: { defaultValue: { summary: false } },
    },
    isRequired: {
      table: { defaultValue: { summary: false } },
    },
    key: { table: { disable: true } },
    onChange: { control: false },
    ref: { table: { disable: true } },
    showHelperInvalidText: {
      table: { defaultValue: { summary: false } },
    },
    showLabel: {
      table: { defaultValue: { summary: false } },
    },
  }}
/>

# Checkbox

| Component Version | DS Version |
| ----------------- | ---------- |
| Added             | `0.1.0`    |
| Latest            | `1.0.2`    |

## Table of Contents

- [Overview](#overview)
- [Component Props](#component-props)
- [Accessibility](#accessibility)
- [Checked](#checked)
- [Indeterminate](#indeterminate)
- [Focused](#focused)
- [Errored](#errored)
- [Disabled](#disabled)
- [Helper Text](#helper-text)
- [Error Text](#error-text)
- [With JSX Element Label](#with-jsx-element-label)

## Overview

<Description of={Checkbox} />

This component renders a Checkbox button form element. See below for configuration
information. Note that the `id` property, while optional, will cause an
accessibility violation if none is present.

## Component Props

<Canvas withToolbar>
  <Story
    name="Checkbox"
    args={{
      className: undefined,
      helperText: "This is the helper text!",
      id: "checkbox_id",
      invalidText: "This is the error text :(",
      isChecked: undefined,
      isDisabled: false,
      isIndeterminate: false,
      isInvalid: false,
      isRequired: false,
      labelText: "Test Label",
      name: "test_name",
      onChange: undefined,
      showHelperInvalidText: true,
      showLabel: true,
      value: "1",
    }}
  >
    {(args) => <Checkbox {...args} />}
  </Story>
</Canvas>

<ArgsTable story="Checkbox" />

## Accessibility

The `Checkbox` component renders `<label>` and `<input type="checkbox" />`
elements that are associated with each other; the label has a `for` attribute
with the value of the `input`'s `id` element. If there is helper or invalid text,
the `<input>` element will have a `aria-describedby` attribute with the value of
the helper or invalid text.

When `showLabel` is set to false, the `labelText` value will be set to the
`<input>`'s `aria-label` attribute.

Resources:

- [W3C WAI ARIA Checkbox Example](https://www.w3.org/TR/wai-aria-practices-1.1/examples/checkbox/checkbox-1/checkbox-1.html)
- [a11ymatters Accessible Checkbox](https://www.a11ymatters.com/pattern/checkbox/)
- [MDN ARIA: checkbox role](https://developer.mozilla.org/en-US/docs/Web/Accessibility/ARIA/Roles/checkbox_role)
- [Chakra UI Checkbox](https://chakra-ui.com/docs/components/form/checkbox)

## Checked

Note that the `isChecked` property in this example is set to `true` and clicking
on it won't remove the checkmark; the `isChecked` prop must now be controlled
and removed manually by the parent component that controls this state.

<Canvas>
  <DSProvider>
    <Checkbox id="isChecked" labelText="I am checked" isChecked value="1" />
  </DSProvider>
</Canvas>

## Indeterminate

Note: This state only changes the icon through the `isIndeterminate` prop. This
does not affect whether the checkbox is checked. The `isIndeterminate` prop must
now be controlled and removed by the parent component in order to remove this state.

<Canvas>
  <DSProvider>
    <Checkbox
      id="indeterminate"
      labelText="I am indeterminate"
      isIndeterminate
    />
  </DSProvider>
</Canvas>

## Focused

<Canvas>
  <DSProvider>
    <Checkbox
      id="focused"
      labelText="Click or tab to the Checkbox to see its focus state"
    />
  </DSProvider>
</Canvas>

## Errored

<Canvas>
  <DSProvider>
    <HStack>
      <Checkbox id="invalid" isInvalid labelText="I am in an error state" />
      <Checkbox
        id="invalid-checked"
        isInvalid
        isChecked
        labelText="I am checked in an error state"
      />
    </HStack>
  </DSProvider>
</Canvas>

## Disabled

<Canvas>
  <DSProvider>
    <HStack>
      <Checkbox id="disabled" isDisabled labelText="I am disabled" />
      <Checkbox
        id="disabled-checked"
        isDisabled
        isChecked
        labelText="I am checked and disabled"
      />
    </HStack>
  </DSProvider>
</Canvas>

## Helper Text

<Canvas>
  <DSProvider>
    <Checkbox
      id="helpertext"
      name="testHelperText"
      labelText="I have helper text"
      helperText="I am the helper text for this Checkbox"
    />
  </DSProvider>
</Canvas>

## Error Text

<Canvas>
  <DSProvider>
    <Checkbox
      id="invalid-text"
      invalidText="I am the error text for this Checkbox"
      isInvalid
      name="testinvalidText"
      labelText="I have error text"
    />
  </DSProvider>
</Canvas>

## With JSX Element Label

This is useful when you want to add dynamic content to the label or add
a layout to the label. View the `CheckboxGroup` documentation for this
usage.

<Canvas>
  <DSProvider>
    <Checkbox
      id="jsx-label"
      labelText={<span>Arts</span>}
      name="jsxElementLabel"
    />
  </DSProvider>
</Canvas>
