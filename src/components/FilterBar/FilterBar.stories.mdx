import {
  ArgsTable,
  Canvas,
  Description,
  Meta,
  Story,
} from "@storybook/addon-docs";
import { withDesign } from "storybook-addon-designs";

import FilterBar from "./FilterBar";
import { getCategory } from "../../utils/componentCategories";
import DSProvider from "../../theme/provider";
import * as story from "./FilterBar.stories";

<Meta
  title={getCategory("FilterBar")}
  component={FilterBar}
  decorators={[withDesign]}
  argTypes={{
    children: { table: { disable: true } },
    id: { control: false },
    selectedItems: { control: false },
    showClearAll: {
      type: { name: "boolean", required: false },
      defaultValue: false,
      description: "`boolean`",
    },
    showSubmitAll: {
      type: { name: "boolean", required: false },
      defaultValue: false,
      description: "`boolean`",
    },
    onSubmit: {
      type: { name: "() => void", required: false },
      description:
        "Function to handle submit of all selectedItems - needs to be provided from consuming app",
    },
    onClear: {
      type: { name: "() => void", required: false },
      description:
        "Function to clear all selectedItems - available through hook",
    },
    onOpen: {
      contol: false,
      description:
        "Function to open the filter modal overlay on mobile viewport - available through hook",
      type: { name: "() => void", required: false },
    },
    onClose: {
      control: false,
      description:
        "Function to close the filter modal overlay on mobile viewport - available through hook",
      type: { name: "() => void", required: false },
    },
    onToggle: {
      control: false,
      description:
        "Function to toggle the filter modal overlay on mobile viewport - available through hook",
      type: { name: "() => void", required: false },
    },
  }}
/>

# FilterBar

| Component Version | DS Version |
| ----------------- | ---------- |
| Added             | `1.4.0`    |
| Latest            | `1.4.0`    |

## Table of Contents

- [Overview](#overview)
- [Component Props](#component-props)
- [Layout Patterns](#layout-patterns)

## Overview

<Description of={FilterBar} />

## Component Props

<Canvas withToolbar>
  <Story
    name="FilterBar"
    args={{
      id: "filterbar-id",
      headingText: "FilterBar",
      layout: "row",
    }}
  >
    {(args) => <story.FilterBarStory {...args} />}
  </Story>
</Canvas>

<ArgsTable story="FilterBar" />

## Layout Patterns

The display of the FilterBar child components can be set to a "row" or a "column" layout.
On screen width under 600px width the `layout` is automatically set to "column".
Note: when `layout = "column"` is passed, the MultiSelect components will have `isBlockElement` set to `true` by default.

<Canvas>
  <DSProvider>
    <story.FilterBarLayoutStory />
  </DSProvider>
</Canvas>

## `useFilterBar` hook

`useFilterBar` is an optional hook for
cases where managing the state of the component in the consuming app is less
of a concern and general ease of use is prefered.

The hook returns an object containing all the props and state needed to handle the selectedItems.
That includes the functions `onChange`, `onMixedStateChange`, `onClear`, `onClearAll` for handling any changes to the selection of items,
a `setSelectedItems` function to control or manipulate the (initial) state of selectedItems and the current state of the selection: `selectedItems`.
Additionally it returns an `onToggle` function or `onClose`/`onOpen` to control the `isModalOpen` state, and the boolean value `isModalOpen` for a Filter Modal overlay.

Find the full documentation under [useFilterBar](https://nypl.github.io/nypl-design-system/reservoir/v1/?path=/story/hooks-usefilterbar--page).
