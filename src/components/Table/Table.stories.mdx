import {
  Meta,
  Story,
  Canvas,
  ArgsTable,
  Description,
} from "@storybook/addon-docs";
import { withDesign } from "storybook-addon-designs";

import { Box } from "@chakra-ui/react";
import Image from "../Image/Image";
import Table from "./Table";
import DSProvider from "../../theme/provider";
import { getCategory } from "../../utils/componentCategories";

<Meta
  title={getCategory("Table")}
  component={Table}
  decorators={[withDesign]}
  parameters={{
    design: {
      type: "figma",
      url: "https://www.figma.com/file/qShodlfNCJHb8n03IFyApM/Main?node-id=46780%3A27675",
    },
    jest: ["Table.test.tsx"],
  }}
  argTypes={{
    columnHeaders: { control: { disable: true } },
    columnHeadersBackgroundColor: { control: { type: "color" } },
    columnHeadersTextColor: { control: { type: "color" } },
    id: { control: false },
    tableData: { control: false },
  }}
/>

# Table

| Component Version | DS Version        |
| ----------------- | ----------------- |
| Added             | `0.25.9`          |
| Latest            | `DarkModeVersion` |

## Table of Contents

- [Overview](#overview)
- [Component Props](#component-props)
- [Accessibility](#accessibility)
- [With a title](#with-a-title)
- [With Row Dividers](#with-row-dividers)
- [With Row Headers](#with-row-headers)
- [With Custom Header Colors](#with-custom-header-colors)
- [With JSX Elements](#with-jsx-elements)
- [Responsive Mobile Layout](#responsive-mobile-layout)

## Overview

<Description of={Table} />

export const columnHeaders = [
  "First Name",
  "Last Name",
  "Nick Name",
  "Address1",
  "City",
  "State",
  "Zipcode",
];
export const tableData = [
  ["Tom", "Nook", "Tanukichi", "Main Street", "New York", "NY", "23458"],
  ["Isabelle", "-", "Shizue", "Walnut Street", "New York", "NY", "23458"],
  ["K.K.", "Slider", "Totakeke", "Niper Place", "New York", "NY", "98765"],
  [
    "Sonny",
    "Resetti",
    "Risetto san",
    "Village Road",
    "New York",
    "NY",
    "09873",
  ],
];

## Component Props

<Canvas withToolbar>
  <Story
    name="Table"
    args={{
      className: undefined,
      columnHeaders,
      columnHeadersBackgroundColor: undefined,
      columnHeadersTextColor: undefined,
      id: undefined,
      showRowDividers: false,
      tableData,
      titleText: undefined,
      useRowHeaders: false,
    }}
  >
    {(args) => <Table {...args}></Table>}
  </Story>
</Canvas>

<ArgsTable story="Table" />

## Accessibility

Internally, the HTML for the `Table` element is structured with proper semantic
use of the `table`, `caption`, `thead`, `tbody`, `tr`, and `td` HTML elements.
When titles are added through the `titleText` prop, the `caption` element will
be rendered above the `thead` element.

This component should be used to render tabular data only and not used for layout
purposes.

For improved accessibility, column headers are required and the first row
in the table will always be rendered as a `thead` with a child `tr` and
corresponsing `th` cells. Additionally, the first cell in a `tr` row can be a `th`
header cell. Each `th` header cell has an appropriate scope attribute set to
either `scope="col"` or `scope="row"`. For example, every `th` cell in a `thead`
`tr` row will have `scope="col"`. Every `th` cell in a `tbody` `tr` row will
have `scope="row"`.

Header cells are visually different from the standard table data. Use the
`columnHeaders` prop to pass the data for the column headers. Use the
`useRowHeaders` prop to render the first cell in every row as a header. If a
table has two levels of headers (such as two levels of horizontal headers), break
the data into two separate tables.

Resources:

- [W3C Tables Tutorial](https://www.w3.org/WAI/tutorials/tables/)
- [MDN table: The Table element](https://developer.mozilla.org/en-US/docs/Web/HTML/Element/table)
- [MDN HTML table advance features and accessibility](https://developer.mozilla.org/en-US/docs/Learn/HTML/Tables/Advanced)
- [Chakra UI Table](https://chakra-ui.com/docs/components/data-display/table)

## With a title

Use the `titleText` prop to add a title to the table.

<Canvas>
  <DSProvider>
    <Table
      columnHeaders={columnHeaders}
      id="title-table"
      tableData={tableData}
      titleText="Table with a title"
    />
  </DSProvider>
</Canvas>

## With Row Dividers

Use the `showRowDividers` prop to render a divider between each row.

<Canvas>
  <DSProvider>
    <Table
      columnHeaders={columnHeaders}
      id="showRowDividers-table"
      showRowDividers
      tableData={tableData}
    />
  </DSProvider>
</Canvas>

## With Row Headers

Use the `useRowHeaders` prop to render the first cell in every row as a header.
Notice that they turn bold.

<Canvas>
  <DSProvider>
    <Table
      columnHeaders={columnHeaders}
      id="rowHeaders-table"
      tableData={tableData}
      useRowHeaders
    />
  </DSProvider>
</Canvas>

## With Custom Header Colors

It's possible to customize the header colors by using the `columnHeadersBackgroundColor`
and `columnHeadersTextColor` props. Note that the colors need to have sufficient
color contrast.

<Canvas>
  <DSProvider>
    <Table
      columnHeaders={columnHeaders}
      columnHeadersBackgroundColor="var(--nypl-colors-ui-link-secondary)"
      columnHeadersTextColor="var(--nypl-colors-ui-white)"
      id="rowHeaders-table"
      showRowDividers
      tableData={tableData}
      useRowHeaders
    />
  </DSProvider>
</Canvas>

## With JSX Elements

export const characterHeaders = ["First Name", "Last Name", "Avatar"];
export const charactersData = [
  [
    "Tom",
    "Nook",
    <Image
      alt="Tom Nook"
      size="small"
      src="https://play.nintendo.com/images/AC_Tom_FRYtwIN.17345b1513ac044897cfc243542899dce541e8dc.9afde10b.png"
    />,
  ],
  [
    "Isabelle",
    "-",
    <Image
      alt="Isabelle"
      size="small"
      src="https://play.nintendo.com/images/AC_Isabelle_7XU6aGu.17345b1513ac044897cfc243542899dce541e8dc.9afde10b.png"
    />,
  ],
  [
    "K.K.",
    "Slider",
    <Image
      alt="K.K Slider"
      size="small"
      src="https://play.nintendo.com/images/AC_KK_jh4yj5t.17345b1513ac044897cfc243542899dce541e8dc.9afde10b.png"
    />,
  ],
];

It's possible to pass in JSX elements in the `tableData` prop.

```jsx
export const charactersData = [
  [
    "Tom",
    "Nook",
    <Image
      alt="Tom Nook"
      size="small"
      src="https://play.nintendo.com/images/AC_Tom_FRYtwIN.17345b1513ac044897cfc243542899dce541e8dc.9afde10b.png"
    />,
  ],
  [
    "Isabelle",
    "-",
    <Image
      alt="Isabelle"
      size="small"
      src="https://play.nintendo.com/images/AC_Isabelle_7XU6aGu.17345b1513ac044897cfc243542899dce541e8dc.9afde10b.png"
    />,
  ],
  [
    "K.K.",
    "Slider",
    <Image
      alt="K.K Slider"
      size="small"
      src="https://play.nintendo.com/images/AC_KK_jh4yj5t.17345b1513ac044897cfc243542899dce541e8dc.9afde10b.png"
    />,
  ],
];
```

<Canvas>
  <DSProvider>
    <Table
      columnHeaders={characterHeaders}
      id="jsx-example"
      showRowDividers
      tableData={charactersData}
    />
  </DSProvider>
</Canvas>

## Responsive Mobile Layout

The `Table` component is responsive. Please note that for a mobile viewport the
standard horizontal layout of an HTML table is converted to a stacked vertical
layout, with each "row" visually separated by a prominent horizontal rule. Despite
the significant visual changes in the responsive layout, all component props are
still functional.

To view and test this in Storybook, go to the "[Canvas](https://nypl.github.io/nypl-design-system/reservoir/v1/?path=/story/components-page-layout-table--table)"
tab and change the viewport in the Storybook toolbar at the top of the page.
