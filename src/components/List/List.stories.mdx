import {
  ArgsTable,
  Canvas,
  Description,
  Meta,
  Story,
} from "@storybook/addon-docs";
import { withDesign } from "storybook-addon-designs";

import Heading from "../Heading/Heading";
import { HeadingLevels } from "../Heading/HeadingTypes";
import Image from "../Image/Image";
import Link from "../Link/Link";
import { LinkTypes } from "../Link/LinkTypes";
import List from "./List";
import { ListTypes } from "./ListTypes";
import { getCategory } from "../../utils/componentCategories";
import { getStorybookEnumValues } from "../../utils/utils";

export const enumValues = getStorybookEnumValues(ListTypes, "ListTypes");

<Meta
  title={getCategory("List")}
  component={List}
  decorators={[withDesign]}
  parameters={{
    design: {
      type: "figma",
      url: "https://www.figma.com/file/qShodlfNCJHb8n03IFyApM/Master?node-id=16115%3A304",
    },
    jest: ["List.test.tsx"],
  }}
  argTypes={{
    additionalStyles: { control: false },
    children: { table: { disable: true } },
    className: { control: false },
    id: { control: false },
    inline: { table: { defaultValue: { summary: false } } },
    listItems: { control: false },
    noStyling: { table: { defaultValue: { summary: false } } },
    type: {
      control: { type: "select" },
      options: enumValues.options,
      table: { defaultValue: { summary: "ListTypes.Unordered" } },
    },
  }}
/>

# List

| Component Version | DS Version |
| ----------------- | ---------- |
| Added             | `0.7.0`    |
| Latest            | `0.26.0`   |

## Table of Contents

- [Overview](#overview)
- [Component Props](#component-props)
- [Accessibility](#accessibility)
- [Description List](#description-list)
- [Description List of Links](#description-list-of-links)
- [Lists with Data Props](#lists-with-data-props)

## Overview

<Description of={List} />

export const animalCrossingDescriptions = [
  {
    term: "Mahi-mahi",
    description:
      'The mahi-mahi is an ocean fish known for its wide, somewhat-cute face. It can reach over six feet long. It is known by different names including "dolphinfish," even though it has no relation to dolphins. They live in only in warm, tropical waters...which perhaps explains the relaxed, happy look on their faces.',
  },
  {
    term: "Golden trout",
    description: (
      <p>
        The golden trout is a <b>beautifully</b> colored fish that can only live
        in very clean waters. They are difficult to come across since they are
        found only in high mountain streams. As a side note, I find it much
        easier to appreciate fish that aren't such prima donnas about
        everything.
      </p>
    ),
  },
  {
    term: "Rainbowfish",
    description:
      'The rainbowfish is a tropical fish known for its metallic colors and beautiful fins. There are over 50 different species, each unique and pleasing color. I must say, it does make me wish for feathers of a more exciting hue than "underbaked brownie."',
  },
  {
    term: "Suckerfish",
    description: (
      <p>
        The{" "}
        <Link href="https://animalcrossing.fandom.com/wiki/Suckerfish">
          suckerfish
        </Link>{" "}
        is a curious fish that likes to attach itself with its sucker mouth to
        larger marine animals. The benefit to the suckerfish is that it gets to
        eat smaller parasites and dead skin off the host's body. Amusingly, some
        people have used suckerfish on cords to catch large turtles with the
        fish's own suction! I imagine this practice is the cause of some awkward
        conversations between fish and turtle, eh wot?
      </p>
    ),
  },
];
export const itemGroups = [
  "Art",
  "Bushes",
  "Clothing",
  "DIY Recipes",
  "Flowers",
  "Fossils",
  "Fruits",
  "Furniture",
  "Materials",
  "NPC",
  "Songs",
  "Tools",
  "Villagers",
];
export const descriptions = [
  {
    term: "Balrogs",
    description:
      'Demonic creatures of fire and shadow, Balrogs were fallen Maiar, loyal to the first Dark Lord, Morgoth. They participated in the wars of the First Age of Middle-earth but were mostly destroyed during the War of Wrath which ended the Age. By the Third Age, the only remaining Balrog was "Durin\'s Bane," the Balrog of Moria, killed by Gandalf.',
  },
  {
    term: "Dwarves",
    description:
      "The race of Dwarves preferred to live in mountains and caves, settling in places such as Erebor (the Lonely Mountain), the Iron Hills, the Blue Mountains, and Moria (Khazad-dûm) in the Misty Mountains. Aulë the Smith created Dwarves; he also invented the Dwarven language, known as Khuzdul. Dwarves mined and worked precious metals throughout the mountains of Middle-earth. The seven different groups of Dwarf-folk originated in the locations where the Seven Fathers of the Dwarves first awoke before the First Age.",
  },
  {
    term: "Elves",
    description:
      'The Elves, or Firstborn, were the first of Eru\'s Children to awaken. Born under the stars before the ascension of the Moon and the Sun, they retain a special love for light and an inner spirit endowed with unique gifts. They call themselves the Quendi, or "Speakers", for they were the first to utter words; and, even now, no race understands language and song like the Firstborn. Fair and fine featured, brilliant and proud, immortal and strong, tall and agile, they are the most blessed of the Free Peoples. They can see as well under moon or starlight as a man at the height of day. They cannot become sick or scarred, but if an Elf should die, from violence or losing the will to live from grief, their spirit goes to the halls of Mandos, and as they are bound to Arda and cannot leave until the world is broken and remade. Elven skill and agility is legendary: for instance, walking atop freshly fallen snow without leaving a trace of their passing. On a clear day they can see ten miles with perfect clarity and detail up to 100 miles. These gifts come at great cost, though: they are strongly bound to Fate (see Mandos) and hated by Morgoth. No other race has been blessed and cursed more than the Quendi.',
  },
  {
    term: "Ents",
    description:
      "Ents were an ancient race of tree-like creatures, having become like the trees that they shepherd. They were created by Yavanna and given life by Ilúvatar. By the Third Age, they were a dwindling race, having long ago lost their mates, the Entwives.",
  },
  {
    term: "Hobbits",
    description:
      'Hobbits are a race of Middle-earth, also known as "halflings" on account of their short stature, roughly half the size of men. They are characterized by curly hair on their heads and leathery feet that have furry insteps, for which they did not wear shoes. Many hobbits live in the Shire as well as Bree, and they once lived in the vales of the Anduin. They are fond of an unadventurous life of farming, eating, and socializing. There were three types of Hobbits: The Harfoots were the most numerous. The Stoors had an affinity for water, boats and swimming; the Fallohides were an adventurous people. The origin of hobbits is unclear, but of all the races they have the closest affinity to men, and in the Prologue to The Lord of the Rings Tolkien calls them relatives of men.',
  },
];

<Canvas withToolbar>
  <Story
    name="List with Controls"
    args={{
      additionalStyles: undefined,
      className: undefined,
      id: "nypl-list",
      inline: false,
      listItems: undefined,
      noStyling: false,
      title: "Middle-Earth Peoples",
      type: "ListTypes.Unordered",
    }}
  >
    {(args) => (
      <List {...args} type={enumValues.getValue(args.type)}>
        {args.type !== "ListTypes.Description"
          ? itemGroups.map((item, i) => <li key={i}>{item}</li>)
          : descriptions.map((item, i) => [
              <dt key={`dt_${i}`}>{item.term}</dt>,
              <dd key={`dd_${i}`}>{item.description}</dd>,
            ])}
      </List>
    )}
  </Story>
</Canvas>

<ArgsTable story="List with Controls" />

## Accessibility

Internally, the `List` component implements native HTML markup for unordered,
ordered, and description lists. This includes `ul`, `ol`, and `dl` elements.
When data is passed into the `listItems` data prop, the appropriate children
HTML elements are used. This includes `li` for unorder and ordered lists, and
`dt` and `dd` elements for description lists.

The description type for the `List` component is wrapped in a `section` element
with an `h2` header. Keep that in mind when ordering headings on the page.

Resources:

- [W3C WAI Content Structure](https://www.w3.org/WAI/tutorials/page-structure/content/)
- [Deque University Appropriate Semantic Markup for Lists](https://dequeuniversity.com/tips/list-markup)

## Description List

_Note: This element is officially called the "Description List" element in HTML5.
Before HTML5, it was called the "Definition List" element and some online resources
may still use this name. In the Reservoir Design System, we will use the
"Description List" name._

- [W3C Using description lists](https://www.w3.org/WAI/WCAG21/Techniques/html/H40.html)
- [MDN dl: The Description List element](https://developer.mozilla.org/en-US/docs/Web/HTML/Element/dl)

To render a description list, pass in `ListTypes.Description` to the `type` prop.
The optional `title` prop will now render above the description list element.
This type of list renders `dt` and `dd` elements.

```jsx
<List type={ListTypes.Description}>
  <dt>Term</dt>
  <dd>Description</dd>
</List>
```

<Canvas>
  <Story
    name="Description List"
    args={{
      id: "nypl-list2",
      noStyling: false,
      title: "Middle-Earth Peoples",
    }}
    argTypes={{
      inline: { control: false },
      noStyling: { control: false },
      type: { control: false },
    }}
    parameters={{
      design: {
        type: "figma",
        url: "https://www.figma.com/file/qShodlfNCJHb8n03IFyApM/Main?node-id=10734%3A5178",
      },
    }}
  >
    {(args) => (
      <List {...args} type={ListTypes.Description}>
        {descriptions.map((item, i) => [
          <dt key={`dt_${i}`}>{item.term}</dt>,
          <dd key={`dd_${i}`}>{item.description}</dd>,
        ])}
      </List>
    )}
  </Story>
</Canvas>

## Description List of Links

An example with HTML elements inside of the `dd` elements.

<Canvas>
  <Story
    name="Description List of Links"
    args={{
      noStyling: false,
      title: "Details",
    }}
    argTypes={{
      inline: { control: false },
      noStyling: { control: false },
      type: { table: { disable: true } },
    }}
    parameters={{
      design: {
        type: "figma",
        url: "https://www.figma.com/file/qShodlfNCJHb8n03IFyApM/Main?node-id=10734%3A5178",
      },
    }}
  >
    {(args) => (
      <List {...args} type={ListTypes.Description}>
        <dt>Authors</dt>
        <dd>
          <a href="#">Chirwa, Ephraim Wadonda, author</a>
          <br />
          <a href="#">Dorward, Andrew, author</a>
        </dd>
        <dt>Subjects</dt>
        <dd>
          <a href="#">Ackerbau</a>
          <br />
          <a href="#">Ackerbau.</a>
          <br />
          <a href="#">Africa.</a>
          <br />
          <a href="#">Afrika.</a>
          <br />
          <a href="#">Agrarsubvention</a>
          <br />
          <a href="#">Agrarsubvention.</a>
          <br />
          <a href="#">Agricultura -- Subvencions -- Malawi.</a>
          <br />
          <a href="#">Agricultural economics New.</a>
          <br />
          <a href="#">Agricultural subsidies</a>
          <br />
          <a href="#">Agricultural subsidies -- Developing countries.</a>
          <br />
          <a href="#">Agricultural subsidies -- Malawi.</a>
          <br />
          <a href="#">Agricultural subsidies.</a>
          <br />
          <a href="#">BUSINESS &amp; ECONOMICS -- Industries</a>
          <br />
        </dd>
      </List>
    )}
  </Story>
</Canvas>

## Lists with Data Props

If `li` or `dt`/`dd` elements cannot be passed as children to the `List` element,
an array with data can be passed into the `listItems` prop. Note: either
children elements or the `listItems` prop should be passed but not both.

### Unordered and Ordered

For lists of type `ListTypes.Unordered` (ul) or `ListTypes.Ordered` (ol), `li`
list item elements can be passed as children. If that's not possible but the
data to render is stored as an array of strings, then that data array can be
passed into `listItems`.

```jsx
<!-- With `li` elements -->
<List type={ListTypes.Unordered}>
  <li>Mahi-mahi</li>
  <li>Golden trout</li>
  <li>Rainbowfish</li>
  <li>Suckerfish</li>
</List>

<!-- With `itemList` data prop -->
const fishArray = ["Mahi-mahi", "Golden trout", "Rainbowfish", "Suckerfish"];
<List type={ListTypes.Unordered} listItems={fishArray} />
```

### Description

For lists of type `ListTypes.Description` (dl), `dt` and `dd` elements can be
passed as children. If that's not possible but the data to render is stored as
an array of objects, then that data array can be passed into `listItems`. The
object must have two keys, `term` and `description`.

```jsx
// With `dt`/`dd` elements
<List type={ListTypes.Description} title="Animal Crossing Fish">
  <dt>Mahi-mahi</dt>
  <dd>The mahi-mahi is an ocean fish known...</dd>
  <dt>Golden trout</dt>
  <dd>The golden trout is a beautifully colored fish...</dd>
  <dt>Rainbowfish</dt>
  <dd>The rainbowfish is a tropical fish known...</dd>
  <dt>Suckerfish</dt>
  <dd>The suckerfish is a curious fish that...</dd>
</List>

// With `itemList` data prop
const fishDescriptions = [
  {
    term: "Mahi-mahi",
    description: "The mahi-mahi is an ocean fish known..."
  },
  {
    term: "Golden trout",
    description: "The golden trout is a beautifully colored fish..."
  },
  {
    term: "Rainbowfish",
    description: "The rainbowfish is a tropical fish known..."
  },
  {
    term: "Suckerfish"
    description: "he suckerfish is a curious fish that..."
  }
];
<List
  listItems={fishDescriptions}
  title="Animal Crossing Fish"
  type={ListTypes.Description}
/>
```

<Canvas>
  <Story
    name="List with Data Props"
    args={{
      listItems: animalCrossingDescriptions,
      noStyling: false,
      title: "Animal Crossing Fish",
    }}
    argTypes={{
      inline: { control: false },
      noStyling: { control: false },
      type: { control: false },
    }}
  >
    {(args) => <List {...args} type={ListTypes.Description} />}
  </Story>
</Canvas>
