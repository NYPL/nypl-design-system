import { ButtonGroup } from "@chakra-ui/react";
import {
  ArgsTable,
  Canvas,
  Description,
  Meta,
  Story,
} from "@storybook/addon-docs";
import { useState } from "react";

import { ModalTrigger, useModal } from "./Modal";
import Button from "../Button/Button";
import { ButtonTypes } from "../Button/ButtonTypes";
import { getCategory } from "../../utils/componentCategories";

<Meta
  title={getCategory("Modal")}
  component={Modal}
  parameters={{
    jest: ["Modal.test.tsx"],
  }}
/>

# Modal

| Component Version | DS Version |
| ----------------- | ---------- |
| Added             | `0.1.0`    |
| Latest            | `0.3.5`    |

<Description of={Modal} />

## ModalTrigger

This DS `ModalTrigger` component renders a button that you click to open the
modal.

```jsx
import { ModalTrigger } from "@nypl/design-system-react-components";

//...
<ModalTrigger
  buttonText="Button Text"
  headingText="Heading text"
  bodyContent="body text"
/>;
```

<Canvas withToolbar>
  <Story
    name="ModalTrigger"
    args={{
      buttonText: "Button Text",
      headingText: "Heading text",
      bodyContent: "body text",
    }}
  >
    {(args) => <ModalTrigger {...args} />}
  </Story>
</Canvas>

<ArgsTable story="ModalTrigger" />

## Modal

This DS `Modal` component renders just the Chakra UI `Modal` component. You
must render your own button and pass the appropriate `onOpen` handler.

You can retrieve the DS `Modal` component and the `onOpen` function handler when
calling the `useModal` function. This returns an object with `onOpen` and `Modal`
properties. The `onOpen` function handler is used to open the `Modal` React
component. This function can be passed to any number of elements that use
the `onClick` attribute.

@NOTE: in this case, the `buttonText` prop is not necessary since you have to
create and render your own button.

```jsx
import { useModal } from "@nypl/design-system-react-components";

// ...
export const ModalStory = (args) => {
  const { onOpen, Modal } = useModal();
  return (
    <>
      <ButtonGroup>
        <Button id="1" onClick={onOpen} buttonType={ButtonTypes.NoBrand}>
          Open Modal
        </Button>
        <Button buttonType={ButtonTypes.Secondary} id="2" onClick={onOpen}>
          I can open the modal, too
        </Button>
      </ButtonGroup>
      <div onClick={onOpen}>
        I'm just a div and shouldn't be used in production but this is just an
        example
      </div>
      <Modal headingText="Heading text" bodyContent="body text" />
    </>
  );
};
```

export const ModalStory = (args) => {
  const { onOpen, Modal } = useModal();
  return (
    <>
      <ButtonGroup>
        <Button id="1" onClick={onOpen} buttonType={ButtonTypes.NoBrand}>
          Custom Open Button
        </Button>
        <Button buttonType={ButtonTypes.Secondary} id="2" onClick={onOpen}>
          I can open the modal, too
        </Button>
      </ButtonGroup>
      <div onClick={onOpen}>
        I'm just a div and shouldn't be used in production but this is just an
        example
      </div>
      <Modal {...args} />
    </>
  );
};

<Canvas withToolbar>
  <Story
    name="Modal"
    args={{
      headingText: "Heading text",
      bodyContent: "body text",
    }}
  >
    {(args) => <ModalStory {...args} />}
  </Story>
</Canvas>

<ArgsTable story="Modal" />
