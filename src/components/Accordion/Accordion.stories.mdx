import {
  Meta,
  Story,
  ArgsTable,
  Canvas,
  Description,
} from "@storybook/addon-docs/blocks";
import Accordion from "./Accordion";
import { withDesign } from "storybook-addon-designs";
import { listRenderer as ListStory } from "../List/List.stories.tsx";
import { ListTypes } from "../List/ListTypes";
import { Source } from "@storybook/addon-docs/blocks";
import dedent from "ts-dedent";
import ReactDOMServer from "react-dom/server";
import { getCategory } from "../../utils/componentCategories";

<Meta
  title={getCategory("Accordion")}
  component={Accordion}
  decorators={[withDesign]}
  parameters={{
    design: {
      type: "figma",
      url:
        "https://www.figma.com/file/qShodlfNCJHb8n03IFyApM/Master?node-id=10734%3A2520",
    },
    jest: ["Accordion.test.tsx"],
  }}
  argTypes={{
    contentData: { table: { disable: true } },
    id: { table: { disable: true } },
  }}
/>

# Accordion

| Component Version | DS Version |
| ----------------- | ---------- |
| Added             | `0.1.0`    |
| Latest            | `0.24.2`   |

<Description of={Accordion} />

The Accordion component pushes existing content on the page down. Each accordion
item is self contained but when multiple are rendered together, they render in a
"FAQ" style. When multiple accordions are rendered together, they can each open
and close independent of each other.

The only way to render an Accordion component is to pass in an array of objects
with `label` and `panel` properties for each accordion item. Note that you can
pass in a string or DOM elements into the `panel` property in each object. This
approach is needed because, internally, we deal with the logic to render the
necessary icon, Chakra components, and styles.

<Canvas withToolbar>
  <Story
    name="Basic"
    args={{
      isDefaultOpen: false,
      isScrollable: false,
    }}
  >
    {(args) => (
      <Accordion
        {...args}
        contentData={[
          {
            label: "Tom Nook",
            panel: (
              <p>
                Tom Nook, <b>known in Japan as Tanukichi</b>, is a fictional
                character in the Animal Crossing series who operates the village
                store.
              </p>
            ),
          },
        ]}
      />
    )}
  </Story>
</Canvas>

```js
const contentData = [
  {
    label: "Tom Nook",
    panel: (
      <p>
        Tom Nook, <b>known in Japan as Tanukichi</b>, is a fictional character
        in the Animal Crossing series who operates the village store.
      </p>
    ),
  },
];

...

<Accordion contentData={contentData} />
```

<ArgsTable story="Basic" />

## FAQ example

export const faqContent = [
  {
    label: "Tom Nook",
    panel: (
      <p>
        Tom Nook, <b>known in Japan as Tanukichi</b>, is a fictional character
        in the Animal Crossing series who operates the village store.
      </p>
    ),
  },
  {
    label: "Isabelle",
    panel:
      "Isabelle, known as Shizue in Japan, is a fictional character " +
      "from the Animal Crossing series of video games. She is a kindly Shih " +
      "Tzu that debuted in the 2012 release Animal Crossing: New Leaf, where " +
      "she serves as the secretary to the player character.",
  },
  {
    label: "K.K. Slider",
    panel:
      "<p>Totakeke, more commonly known as <b>K.K. Slider or K.K.</b>, is a " +
      "fictional character within the Animal Crossing franchise. One of the " +
      "franchise's most popular characters, he debuted in the title Animal " +
      "Crossing, and has appeared in every installment since.</p>",
  },
];

Building out FAQ-like accordions happens automatically when there are more than
one object in the array passed into the `contentData` prop.

<Canvas withToolbar>
  <Story name="FAQ">
    <Accordion contentData={faqContent} />
  </Story>
</Canvas>

```js
export const faqContent = [
  {
    label: "Tom Nook",
    panel: (
      <p>
        Tom Nook, <b>known in Japan as Tanukichi</b>, is a fictional character
        in the Animal Crossing series who operates the village store.
      </p>
    ),
  },
  {
    label: "Isabelle",
    panel:
      "Isabelle, known as Shizue in Japan, is a fictional character " +
      "from the Animal Crossing series of video games. She is a kindly Shih " +
      "Tzu that debuted in the 2012 release Animal Crossing: New Leaf, where " +
      "she serves as the secretary to the player character.",
  },
  {
    label: "K.K. Slider",
    panel:
      "<p>Totakeke, more commonly known as <b>K.K. Slider or K.K.</b>, is a " +
      "fictional character within the Animal Crossing franchise. One of the " +
      "franchise's most popular characters, he debuted in the title Animal " +
      "Crossing, and has appeared in every installment since.</p>",
  },
];

...

<Accordion contentData={faqContent} />
```

## Scrollable example

Use prop `isScrollable={true}` when you'd like the accordion height to match
that of its parent container. In this example, we wrap the accordion in a
container whose height is set to 300px. If the contents within the accordion
are taller than the height of the parent container, a scrollbar will appear.

As in the other examples, any page content underneath the accordion
will continue to be pushed down.

<Canvas withToolbar>
  <Story name="Scrollable">
    <div style={{ maxHeight: "300px", width: "500px" }}>
      <Accordion
        isScrollable={true}
        contentData={[
          {
            label: "Tom Nook",
            panel: (
              <>
                <p>Items that belong to Tom Nook</p>
                <ListStory type={ListTypes.Unordered} />
              </>
            ),
          },
        ]}
      />
    </div>
    <div>Example content underneath</div>
  </Story>
</Canvas>
