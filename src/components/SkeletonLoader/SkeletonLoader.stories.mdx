import { action } from "@storybook/addon-actions";
import {
  ArgsTable,
  Canvas,
  Description,
  Meta,
  Story,
} from "@storybook/addon-docs";
import { withDesign } from "storybook-addon-designs";

import SimpleGrid from "../Grid/SimpleGrid";
import SkeletonLoader from "./SkeletonLoader";
import { getCategory } from "../../utils/componentCategories";

<Meta
  title={getCategory("SkeletonLoader")}
  component={SkeletonLoader}
  decorators={[withDesign]}
  parameters={{
    design: {
      type: "figma",
      url: "https://www.figma.com/file/qShodlfNCJHb8n03IFyApM/Master?node-id=17219%3A7",
    },
    jest: ["SkeletonLoader.test.tsx"],
  }}
  argTypes={{
    className: { control: false },
    contentSize: { table: { defaultValue: { summary: "3" } } },
    headingSize: { table: { defaultValue: { summary: "1" } } },
    imageAspectRatio: {
      table: {
        defaultValue: { summary: "square" },
      },
    },
    isBordered: { table: { defaultValue: { summary: "false" } } },
    layout: {
      table: { defaultValue: { summary: "column" } },
    },
    showButton: { table: { defaultValue: { summary: "false" } } },
    showContent: { table: { defaultValue: { summary: "true" } } },
    showHeading: { table: { defaultValue: { summary: "true" } } },
    showImage: { table: { defaultValue: { summary: "true" } } },
  }}
/>

# SkeletonLoader

| Component Version | DS Version |
| ----------------- | ---------- |
| Added             | `0.17.3`   |
| Latest            | `0.26.0`   |

## Table of Contents

- [Overview](#overview)
- [Component Props](#component-props)
- [Accessibility](#accessibility)
- [Card Placeholders in a Grid](#card-placeholders-in-a-grid)
- [Text Placeholders in a List](#text-placeholders-in-a-list)

## Overview

<Description of={SkeletonLoader} />

The `layout`, `width`, and placeholder elements within the `SkeletonLoader` can
be customized.

Please note that the initial rendering below has the `width` prop set to `300px`
to better view the example. The default value is `100%`.

## Component Props

<Canvas withToolbar>
  <Story
    name="SkeletonLoader with Controls"
    args={{
      className: undefined,
      contentSize: 3,
      headingSize: 1,
      imageAspectRatio: "square",
      isBordered: false,
      layout: "column",
      showButton: false,
      showContent: true,
      showHeading: true,
      showImage: true,
      width: "300px",
    }}
  >
    {(args) => (
      <SkeletonLoader
        {...args}
        layout={layoutsEnumValues.getValue(args.layout)}
      />
    )}
  </Story>
</Canvas>

<ArgsTable story="SkeletonLoader with Controls" />

## Accessibility

According to W3C's success criterion 2.2.2 for operable user interfaces:

> For any moving, blinking or scrolling information that (1) starts automatically,
> (2) lasts more than five seconds, and (3) is presented in parallel with other
> content, there is a mechanism for the user to pause, stop, or hide it unless
> the movement, blinking, or scrolling is part of an activity where it is essential;

The `SkeletonLoader` component can be used as a placeholder for local content
that is loaded in parallel but it typically does not last more than five (5)
seconds. For the DS usage, this is purely a visual cue and should not be picked
up by screen readers.

Resources:

- [W3C Perceivable Pause, Stop, Hide](https://www.w3.org/TR/WCAG/#pause-stop-hide)
- [More Accessible Skeletons](https://adrianroselli.com/2020/11/more-accessible-skeletons.html)

## Card Placeholders in a Grid

<Canvas>
  <Story name="Placeholders in a Grid">
    <SimpleGrid columns={3}>
      <SkeletonLoader imageAspectRatio="landscape" isBordered />
      <SkeletonLoader imageAspectRatio="landscape" isBordered />
      <SkeletonLoader imageAspectRatio="landscape" isBordered />
      <SkeletonLoader imageAspectRatio="landscape" isBordered />
      <SkeletonLoader imageAspectRatio="landscape" isBordered />
      <SkeletonLoader imageAspectRatio="landscape" isBordered />
    </SimpleGrid>
  </Story>
</Canvas>

## Text Placeholders in a List

<Canvas>
  <Story name="Placeholders in a List">
    <SimpleGrid columns={1}>
      <SkeletonLoader layout="row" showImage={false} />
      <SkeletonLoader layout="row" showImage={false} />
      <SkeletonLoader layout="row" showImage={false} />
      <SkeletonLoader layout="row" showImage={false} />
      <SkeletonLoader layout="row" showImage={false} />
    </SimpleGrid>
  </Story>
</Canvas>
