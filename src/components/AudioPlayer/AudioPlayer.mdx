import {
  Meta,
  Canvas,
  Description,
  ArgTypes,
  Controls,
  Source,
} from "@storybook/blocks";

import * as AudioPlayerStories from "./AudioPlayer.stories";

<Meta of={AudioPlayerStories} />

# Audio Player

| Component Version | DS Version |
| ----------------- | ---------- |
| Added             | `1.2.0`    |
| Latest            | `1.5.0`    |

## Table of Contents

- [Overview](#overview)
- [Component Props](#component-props)
- [Accessibility](#accessibility)
- [Example Embed Code Snippets](#example-embed-code-snippets)
- [Errored](#errored)

## Overview

The `AudioPlayer` component is used to embed a streaming audio player from 3rd
party services such as `Libsyn`, `SoundCloud`, and `Spotify` on a page. The
component requires the `embedCode` prop or `filePath` prop. The component will
not function properly if you try to set both of them.

The current version of the `AudioPlayer` component does not support the playback
of locally hosted audio files. That functionality will be added in a future
version of the component.

## Component Props

<Canvas of={AudioPlayerStories.WithControls} />

<ArgTypes of={AudioPlayerStories.WithControls} />

## Accessibility

The `AudioPlayer` component renders an iframe element from `Libsyn`,
`SoundCloud`, or `Spotify`. The accessibility of the `iframe` element can be
improved if a `title` attribute is provided and most 3rd party audio services
will include a `title` attribute in the embed code they provide. If the `title`
attribute is omitted from the embed code, a default `title` will be added by the
`AudioPlayer` component, but it is recommended to include a custom `title` that
is related to the audio file content.

Because these audios are hosted on a third-party platform, we cannot guarantee
that the audio player will be accessible. Besides setting the `title` in the
embedded `iframe`, there are _some ways_ we can reduce accessibility issues.

- The player should not be set to auto-play when the page first loads.
- The text in the heading, description and helper text element should be
  relevant and related to the embedded audio player.
- The iframe title should describe in a few words the content of the embedded
  audio.
- Consider using the description or helper text to add a link to a full
  transcript of the audio file. Refer to the link below for additional
  information.

Resources:

- [W3C Making Audio and Video Media Accessible](https://www.w3.org/WAI/media/av/)
- [WebAIM Creating Accessible Frames and Iframes](https://webaim.org/techniques/frames/)
- [MDN iframe: The Inline Frame element](https://developer.mozilla.org/en-US/docs/Web/HTML/Element/iframe)
- [Deque University Be Sure to Provide Titles for Iframes](https://dequeuniversity.com/tips/provide-iframe-titles)

## Example Embed Code Snippets

The examples below are shown with precise HTML formatting. However, often the
embed code snippets provided by 3rd party services are delivered as one long
string.

### Libsyn

The following is an example iframe code for Libsyn that would go into the
embedCode prop.

<Source
  code={`
<iframe
  title="Libsyn Player"
  style="border: none"
  src="//html5-player.libsyn.com/embed/episode/id/18268511/height/90/theme/custom/thumbnail/yes/direction/backward/render-playlist/no/custom-color/87A93A/"
  height="90"
  width="100%"
  scrolling="no"
  allowfullscreen
  webkitallowfullscreen
  mozallowfullscreen
  oallowfullscreen
  msallowfullscreen
></iframe>
`}
  language="html"
/>

<Canvas of={AudioPlayerStories.LibsynExample} />

### SoundCloud

The following is an example iframe code for SoundCloud that would go into the
embedCode prop.

<Source
  code={`
<iframe
  width="100%"
  height="300"
  scrolling="no"
  frameborder="no"
  src="https://w.soundcloud.com/player/?url=https%3A//api.soundcloud.com/tracks/311382449&color=%23ff5500&auto_play=false&hide_related=false&show_comments=true&show_user=true&show_reposts=false&show_teaser=true&visual=true"
></iframe>
<div
  style="font-size: 10px; color: #cccccc;line-break: anywhere;word-break: normal;overflow: hidden;white-space: nowrap;text-overflow: ellipsis; font-family: Interstate,Lucida Grande,Lucida Sans Unicode,Lucida Sans,Garuda,Verdana,Tahoma,sans-serif;font-weight: 100;"
>
  <a
    href="https://soundcloud.com/nypl"
    title="New York Public Library"
    target="_blank"
    style="color: #cccccc; text-decoration: none;"
    >New York Public Library</a
  >
  Â·
  <a
    href="https://soundcloud.com/nypl/journalism-in-the-age-of-trump"
    title="Journalism in the Age of Trump"
    target="_blank"
    style="color: #cccccc; text-decoration: none;"
    >Journalism in the Age of Trump</a
  >
</div>
`}
  language="html"
/>

<Canvas of={AudioPlayerStories.SoundcloudExample} />

### Spotify

The following is an example iframe code for Spotify that would go into the
embedCode prop.

<Source
  code={`
<iframe
  style="border-radius:12px"
  src="https://open.spotify.com/embed/playlist/37i9dQZF1DX0uqkwkR49kK?utm_source=generator"
  width="100%"
  height="380"
  frameborder="0"
  allowfullscreen=""
  allow="clipboard-write; encrypted-media; fullscreen; picture-in-picture"
></iframe>
`}
  language="html"
/>

<Canvas of={AudioPlayerStories.SpotifyExample} />

## Errored

If the necessary props are not passed to the `AudioPlayer` component, the
component UI will display an error message.

<Canvas of={AudioPlayerStories.ErroredExample} />
