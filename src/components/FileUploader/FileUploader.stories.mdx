import {
  Meta,
  Story,
  Canvas,
  ArgsTable,
  Description,
} from "@storybook/addon-docs/blocks";
import { withDesign } from "storybook-addon-designs";

import FileUploader from "./FileUploader";
import { FileFormats, AllFileFormats } from "./FileUploaderFormats";
import SimpleGrid from "../Grid/SimpleGrid";
import { GridGaps } from "../Grid/GridTypes";
import Heading from "../Heading/Heading";
import { HeadingLevels } from "../Heading/HeadingTypes";
import { getCategory } from "../../utils/componentCategories";
import DSProvider from "../../theme/provider";

<Meta
  title={getCategory("FileUploader")}
  component={FileUploader}
  decorators={[withDesign]}
  parameters={{
    design: {
      type: "figma",
      url: "",
    },
    jest: ["FileUploader.test.tsx"],
  }}
  argTypes={{
    className: { table: { disable: true } },
    id: { table: { disable: true } },
    name: { table: { disable: true } },
    onChange: { table: { disable: true } },
  }}
/>

# FileUploader

| Component Version | DS Version |
| ----------------- | ---------- |
| Added             | `0.25.4`   |
| Latest            | `0.25.4`   |

<Description of={FileUploader} />

<Canvas withToolbar>
  <Story
    name="Basic with Props"
    args={{
      helperText: "Upload files here.",
      invalidText: "Oh no this is an error :(",
      isDisabled: false,
      isInvalid: false,
      isRequired: false,
      labelText: "FileUploader label",
      maxFileSize: 1,
      multiple: true,
      optReqFlag: false,
      showHelperInvalidText: true,
      showLabel: true,
    }}
  >
    {(args) => <FileUploader {...args} />}
  </Story>
</Canvas>

<ArgsTable story="Basic with Props" />

#### FileUploader Values

```tsx
// Typescript example:
export function FileUploaderExample() {
  const onChange = (files: DSFile[]) => {
    console.log("Called `onChange`.");
    for (const file of files) {
      console.log("File to upload:", file);
    }
  };
  const onDelete = (file: DSFile) => {
    console.log("Called `onDelete`.");
    console.log("File to delete:", file);
  };
  return (
    <FileUploader
      helperText="Upload files here."
      invalidText="Oh no this is an error :("
      labelText="FileUploader label"
      multiple={true}
      optReqFlag={false}
      onChange={onChange}
      onDelete={onDelete}
    />
  );
}
```

export function FileUploaderExample() {
  const onChange = (files) => {
    console.log("Called `onChange`.");
    for (const file of files) {
      console.log("File to upload:", file);
    }
  };
  const onDelete = (file) => {
    console.log("Called `onDelete`.");
    console.log("File to delete:", file);
  };
  return (
    <FileUploader
      helperText="Upload files here."
      invalidText="Oh no this is an error :("
      labelText="FileUploader label"
      multiple={true}
      optReqFlag={false}
      onChange={onChange}
      onDelete={onDelete}
    />
  );
}

<Canvas>
  <DSProvider>
    <FileUploaderExample />
  </DSProvider>
</Canvas>
