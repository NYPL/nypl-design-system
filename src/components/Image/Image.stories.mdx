import { VStack } from "@chakra-ui/react";
import {
  ArgsTable,
  Canvas,
  Description,
  Meta,
  Story,
} from "@storybook/addon-docs";
import { withDesign } from "storybook-addon-designs";

import Heading from "../Heading/Heading";
import { HeadingLevels } from "../Heading/HeadingTypes";
import Image from "./Image";
import { ImageRatios, ImageSizes, ImageTypes } from "./ImageTypes";
import SimpleGrid from "../Grid/SimpleGrid";
import { getCategory } from "../../utils/componentCategories";
import { getStorybookEnumValues } from "../../utils/utils";

export const ratiosEnumValues = getStorybookEnumValues(
  ImageRatios,
  "ImageRatios"
);
export const sizesEnumValues = getStorybookEnumValues(ImageSizes, "ImageSizes");
export const typesEnumValues = getStorybookEnumValues(ImageTypes, "ImageTypes");

export const imageBlockStyles = {
  margin: "auto",
  maxWidth: "360px",
  textAlign: "center",
  width: "100%",
};

<Meta
  title={getCategory("Image")}
  component={Image}
  decorators={[withDesign]}
  parameters={{
    design: {
      type: "figma",
      url: "https://www.figma.com/file/qShodlfNCJHb8n03IFyApM/Master?node-id=11896%3A45379",
    },
    jest: ["Image.test.tsx"],
  }}
  argTypes={{
    additionalFigureStyles: { control: false },
    additionalImageStyles: { control: false },
    additionalWrapperStyles: { control: false },
    alt: {
      control: false,
      description:
        "Alternate text description of the image. Needed for accessibility purposes.",
    },
    aspectRatio: {
      control: { type: "select" },
      table: { defaultValue: { summary: "ImageRatios.Original" } },
      options: ratiosEnumValues.options,
    },
    className: {
      control: false,
      description: "Additional class name for the component to use.",
    },
    component: { control: false },
    imageType: {
      control: { type: "select" },
      table: { defaultValue: { summary: "ImageTypes.Default" } },
      options: typesEnumValues.options,
    },
    size: {
      control: { type: "select" },
      table: { defaultValue: { summary: "ImageSizes.Default" } },
      options: sizesEnumValues.options,
    },
    src: {
      description:
        "The src attribute is required, and contains the path to the image you want to embed.",
    },
  }}
/>

# Image

| Component Version | DS Version |
| ----------------- | ---------- |
| Added             | `0.0.6`    |
| Latest            | `0.25.12`  |

<Description of={Image} />

<p>
  If you want a simple HTML `img` element then don't pass in values for the
  `aspectRatio` or `size` props.
</p>

<Canvas>
  <Story
    name="Image with Controls"
    args={{
      additionalFigureStyles: undefined,
      additionalImageStyles: undefined,
      additionalWrapperStyles: undefined,
      alt: "Alt text",
      aspectRatio: "ImageRatios.TwoByOne",
      caption: "Image caption",
      className: undefined,
      component: undefined,
      credit: "Image credit",
      imageType: "ImageTypes.Default",
      size: "ImageSizes.Medium",
      src: "https://placeimg.com/400/300/animals",
    }}
  >
    {(args) => (
      <Image
        {...args}
        aspectRatio={ratiosEnumValues.getValue(args.aspectRatio)}
        imageType={typesEnumValues.getValue(args.imageType)}
        size={sizesEnumValues.getValue(args.size)}
      />
    )}
  </Story>
</Canvas>

<ArgsTable story="Image with Controls" />

## Image Figure

By passing in `credit` or `caption`, the `Image` component will
render an HTML `figure` element and render an `img` element inside with the
proper props. If no `credit` or `caption` prop values are passed,
then an `img` element will be rendered with or without wrapper style divs.

<Canvas>
  <Story
    name="Figure and figcaption"
    args={{
      alt: "Alt text",
      aspectRatio: ImageRatios.ThreeByTwo,
      caption: "Image caption",
      credit: "Image credit",
      imageType: ImageTypes.Default,
      size: ImageSizes.Medium,
      src: "https://placeimg.com/400/300/animals",
    }}
    argTypes={{
      aspectRatio: { table: { disable: true } },
      caption: { table: { disable: true } },
      credit: { table: { disable: true } },
      imageType: { table: { disable: true } },
      size: { table: { disable: true } },
      src: { table: { disable: true } },
    }}
  >
    {(args) => <Image {...args} />}
  </Story>
</Canvas>

## Image Sizes

Use the `size` prop to set the desired size with the `ImageSizes` enum.

<Canvas>
  <Story name="Image Sizes">
    <SimpleGrid columns={1}>
      <div style={{ textAlign: "center" }}>
        <Heading
          id="ExtraExtraSmall"
          level={HeadingLevels.Four}
          text="ImageSizes.ExtraExtraSmall"
        />
        <Image
          alt="Alt text"
          caption="64px"
          size={ImageSizes.ExtraExtraSmall}
          src="https://placeimg.com/400/300/animals"
        />
      </div>
      <div style={{ textAlign: "center" }}>
        <Heading
          id="ExtraSmall"
          level={HeadingLevels.Four}
          text="ImageSizes.ExtraSmall"
        />
        <Image
          alt="Alt text"
          caption="96px"
          size={ImageSizes.ExtraSmall}
          src="https://placeimg.com/400/300/animals"
        />
      </div>
      <div style={{ textAlign: "center" }}>
        <Heading
          id="Small"
          level={HeadingLevels.Four}
          text="ImageSizes.Small"
        />
        <Image
          alt="Alt text"
          caption="165px"
          size={ImageSizes.Small}
          src="https://placeimg.com/400/300/animals"
        />
      </div>
      <div style={{ textAlign: "center" }}>
        <Heading
          id="Medium"
          level={HeadingLevels.Four}
          text="ImageSizes.Medium"
        />
        <Image
          alt="Alt text"
          caption="225px"
          size={ImageSizes.Medium}
          src="https://placeimg.com/400/300/animals"
        />
      </div>
      <div style={{ textAlign: "center" }}>
        <Heading
          id="Large"
          level={HeadingLevels.Four}
          text="ImageSizes.Large"
        />
        <Image
          alt="Alt text"
          caption="360px"
          size={ImageSizes.Large}
          src="https://placeimg.com/400/300/animals"
        />
      </div>
      <div style={{ textAlign: "center" }}>
        <Heading
          id="Default"
          level={HeadingLevels.Four}
          text="ImageSizes.Default"
        />
        <Image
          alt="Alt text"
          caption="100%"
          src="https://placeimg.com/400/300/animals"
        />
      </div>
    </SimpleGrid>
  </Story>
</Canvas>

## Image Aspect Ratios

Use the `aspectRatio` prop to set the desired aspect ratio. Note: the
following example has `size` set to `ImageSizes.Small`.

For a better viewing experience, the `Image` components below have been wrapped
in an element with a fixed width value.

<Canvas>
  <Story name="Image Aspect Ratios">
    <SimpleGrid columns={1}>
      <div style={imageBlockStyles}>
        <Heading
          id="fourbythree"
          level={HeadingLevels.Four}
          text="ImageRatios.FourByThree"
        />
        <Image
          alt="Alt text"
          aspectRatio={ImageRatios.FourByThree}
          src="https://placeimg.com/400/300/animals"
        />
      </div>
      <div style={imageBlockStyles}>
        <Heading
          id="onebytwo"
          level={HeadingLevels.Four}
          text="ImageRatios.OneByTwo"
        />
        <Image
          alt="Alt text"
          aspectRatio={ImageRatios.OneByTwo}
          src="https://placeimg.com/400/300/animals"
        />
      </div>
      <div style={imageBlockStyles}>
        <Heading
          id="original"
          level={HeadingLevels.Four}
          text="ImageRatios.Original"
        />
        <Image
          alt="Alt text"
          aspectRatio={ImageRatios.Original}
          src="https://placeimg.com/400/300/animals"
        />
      </div>
      <div style={imageBlockStyles}>
        <Heading
          id="sixteenbynine"
          level={HeadingLevels.Four}
          text="ImageRatios.SixteenByNine"
        />
        <Image
          alt="Alt text"
          aspectRatio={ImageRatios.SixteenByNine}
          src="https://placeimg.com/400/300/animals"
        />
      </div>
      <div style={imageBlockStyles}>
        <Heading
          id="square"
          level={HeadingLevels.Four}
          text="ImageRatios.Square"
        />
        <Image
          alt="Alt text"
          aspectRatio={ImageRatios.Square}
          src="https://placeimg.com/400/300/animals"
        />
      </div>
      <div style={imageBlockStyles}>
        <Heading
          id="threebyfour"
          level={HeadingLevels.Four}
          text="ImageRatios.ThreeByFour"
        />
        <Image
          alt="Alt text"
          aspectRatio={ImageRatios.ThreeByFour}
          src="https://placeimg.com/400/300/animals"
        />
      </div>
      <div style={imageBlockStyles}>
        <Heading
          id="threebytwo"
          level={HeadingLevels.Four}
          text="ImageRatios.ThreeByTwo"
        />
        <Image
          alt="Alt text"
          aspectRatio={ImageRatios.ThreeByTwo}
          src="https://placeimg.com/400/300/animals"
        />
      </div>
      <div style={imageBlockStyles}>
        <Heading
          id="twobyone"
          level={HeadingLevels.Four}
          text="ImageRatios.TwoByOne"
        />
        <Image
          alt="Alt text"
          aspectRatio={ImageRatios.TwoByOne}
          src="https://placeimg.com/400/300/animals"
        />
      </div>
    </SimpleGrid>
  </Story>
</Canvas>

## Image Types

Use the `imageType` prop to get an image variant. Note that to get a perfect
circle, the `aspectRatio` prop _must_ be set to `ImageRatios.Square`.

For a better viewing experience, the `Image` components below have been wrapped
in an element with a fixed width value.

<Canvas>
  <Story name="Image Types">
    <SimpleGrid columns={1}>
      <div style={imageBlockStyles}>
        <Heading
          id="default"
          level={HeadingLevels.Four}
          text="ImageTypes.Default"
        />
        <Image
          alt="Alt text"
          aspectRatio={ImageRatios.Square}
          imageType={ImageTypes.Default}
          src="https://placeimg.com/400/400/animals"
        />
      </div>
      <div style={imageBlockStyles}>
        <Heading
          id="circle"
          level={HeadingLevels.Four}
          text="ImageTypes.Circle"
        />
        <Image
          alt="Alt text"
          aspectRatio={ImageRatios.Square}
          imageType={ImageTypes.Circle}
          src="https://placeimg.com/400/400/animals"
        />
      </div>
    </SimpleGrid>
  </Story>
</Canvas>
