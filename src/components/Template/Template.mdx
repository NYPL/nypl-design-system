import { ArgTypes, Canvas, Description, Meta, Source } from "@storybook/blocks";
import ComponentChangelogTable from "../../utils/ComponentChangelogTable";
import { changelogData } from "./templateChangelogData";

import Link from "../Link/Link";
import Table from "../Table/Table";
import * as TemplateStories from "./Template.stories";
import {
  Template,
  TemplateAboveHeader,
  TemplateAppContainer,
  TemplateBreakout,
  TemplateContent,
  TemplateContentBottom,
  TemplateContentPrimary,
  TemplateContentSidebar,
  TemplateContentTop,
  TemplateFooter,
  TemplateHeader,
} from "./Template";

<Meta of={TemplateStories} />

# Template

| Component Version | DS Version   |
| ----------------- | ------------ |
| Added             | `0.3.6`      |
| Latest            | `Prerelease` |

## Table of Contents

- {<Link href="#templateappcontainer-overview" target="_self">TemplateAppContainer Overview</Link>}
- {<Link href="#templateappcontainer-component-props" target="_self">TemplateAppContainer Component Props</Link>}
- {<Link href="#templateappcontainer-accessibility" target="_self">TemplateAppContainer Accessibility</Link>}
- {<Link href="#template-children-overview" target="_self">Template Children Overview</Link>}
- {<Link href="#template-children-component-props" target="_self">Template Children Component Props</Link>}
- {<Link href="#full-example-with-template-children-components" target="_self">Full Example with Template Children Components</Link>}
- {<Link href="#responsive-grid" target="_self">Responsive Grid</Link>}
- {<Link href="#changelog" target="_self">Changelog</Link>}

## TemplateAppContainer Overview

<Description of={TemplateAppContainer} />

If you have a custom `Header` component that _already_ renders an HTML `<header>`
element, set `renderHeaderElement` to false so only one `<header>` element is
rendered.

If you need to render the `SkipNavigation` component, set `renderSkipNavigation`
to true.

Likewise, if you have a custom `Footer` component that _already_ renders an HTML
`<footer>` element, set `renderFooterElement` to false so only one `<footer>`
element is rendered.

**This is the recommended way to render an app page template.**

<Source
  code={`
import { TemplateAppContainer } from "@nypl/design-system-react-components";
// ...
<TemplateAppContainer
  aboveHeader={<Placeholder variant="short">Above Header</Placeholder>}
  header={<Placeholder variant="short">Header</Placeholder>}
  breakout={
    <>
      <Placeholder variant="short">Breadcrumbs</Placeholder>
      <Placeholder>Hero</Placeholder>
    </>
  }
  sidebar="left"
  contentTop={<Placeholder variant="short">Content Top</Placeholder>}
  contentSidebar={<Placeholder>Left Sidebar</Placeholder>}
  contentPrimary={
    <>
      <Placeholder>primary content</Placeholder>
      <Placeholder variant="short">More Content</Placeholder>
    </>
  }
  contentBottom={<Placeholder variant="short">Content Bottom</Placeholder>}
  footer={<Placeholder>Footer</Placeholder>}
  renderSkipNavigation={true}
/>
`}
  language="jsx"
/>

## TemplateAppContainer Component Props

<Canvas of={TemplateStories.WithControls} />

<ArgTypes of={TemplateStories.WithControls} />

## TemplateAppContainer Accessibility

**The `TemplateAppContainer` component is the recommended way to render the entire
application.** Therefore, this accessibility section is specifically for the
`TemplateAppContainer` but the same rules apply to the individual "Template"
components.

The `TemplateAppContainer` component renders the header as a `<header>` element,
the content as a `<main>` element, and the footer as a `<footer>` element.

If you need to render an alert or notification at the top of the page with an
`aside` HTML element or HTML element with the `role="complementary"` attribute,
then pass that alert or notification component to the `aboveHeader` prop. These
elements should _not_ be rendered in the `header` HTML section since that's an
accessibility violation.

The `TemplateAppContainer` component renders a full DOM and one of the children
is the `main` HTML element with a default "id" of `"mainContent"`. This should
be used as the anchor element that the skip navigation link points to. If your
application is using the current Header, it already contains the skip
navigation feature but make sure it is pointing to the correct anchor element.

If you are using a custom header component or you need to use the Reservoir
Design System (DS) `SkipNavigation` component, then set the `renderSkipNavigation`
prop to true. This will render the `SkipNavigation` component at the top of the
page before any other elements. The main link will point to the `#mainContent`
`main` element.

Resources

- [W3C Aria Landmarks Example](https://www.w3.org/TR/wai-aria-practices/examples/landmarks/complementary.html)
- [Digital A11y Role=Complementary](https://www.digitala11y.com/complementary-role/)
- [WebAim Skip Navigation Link](https://webaim.org/techniques/skipnav/)
- [A11ymatters Skip Navigation Link](https://www.a11ymatters.com/pattern/skip-link/)

## Template Children Overview

The Reservoir Design System (DS) also provides a set of "template" components
that work together to render a consistent mobile and desktop layout. More
information on individual components and how they should be composed can be
found below. Even though these component are available for use, we recommend
using the `TemplateAppContainer` component and passing down children component
as props as needed.

Note: If you need to render the `SkipNavigation` component, you need to explicitly
render it immediately before the `Template` component. This is done
automatically in the `TemplateAppContainer` component.

Note: All components that go above the primary content `TemplateContent` component
should be wrapped in a `<div>` element or a `<Box>` component.

Basic "template" components structure:

<Source
  code={`
import {
  Template,
  TemplateAboveHeader,
  TemplateBreakout,
  TemplateContent,
  TemplateContentBottom,
  TemplateContentPrimary,
  TemplateContentSidebar,
  TemplateContentTop,
  TemplateFooter,
  TemplateHeader,
} from "@nypl/design-system-react-components";
// ...
<>
  <SkipNavigation />
  <Template>
    <TemplateBreakout>
      <TemplateAboveHeader>
        // ...
      </TemplateAboveHeader>
      <TemplateHeader>
        // ...
      </TemplateHeader>
    </TemplateBreakout>
    <TemplateContent sidebar="...">
      <TemplateContentTop>
        // ...
      </TemplateContentTop>
      <TemplateContentPrimary>
        // ...
      </TemplateContentPrimary>
      <TemplateContentBottom>
        // ...
      </TemplateContentBottom>
    </TemplateContent>
    <TemplateFooter>
      // ...
    </TemplateFooter>
  </Template>
</>
`}
  language="jsx"
/>

## Template Children Component Props

<Canvas of={TemplateStories.ChildrenComponentProps} />

<ArgTypes of={TemplateStories.ChildrenComponentProps} />

### Template Components

The components consist of, listed in DOM structure order:

- `Template`
- `TemplateAboveHeader`
- `TemplateHeader`
- `TemplateBreakout`
- `TemplateContent`
- `TemplateContentTop`
- `TemplateContentPrimary`
- `TemplateContentSidebar`
- `TemplateContentBottom`
- `TemplateFooter`

#### Template

<Source
  code={`
<Template>
  // ...
</Template>
`}
  language="jsx"
/>

<Description of={Template} />

#### TemplateBreakout

<Source
  code={`
<Template>
  <TemplateBreakout>
    // ...
  </TemplateBreakout>
</Template>
`}
  language="jsx"
/>

<Description of={TemplateBreakout} />

#### TemplateAboveHeader

<Source
  code={`
<Template>
  <TemplateBreakout>
    <TemplateAboveHeader>
      // ...
    </TemplateAboveHeader>
  </TemplateBreakout>
</Template>
`}
  language="jsx"
/>

<Description of={TemplateAboveHeader} />

#### TemplateHeader

<Source
  code={`
<Template>
  <TemplateBreakout>
    <TemplateAboveHeader>
      // ...
    </TemplateAboveHeader>
    <TemplateHeader>
      // ...
    </TemplateHeader>
  </TemplateBreakout>
</Template>
`}
  language="jsx"
/>

<Description of={TemplateHeader} />

#### TemplateContent

<Source
  code={`
<Template>
  <TemplateBreakout>
    <TemplateHeader>
      // ...
    </TemplateHeader>
  </TemplateBreakout>
  <TemplateContent id="mainContent">
    // ...
  </TemplateContent>
</Template>
`}
  language="jsx"
/>

<Description of={TemplateContent} />

#### TemplateContentTop

<Source
  code={`
<Template>
  <TemplateBreakout>
    <TemplateAboveHeader>
      // ...
    </TemplateAboveHeader>
    <TemplateHeader>
      // ...
    </TemplateHeader>
  </TemplateBreakout>
  <TemplateContent>
    <TemplateContentTop>
      // ...
    </TemplateContentTop>
  </TemplateContent>
</Template>
`}
  language="jsx"
/>

<Description of={TemplateContentTop} />

#### TemplateContentPrimary

<Source
  code={`
<Template>
  <TemplateBreakout>
    <TemplateAboveHeader>
      // ...
    </TemplateAboveHeader>
    <TemplateHeader>
      // ...
    </TemplateHeader>
  </TemplateBreakout>
  <TemplateContent>
    <TemplateContentPrimary>
      // ...
    </TemplateContentPrimary>
  </TemplateContent>
<Template>
`}
  language="jsx"
/>

<Description of={TemplateContentPrimary} />

#### TemplateContentSidebar

<Source
  code={`
<Template>
  <TemplateBreakout>
    <TemplateAboveHeader>
      // ...
    </TemplateAboveHeader>
    <TemplateHeader>
      // ...
    </TemplateHeader>
  <TemplateBreakout>
  <TemplateContent sidebar="right">
    <TemplateContentPrimary>
      // ...
    </TemplateContentPrimary>
    <TemplateContentSidebar>
      // RIGHT SIDEBAR
    </TemplateContentSidebar>
  </TemplateContent>
</Template>

<Template>
  <TemplateBreakout>
    <TemplateAboveHeader>
      // ...
    </TemplateAboveHeader>
    <TemplateHeader>
      // ...
    </TemplateHeader>
  </TemplateBreakout>
  <TemplateContent sidebar="left">
    <TemplateContentSidebar>
      // LEFT SIDEBAR
    </TemplateContentSidebar>
    <TemplateContentPrimary>
      // ...
    </TemplateContentPrimary>
  </TemplateContent>
<Template>
`} language="jsx" />

<Description of={TemplateContentSidebar} />

#### TemplateContentBottom

<Source
  code={`
<Template>
  <TemplateBreakout>
    <TemplateAboveHeader>
      // ...
    </TemplateAboveHeader>
    <TemplateHeader>
      // ...
    </TemplateHeader>
  </TemplateBreakout>
  <TemplateContent>
    <TemplateContentTop>
      // ...
    </TemplateContentTop>
    <TemplateContentPrimary>
      // ...
    </TemplateContentPrimary>
    <TemplateContentBottom>
      // ...
    </TemplateContentBottom>
  </TemplateContent>
</Template>
`}
  language="jsx"
/>

<Description of={TemplateContentBottom} />

#### TemplateFooter

<Source
  code={`
<Template>
  <TemplateBreakout>
    <TemplateAboveHeader>
      // ...
    </TemplateAboveHeader>
    <TemplateHeader>
      // ...
    </TemplateHeader>
  </TemplateBreakout>
  <TemplateContent sidebar="right">
    //...
  </TemplateContent>
  <TemplateFooter>
    // ...
  </TemplateFooter>
</Template>
`}
  language="jsx"
/>

<Description of={TemplateFooter} />

### Template Children Components Sidebar Configuration

In order to render a sidebar, two steps must be taken.

1. The `TemplateContent` component needs to be aware of it. Pass the location
   of the sidebar to the `sidebar` prop as either "left" or "right".

<Source
  code={`
<TemplateContent sidebar="left">
`}
  language="jsx"
/>

2. Render `TemplateContentSidebar` and `TemplateContentPrimary` next to each
   other in the appropriate order. If the sidebar must show left, then
   `TemplateContentSidebar` comes before `TemplateContentPrimary`. Otherwise,
   `TemplateContentPrimary` must come before `TemplateContentSidebar`.

<Source
  code={`
// Render left sidebar
<TemplateContent sidebar="left">
  <TemplateContentSidebar>
    // ...
  </TemplateContentSidebar>
  <TemplateContentPrimary>
    // ...
  </TemplateContentPrimary>
</TemplateContent>
// Render right sidebar
<TemplateContent sidebar="right">
  <TemplateContentPrimary>// ...</TemplateContentPrimary>
  <TemplateContentSidebar>// ...</TemplateContentSidebar>
</TemplateContent>
`}
  language="jsx"
/>

## Full Example with Template Children Components

export const otherSubHeaderText =
  "With 92 locations across the Bronx, Manhattan, and Staten Island, The New York Public Library is an essential part of neighborhoods across the city. Visit us today.";

This is best viewed in the Storybook "Canvas" and not "Docs" section.

<Canvas of={TemplateStories.FullExampleWithTemplateChildrenComponents} />

## Responsive Grid

By default, the content area of the `Template` component (`TemplateContent`)
&ndash; which houses `TemplateContentTop`, `TemplateContentPrimary`,
`TemplateContentSidebar`, and `TemplateContentBottom` &ndash; will employ a
responsive 12-column grid system. However, with the `useLegacyGrid` prop, the
component can be configured to use the legacy layout. For details about using
the legacy layout in the content area, please refer to the `Legacy Layout` docs
below.

### Responsive Grid System

The responsive 12-column grid layout allows the column widths for the sidebar
and primary content to adjust depending on the current breakpoint. Additionally,
the column spacing will also adjust based on the current breakpoint. The values
returned match the `Gutters` column in the table above. For this configuration,
the top content and bottom content areas that sit above and below the primary
content area and sidebar are styled to span the full width of the content area
regardless of the breakpoint.

For more detailed documentation about Reservoir's responsive grid system, please
refer to the [Responsive Grid Style
Guide](/?path=/docs/style-guide-responsive-grid--docs).

<Table
  border="0"
  columnHeaders={[
    "Breakpoint",
    "Range (px)",
    "Sidebar Width",
    "Primary Content Width *",
    "Gutters",
    "Margins",
  ]}
  tableData={[
    ["Small mobile", "0 - 479", "full", "full", "1rem (16px)", "1rem (16px)"],
    ["Large mobile", "480 - 767", "1/2", "1/2", "1rem (16px)", "1rem (16px)"],
    [
      "Small tablet",
      "768 - 1023",
      "1/3",
      "2/3",
      "1.5rem (24px)",
      "1.5rem (24px)",
    ],
    [
      "Large Tablet",
      "1024 - 1279",
      "1/4",
      "3/4",
      "1.5rem (24px)",
      "1.5rem (24px)",
    ],
    ["Desktop", "1280+", "1/4", "3/4", "2rem (32px)", "1rem (16px)"],
  ]}
  useRowHeaders
  className="ds-table-storybook"
/>

\* The Primary Content Width values are only applicable if the sidebar is
enabled. Otherwise, the width of the primary content area will be set to 100%.

#### Responsive Spacing in Consuming Apps

When using the responsive 12-column grid configuration, consuming apps should
utilize the `responsiveGutters` data object to keep their custom grids in
alignment with the spacing of the `Template` component. The values returned in
the object match the `Gutters` column in the table above.

<Source
  code={`
// Import the data object 
import { responsiveGutters } from "@nypl/design-system-react-components";

// Use the spacing values
<SimpleGrid spacing={responsiveGutters}>
  <Item />
  <Item />
  <Item />
</SimpleGrid>
`} language="jsx" />

### Legacy Layout

The legacy layout is not truly a grid system. The sidebar is set with a fixed
255px width and the primary content area expands and contracts to fill the
remaining space.

Like the responsive 12-column grid layout, the top content and bottom content
areas are styled to span the full width of the content area regardless of the
breakpoint.

#### Configuring Legacy Layout in Consuming Apps

To implement the legacy layout when using `TemplateAppContainer` to implement
the `Template` component, the `useLegacyGrid` prop should be passed as `true` to
`TemplateAppContainer`.

When using the individual template components (i.e. `Template` and the
associated children components), the `useLegacyGrid` prop needs to be passed as
`true` to each of the following components:

- `Template`
- `TemplateContent`
- `TemplateContentTop`
- `TemplateContentPrimary`
- `TemplateContentSidebar`
- `TemplateContentBottom`

## Changelog

<ComponentChangelogTable changelogData={changelogData} />
