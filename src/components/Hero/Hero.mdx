import { ArgTypes, Canvas, Description, Meta, Source } from "@storybook/blocks";

import ComponentChangelogTable from "../../utils/ComponentChangelogTable";
import * as HeroStories from "./Hero.stories";
import { changelogData } from "./heroChangelogData";
import Link from "../Link/Link";

<Meta of={HeroStories} />

# Hero

| Component Version | DS Version |
| ----------------- | ---------- |
| Added             | `0.2.0`    |
| Latest            | `3.0.0`    |

## Table of Contents

- {<Link href="#overview" target="_self">Overview</Link>}
- {<Link href="#component-props" target="_self">Component Props</Link>}
- {<Link href="#accessibility" target="_self">Accessibility</Link>}
- {<Link href="#active-variants" target="_self">Active Variants</Link>}
- {<Link href="#deprecated-variants" target="_self">Deprecated Variants</Link>}
- {<Link href="#color-variations-for-secondary-hero" target="_self">Color Variations for Secondary Hero</Link>}
- {<Link href="#changelog" target="_self">Changelog</Link>}

## Overview

<Description of={HeroStories} />

The `Hero` component is used to display a full width banner at the top of a page.
The `Hero` will contain a required `h1` page title and may also include optional
descriptive text and images.

There are currently three main hero types: `"primary"`, `"tertiary"`, and
`"campaign"`.

Two hero types have been deprecated: `"secondary"` and `"fiftyFifty"`. The
deprecated variants will be removed from the DS in a future release.

Under the `"secondary"` hero type, there are four additional subtypes:
`"secondaryBooksAndMore"`, `"secondaryLocations"`, `"secondaryResearch"`, and
`"secondaryWhatsOn"`.

For the variations that use image "alt" and "src" attributes, the `imageProps`
prop should be used:

<Source
  code={`
<Hero
  backgroundImageSrc="https://placekitten.com/g/2400/800"
  heroType="campaign"
  heading={<Heading level="h1" id="campaign-hero" text="Hero Campaign" />}
  imageProps={{
    alt: "Image example",
    src: "https://placekitten.com/800/400",
  }}
  subHeaderText="Campaign Hero Subheader Text"
/>
`}
  language="jsx"
/>

Note: the `imageProps` prop is not the same as the `backgroundImageSrc` prop
used for some variations. For a full list of what props to use for each variant,
check the <Link href="#active-variants" target="_self">Active Variants</Link>
section.

## Component Props

<Canvas of={HeroStories.WithControls} />

<ArgTypes of={HeroStories.WithControls} />

## Accessibility

The `Hero` component is commonly used as a banner below the page's header and
breadcrumbs and above the main content. This means that if the `Hero` displays
a heading element, it should be the first on the page and an `h1` element set
through `Heading`'s `level="h1"`.

## Active Variants

Each `Hero` variation can be rendered through the `heroType` prop.

### Primary

The `"primary"` hero type can be used with the `backgroundColor`, `backgroundImageSrc`,
`foregroundColor`, `heading`, `locationDetails`, and `subHeaderText` props. The
minimum props that should be used are `backgroundImageSrc` and `heading`.

<Source
  code={`
backgroundImageSrc="https://placekitten.com/1600/800"
heading={<Heading level="h1" id="primary-hero" text="Hero Primary" />}
`}
  language="jsx"
/>

<Canvas of={HeroStories.Primary} />

### Tertiary

The `"tertiary"` hero type can be used with the `backgroundColor`, `foregroundColor`,
`heading`, and `subHeaderText` props. The minimum prop to use is the `heading`
prop.

<Source
  code={`
heading={
  <Heading
    level="h1"
    id="tertiary-hero"
    text="Hero Tertiary with Sub-Header"
  />
}
subHeaderText={otherSubHeaderText}
`}
  language="jsx"
/>

<Canvas of={HeroStories.Tertiary} />

### Campaign

The `"campaign"` hero type can be used with the `backdropBackgroundColor`,
`backgroundColor`, `backgroundImageSrc`, `foregroundColor`, `heading`,
`imageProps`, and `subHeaderText` props. The minimum props to use are
`backgroundImageSrc`, `heading`, and `imageProps`.

This variant has the special use case of having a background and foreground. We
do understand that the naming can be confusing, but it helps to think of this
variant having two layers. The bottom is the backdrop and the top is the
foreground.

To modify the foreground, the `backgroundColor`, `foregroundColor`, `imageProps`
props should be used.

<Source
  code={`
backgroundImageSrc="https://placekitten.com/g/2400/800"
heading={
  <Heading level="h1" id="campaign-hero" text="Hero Campaign" />
}
imageProps={imageProps}
subHeaderText={otherSubHeaderText}
`}
  language="jsx"
/>

<Canvas of={HeroStories.Campaign} />

#### isDarkBackgroundImage

The `isDarkBackgroundImage` prop can be used in the `"campaign"` hero to toggle
the visual treatment of the background image. If true, the background image will
be converted to black & white and darkened to 60% black.

<Source
  code={`
backgroundImageSrc="https://placekitten.com/g/2400/800"
heading={
  <Heading level="h1" id="campaign-hero" text="Hero Campaign" />
}
imageProps={imageProps}
isDarkBackgroundImage
subHeaderText={otherSubHeaderText}
`}
  language="jsx"
/>

<Canvas of={HeroStories.CampaignDarkBackgroundImage} />

#### backdropBackgroundColor

The "backdrop" is what we call the background and that can be set through either
the `backdropBackgroundColor` or `backgroundImageSrc` props. When both are set,
the `backgroundImageSrc` will take precedence.

<Source
  code={`
backdropBackgroundColor="section.education.primary"
backgroundColor="ui.warning.primary"
foregroundColor="ui.typgraphy.heading"
heading={
  <Heading 
    color="ui.typgraphy.heading" 
    level="h1" 
    id="campaign-hero" 
    text="Hero Campaign" 
  />
}
imageProps={imageProps}
subHeaderText={otherSubHeaderText}
`}
  language="jsx"
/>

<Canvas of={HeroStories.CampaignBackgroundColors} />

## Fallback Campaign Image

<Source
  code={`
const FallBackExample = () => {
  // Or get image src from external service.
  const [imageSrc, setImageSrc] = useState("foobar.jpg");
  const fallbackImageSrc = "https://loremflickr.com/cache/resized/65535_51121136167_40f20af042_z_300_300_nofilter.jpg";
  // For some reason IIIF image as fallback does not work...
  // Perhaps the better approach is to store the image locally in the app.
  // This cannot be easily tested in Storybook.
  // const fallbackImageSrc = "https://iiif.nypl.org/iiif/2/105224/full/!900,900/0/default.jpg";

  return (
    <Hero
      backgroundImageSrc={imageSrc}
      heroType="campaign"
      heading={
        <Heading
          level="h1"
          id="campaign-hero-default-heading"
          text="Hero Campaign"
        />
      }
      imageProps={{
        alt: "Custom NYPL",
        src: imageSrc,
        fallbackSrc: fallbackImageSrc,
        onError: (_event) => {
          setImageSrc(fallbackImageSrc);
        }
      }}
      subHeaderText={otherSubHeaderText}
    />
  );
};
`}
  language="jsx"
/>

<Canvas of={HeroStories.FallbackCampaignImage} />

## Deprecated Variants

### Secondary

This `"secondary"` variant of the `Hero` component has been deprecated. This
variant will be removed from the DS in a future release.

The `"secondary"` hero type can be used with the `heading`, `imageProps`, and
`subHeaderText` props.

<Source
  code={`
heading={
  <Heading level="h1" id="secondary-hero" text="Hero Secondary" />
}
imageProps={imageProps}
subHeaderText={secondarySubHeaderText}
`}
  language="jsx"
/>

<Canvas of={HeroStories.Secondary} />

### FiftyFifty

This `"fiftyFifty"` variant of the `Hero` component has been deprecated. This
variant will be removed from the DS in a future release.

The `"fiftyFifty"` hero type can be used with the `backgroundColor`,
`foregroundColor`, `heading`, `imageProps`, and `subHeaderText` props. The
minimum props to use are `imageProps` and `subHeaderText`.

<Source
  code={`
imageProps={imageProps}
subHeaderText={otherSubHeaderText}
`}
  language="jsx"
/>

<Canvas of={HeroStories.FiftyFifty} />

## Color Variations for Secondary Hero

This `"secondary"` variant of the `Hero` component has been deprecated. This
variant and the associated color variations will be removed from the DS in a
future release.

The background color for the title bar in the `"secondary"` `Hero` changes based
on the `heroType` variants for the `"secondary"` main variant. There are four
subtypes: `"secondaryBooksAndMore"`, `"secondaryLocations"`, `"secondaryResearch"`,
and `"secondaryWhatsOn"`.

<Source
  code={`
// Example \`heroType\` "secondary" variant.
<Hero heroType="secondaryBooksAndMore" {...props} />
`}
  language="jsx"
/>

<Canvas of={HeroStories.ColorVariations} />

## Changelog

<ComponentChangelogTable changelogData={changelogData} />
