// CSS-only select styling (from https://github.com/filamentgroup/select-css)
.select {
    @include space-stack-xs;

    -moz-appearance: none;
    -webkit-appearance: none;
    appearance: none;
    background-color: #fff;
    border-radius: 2px;
    border: 1px solid $gray-light;
    display: block;
    font-size: 1rem;
    padding: $space-xs $space-xl $space-xs $space-s;
    width: 100%;

    /* Arrow svg */
    /* More info here: https://css-tricks.com/probably-dont-base64-svg/ */
    background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='currentColor' viewBox='0 0 24 24'%3E%3Cpath d='M10.526 12.871L.263 1.676 1.737.324 12 11.52 22.263.324l1.474 1.352L13.474 12.87a2 2 0 01-2.948 0z'/%3E%3C/svg%3E");
    background-repeat: no-repeat;
    background-position: right 0.7em top 70%;
    background-size: $space auto;

    /* Hide arrow icon in IE browsers */
    &::-ms-expand {
        display: none;
    }

    &:hover {
        border-color: #888;
    }

    &:focus {
        box-shadow: 0;
        outline: 1px solid $ui-link-primary;
    }

    &:disabled {
        background-color: $gray-xxlight;
        color: $gray-xdark;
    }

    &--error {
        border: 1px solid $ui-error;
    }
}

/* Support for rtl text, explicit support for Arabic and Hebrew */
*[dir="rtl"] .select,
:root:lang(ar) .select,
:root:lang(iw) .select {
    background-position: left 0.7em top 70%;
    padding: $space-xs $space-l $space-xs $space-s;
}

/* Disabled styles */
.select-css:disabled,
.select-css[aria-disabled="true"] {
    color: $gray-xdark;
    background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'%3E%3Cpath d='M10.526 12.871L.263 1.676 1.737.324 12 11.52 22.263.324l1.474 1.352L13.474 12.87a2 2 0 01-2.948 0z'/%3E%3C/svg%3E");
}

.select-css:disabled:hover,
.select-css[aria-disabled="true"] {
    border-color: #aaa;
}

@mixin form-item {
    // Wrapper for the <select> and its icon
    &__dropdown {
        align-items: center;
        border-radius: 2px;
        border: 1px solid $gray-light;

        // Allows us to place the icon and let users get to the select underneath
        position: relative;
        z-index: 1;

        &:hover {
            border-color: $black;
        }

        @supports (-webkit-appearance: none) or (appearance: none) or
            ((-moz-appearance: none) and (mask-type: alpha)) {
            &::after {
                // Display custom arrow
                display: block;
            }
        }

        .icon {
            @include icon;

            position: absolute;
            right: $space-xs;
            top: 32%;
            z-index: -1;
        }
    }
}

.form-item {
    @include form-item;
}
