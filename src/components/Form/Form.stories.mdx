import {
  Meta,
  Story,
  Canvas,
  ArgsTable,
  Preview,
  Description,
} from "@storybook/addon-docs/blocks";
import { withDesign } from "storybook-addon-designs";
import { getCategory } from "../../utils/componentCategories";

import Form, { FormRow, FormField } from "./Form";
import { FormSpacing } from "./FormTypes";
import TextInput from "../TextInput/TextInput";
import Radio from "../Radio/Radio";
import Checkbox from "../Checkbox/Checkbox";
import Label from "../Label/Label";
import Button from "../Button/Button";
import Select from "../Select/Select";
import Heading from "../Heading/Heading";
import { HeadingLevels } from "../Heading/HeadingTypes";
import HorizontalRule from "../HorizontalRule/HorizontalRule";
import { action } from "@storybook/addon-actions";

<Meta
  title={getCategory("Form")}
  component={Form}
  decorators={[withDesign]}
  parameters={{
    design: {
      type: "figma",
      url:
        "https://www.figma.com/file/qShodlfNCJHb8n03IFyApM/Master?node-id=11895%3A547",
    },
    jest: ["Form.test.tsx"],
  }}
/>

# Form

| Component Version | DS Version |
| ----------------- | ---------- |
| Added             | `0.23.2`   |
| Latest            | `0.24.0`   |

<Description of={Form} />

The `Form` component renders a standard `<form>` element and should be used to handle layout and spacing for child input fields. `FormRow` and `FormField` components should be used to build the `<form>` struture and to arrange input fields as needed.

`FormField` should be used as a parent for all input components from the DS (`Button`, `Select`, `TextInput`, etc.).

`FormRow` should be used as a parent of multiple `FormField` components when you need to render multiple input components in a horizontal row.

<Preview withToolbar>
  <Story
    name="Form"
    args={{
      action: "/end/point",
      id: "custom-form-id",
      method: "get",
    }}
    argTypes={{
      method: {
        control: {
          type: "radio",
          options: ["get", "post"],
        },
      },
    }}
  >
    {(args) => (
      <Form {...args}>
        <FormField>
          <TextInput
            labelText="Username"
            helperText="Make sure to complete this field."
            required
          />
        </FormField>
        <FormField>
          <TextInput
            labelText="Password"
            helperText="Make sure to complete this field."
            required
          />
        </FormField>
        <FormRow>
          <FormField>
            <TextInput
              labelText="Phone Field"
              helperText="This one is up to you."
              type="tel"
            />
          </FormField>
          <FormField>
            <TextInput
              labelText="URL Field"
              helperText="This one is up to you."
              type="url"
            />
          </FormField>
          <FormField>
            <TextInput
              labelText="Age"
              helperText="This one is up to you."
              type="number"
            />
          </FormField>
        </FormRow>
        <FormRow>
          <FormField>
            <Label>Checkbox Group</Label>
            <Checkbox labelText="Checkbox 1" showLabel />
            <br />
            <Checkbox labelText="Checkbox 1" showLabel />
            <br />
            <Checkbox labelText="Checkbox 1" showLabel />
            <br />
            <Checkbox labelText="Checkbox 1" showLabel />
          </FormField>
          <FormField>
            <Label>Radio Group</Label>
            <Radio labelText="Radio 1" showLabel />
            <br />
            <Radio labelText="Radio 2" showLabel />
            <br />
            <Radio labelText="Radio 3" showLabel />
            <br />
            <Radio labelText="Radio 4" showLabel />
          </FormField>
          <FormField>
            <Select
              labelText="Select Field"
              showLabel={true}
              helperText="The select field helper text."
            >
              <option>Option 1</option>
              <option>Option 2</option>
              <option>Option 3</option>
            </Select>
          </FormField>
        </FormRow>
        <FormField>
          <Button>Submit</Button>
        </FormField>
      </Form>
    )}
  </Story>
</Preview>

<ArgsTable story="Form" />

## Spacing Variants

export const formRow = (size) => {
  const labelText = `Size: ${size}`;
  return (
    <li>
      <Heading level={HeadingLevels.Three}>{labelText}</Heading>
      <Form spacing={size}>
        <FormRow>
          <FormField>
            <Select
              labelText="Select Field"
              showLabel={true}
              helperText="The select field helper text."
            >
              <option>Option 1</option>
              <option>Option 2</option>
              <option>Option 3</option>
            </Select>
          </FormField>
          <FormField>
            <Select
              labelText="Select Field"
              showLabel={true}
              helperText="The select field helper text."
            >
              <option>Option 1</option>
              <option>Option 2</option>
              <option>Option 3</option>
            </Select>
          </FormField>
          <FormField>
            <Select
              labelText="Select Field"
              showLabel={true}
              helperText="The select field helper text."
            >
              <option>Option 1</option>
              <option>Option 2</option>
              <option>Option 3</option>
            </Select>
          </FormField>
        </FormRow>
      </Form>
      <HorizontalRule />
    </li>
  );
};
export const sizes = [];
for (const formSpacing in FormSpacing) {
  sizes.push(formRow(FormSpacing[formSpacing]));
}
export const getForms = (list) => <ul style={{ listStyle: "none" }}>{list}</ul>;

By default, the `Form` component will handle the NYPL spacing around form input elements. The default spacing value is `large`, which corresponds to the CSS variable `--space-l` (2rem / 32px).

**IMPORTANT:** The default spacing should not be overwritten without a very good reason.

Below are the spacing variants available with the `FormSpacing` enum.

<Preview>
  <Story
    name="Spacing Variants"
    args={{
      id: "spacing-form-id",
    }}
  >
    {getForms(sizes)}
  </Story>
</Preview>

## Example Code

<Story name="Example Code" />

```jsx
<Form action="/end/point" method="get">
  <FormField>
    <TextInput
      labelText="Username"
      helperText="Make sure to complete this field."
      required
    />
  </FormField>
  <FormField>
    <TextInput
      labelText="Password"
      helperText="Make sure to complete this field."
      required
    />
  </FormField>
  <FormRow>
    <FormField>
      <TextInput
        labelText="Phone Field"
        helperText="This one is up to you."
        type="tel"
      />
    </FormField>
    <FormField>
      <TextInput
        labelText="URL Field"
        helperText="This one is up to you."
        type="url"
      />
    </FormField>
    <FormField>
      <TextInput
        labelText="Age"
        helperText="This one is up to you."
        type="number"
      />
    </FormField>
  </FormRow>
  <FormField>
    <Button>Submit</Button>
  </FormField>
</Form>
```
