{"version":3,"file":"chakra-ui-descendant.esm-f106b18c.js","sources":["../../../node_modules/@chakra-ui/descendant/dist/chakra-ui-descendant.esm.js"],"sourcesContent":["import { createContext, mergeRefs } from '@chakra-ui/react-utils';\nimport { useLayoutEffect, useEffect, useRef, useState } from 'react';\n\nfunction _extends() {\n  _extends = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n\n  return _extends.apply(this, arguments);\n}\n\n/**\n * Sort an array of DOM nodes according to the HTML tree order\n * @see http://www.w3.org/TR/html5/infrastructure.html#tree-order\n */\n\nfunction sortNodes(nodes) {\n  return nodes.sort(function (a, b) {\n    var compare = a.compareDocumentPosition(b);\n\n    if (compare & Node.DOCUMENT_POSITION_FOLLOWING || compare & Node.DOCUMENT_POSITION_CONTAINED_BY) {\n      // a < b\n      return -1;\n    }\n\n    if (compare & Node.DOCUMENT_POSITION_PRECEDING || compare & Node.DOCUMENT_POSITION_CONTAINS) {\n      // a > b\n      return 1;\n    }\n\n    if (compare & Node.DOCUMENT_POSITION_DISCONNECTED || compare & Node.DOCUMENT_POSITION_IMPLEMENTATION_SPECIFIC) {\n      throw Error(\"Cannot sort the given nodes.\");\n    } else {\n      return 0;\n    }\n  });\n}\nvar isElement = function isElement(el) {\n  return typeof el == \"object\" && \"nodeType\" in el && el.nodeType === Node.ELEMENT_NODE;\n};\nfunction getNextIndex(current, max, loop) {\n  var next = current + 1;\n  if (loop && next >= max) next = 0;\n  return next;\n}\nfunction getPrevIndex(current, max, loop) {\n  var next = current - 1;\n  if (loop && next < 0) next = max;\n  return next;\n}\nvar useSafeLayoutEffect = typeof window !== \"undefined\" ? useLayoutEffect : useEffect;\nvar cast = function cast(value) {\n  return value;\n};\n\n/**\n * @internal\n *\n * Class to manage descendants and their relative indices in the DOM.\n * It uses `node.compareDocumentPosition(...)` under the hood\n */\nvar DescendantsManager = function DescendantsManager() {\n  var _this = this;\n\n  this.descendants = new Map();\n\n  this.register = function (nodeOrOptions) {\n    if (nodeOrOptions == null) return;\n\n    if (isElement(nodeOrOptions)) {\n      return _this.registerNode(nodeOrOptions);\n    }\n\n    return function (node) {\n      _this.registerNode(node, nodeOrOptions);\n    };\n  };\n\n  this.unregister = function (node) {\n    _this.descendants[\"delete\"](node);\n\n    var sorted = sortNodes(Array.from(_this.descendants.keys()));\n\n    _this.assignIndex(sorted);\n  };\n\n  this.destroy = function () {\n    _this.descendants.clear();\n  };\n\n  this.assignIndex = function (descendants) {\n    _this.descendants.forEach(function (descendant) {\n      var index = descendants.indexOf(descendant.node);\n      descendant.index = index;\n      descendant.node.dataset[\"index\"] = descendant.index.toString();\n    });\n  };\n\n  this.count = function () {\n    return _this.descendants.size;\n  };\n\n  this.enabledCount = function () {\n    return _this.enabledValues().length;\n  };\n\n  this.values = function () {\n    var values = Array.from(_this.descendants.values());\n    return values.sort(function (a, b) {\n      return a.index - b.index;\n    });\n  };\n\n  this.enabledValues = function () {\n    return _this.values().filter(function (descendant) {\n      return !descendant.disabled;\n    });\n  };\n\n  this.item = function (index) {\n    if (_this.count() === 0) return undefined;\n    return _this.values()[index];\n  };\n\n  this.enabledItem = function (index) {\n    if (_this.enabledCount() === 0) return undefined;\n    return _this.enabledValues()[index];\n  };\n\n  this.first = function () {\n    return _this.item(0);\n  };\n\n  this.firstEnabled = function () {\n    return _this.enabledItem(0);\n  };\n\n  this.last = function () {\n    return _this.item(_this.descendants.size - 1);\n  };\n\n  this.lastEnabled = function () {\n    var lastIndex = _this.enabledValues().length - 1;\n    return _this.enabledItem(lastIndex);\n  };\n\n  this.indexOf = function (node) {\n    var _this$descendants$get, _this$descendants$get2;\n\n    if (!node) return -1;\n    return (_this$descendants$get = (_this$descendants$get2 = _this.descendants.get(node)) == null ? void 0 : _this$descendants$get2.index) != null ? _this$descendants$get : -1;\n  };\n\n  this.enabledIndexOf = function (node) {\n    if (node == null) return -1;\n    return _this.enabledValues().findIndex(function (i) {\n      return i.node.isSameNode(node);\n    });\n  };\n\n  this.next = function (index, loop) {\n    if (loop === void 0) {\n      loop = true;\n    }\n\n    var next = getNextIndex(index, _this.count(), loop);\n    return _this.item(next);\n  };\n\n  this.nextEnabled = function (index, loop) {\n    if (loop === void 0) {\n      loop = true;\n    }\n\n    var item = _this.item(index);\n\n    if (!item) return;\n\n    var enabledIndex = _this.enabledIndexOf(item.node);\n\n    var nextEnabledIndex = getNextIndex(enabledIndex, _this.enabledCount(), loop);\n    return _this.enabledItem(nextEnabledIndex);\n  };\n\n  this.prev = function (index, loop) {\n    if (loop === void 0) {\n      loop = true;\n    }\n\n    var prev = getPrevIndex(index, _this.count() - 1, loop);\n    return _this.item(prev);\n  };\n\n  this.prevEnabled = function (index, loop) {\n    if (loop === void 0) {\n      loop = true;\n    }\n\n    var item = _this.item(index);\n\n    if (!item) return;\n\n    var enabledIndex = _this.enabledIndexOf(item.node);\n\n    var prevEnabledIndex = getPrevIndex(enabledIndex, _this.enabledCount() - 1, loop);\n    return _this.enabledItem(prevEnabledIndex);\n  };\n\n  this.registerNode = function (node, options) {\n    if (!node || _this.descendants.has(node)) return;\n    var keys = Array.from(_this.descendants.keys()).concat(node);\n    var sorted = sortNodes(keys);\n\n    if (options != null && options.disabled) {\n      options.disabled = !!options.disabled;\n    }\n\n    var descendant = _extends({\n      node: node,\n      index: -1\n    }, options);\n\n    _this.descendants.set(node, descendant);\n\n    _this.assignIndex(sorted);\n  };\n};\n\n/**\n * @internal\n * React hook that initializes the DescendantsManager\n */\n\nfunction useDescendants() {\n  var descendants = useRef(new DescendantsManager());\n  useSafeLayoutEffect(function () {\n    return function () {\n      return descendants.current.destroy();\n    };\n  });\n  return descendants.current;\n}\n\n/* -------------------------------------------------------------------------------------------------\n * Descendants context to be used in component-land.\n  - Mount the `DescendantsContextProvider` at the root of the component\n  - Call `useDescendantsContext` anywhere you need access to the descendants information\n\n  NB:  I recommend using `createDescendantContext` below\n * -----------------------------------------------------------------------------------------------*/\nvar _createContext = createContext({\n  name: \"DescendantsProvider\",\n  errorMessage: \"useDescendantsContext must be used within DescendantsProvider\"\n}),\n    DescendantsContextProvider = _createContext[0],\n    useDescendantsContext = _createContext[1];\n/**\n * @internal\n * This hook provides information a descendant such as:\n * - Its index compared to other descendants\n * - ref callback to register the descendant\n * - Its enabled index compared to other enabled descendants\n */\n\n\nfunction useDescendant(options) {\n  var descendants = useDescendantsContext();\n\n  var _useState = useState(-1),\n      index = _useState[0],\n      setIndex = _useState[1];\n\n  var ref = useRef(null);\n  useSafeLayoutEffect(function () {\n    return function () {\n      if (!ref.current) return;\n      descendants.unregister(ref.current);\n    };\n  }, []);\n  useSafeLayoutEffect(function () {\n    if (!ref.current) return;\n    var dataIndex = Number(ref.current.dataset[\"index\"]);\n\n    if (index != dataIndex && !Number.isNaN(dataIndex)) {\n      setIndex(dataIndex);\n    }\n  });\n  var refCallback = options ? cast(descendants.register(options)) : cast(descendants.register);\n  return {\n    descendants: descendants,\n    index: index,\n    enabledIndex: descendants.enabledIndexOf(ref.current),\n    register: mergeRefs(refCallback, ref)\n  };\n}\n/* -------------------------------------------------------------------------------------------------\n * Function that provides strongly typed versions of the context provider and hooks above.\n   To be used in component-land\n * -----------------------------------------------------------------------------------------------*/\n\n\nfunction createDescendantContext() {\n  var ContextProvider = cast(DescendantsContextProvider);\n\n  var _useDescendantsContext = function _useDescendantsContext() {\n    return cast(useDescendantsContext());\n  };\n\n  var _useDescendant = function _useDescendant(options) {\n    return useDescendant(options);\n  };\n\n  var _useDescendants = function _useDescendants() {\n    return useDescendants();\n  };\n\n  return [// context provider\n  ContextProvider, // call this when you need to read from context\n  _useDescendantsContext, // descendants state information, to be called and passed to `ContextProvider`\n  _useDescendants, // descendant index information\n  _useDescendant];\n}\n\nexport { createDescendantContext, createDescendantContext as default };\n"],"names":["_extends","target","i","source","key","sortNodes","nodes","a","b","compare","isElement","el","getNextIndex","current","max","loop","next","getPrevIndex","useSafeLayoutEffect","useLayoutEffect","useEffect","cast","value","DescendantsManager","_this","nodeOrOptions","node","sorted","descendants","descendant","index","values","lastIndex","_this$descendants$get","_this$descendants$get2","item","enabledIndex","nextEnabledIndex","prev","prevEnabledIndex","options","keys","useDescendants","useRef","_createContext","createContext","DescendantsContextProvider","useDescendantsContext","useDescendant","_useState","useState","setIndex","ref","dataIndex","refCallback","mergeRefs","createDescendantContext","ContextProvider","_useDescendantsContext","_useDescendant","_useDescendants"],"mappings":"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","x_google_ignoreList":[0]}