import{i as b,s as h}from"./chakra-ui-layout.esm-e0dbb94e.js";import{r as i}from"./index-0cbcd92a.js";function f(){return f=Object.assign||function(s){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(s[n]=t[n])}return s},f.apply(this,arguments)}function l(s){return s.sort(function(e,t){var n=e.compareDocumentPosition(t);if(n&Node.DOCUMENT_POSITION_FOLLOWING||n&Node.DOCUMENT_POSITION_CONTAINED_BY)return-1;if(n&Node.DOCUMENT_POSITION_PRECEDING||n&Node.DOCUMENT_POSITION_CONTAINS)return 1;if(n&Node.DOCUMENT_POSITION_DISCONNECTED||n&Node.DOCUMENT_POSITION_IMPLEMENTATION_SPECIFIC)throw Error("Cannot sort the given nodes.");return 0})}var m=function(e){return typeof e=="object"&&"nodeType"in e&&e.nodeType===Node.ELEMENT_NODE};function v(s,e,t){var n=s+1;return t&&n>=e&&(n=0),n}function x(s,e,t){var n=s-1;return t&&n<0&&(n=e),n}var o=typeof window<"u"?i.useLayoutEffect:i.useEffect,d=function(e){return e},E=function(){var e=this;this.descendants=new Map,this.register=function(t){if(t!=null)return m(t)?e.registerNode(t):function(n){e.registerNode(n,t)}},this.unregister=function(t){e.descendants.delete(t);var n=l(Array.from(e.descendants.keys()));e.assignIndex(n)},this.destroy=function(){e.descendants.clear()},this.assignIndex=function(t){e.descendants.forEach(function(n){var r=t.indexOf(n.node);n.index=r,n.node.dataset.index=n.index.toString()})},this.count=function(){return e.descendants.size},this.enabledCount=function(){return e.enabledValues().length},this.values=function(){var t=Array.from(e.descendants.values());return t.sort(function(n,r){return n.index-r.index})},this.enabledValues=function(){return e.values().filter(function(t){return!t.disabled})},this.item=function(t){if(e.count()!==0)return e.values()[t]},this.enabledItem=function(t){if(e.enabledCount()!==0)return e.enabledValues()[t]},this.first=function(){return e.item(0)},this.firstEnabled=function(){return e.enabledItem(0)},this.last=function(){return e.item(e.descendants.size-1)},this.lastEnabled=function(){var t=e.enabledValues().length-1;return e.enabledItem(t)},this.indexOf=function(t){var n,r;return t&&(n=(r=e.descendants.get(t))==null?void 0:r.index)!=null?n:-1},this.enabledIndexOf=function(t){return t==null?-1:e.enabledValues().findIndex(function(n){return n.node.isSameNode(t)})},this.next=function(t,n){n===void 0&&(n=!0);var r=v(t,e.count(),n);return e.item(r)},this.nextEnabled=function(t,n){n===void 0&&(n=!0);var r=e.item(t);if(r){var a=e.enabledIndexOf(r.node),u=v(a,e.enabledCount(),n);return e.enabledItem(u)}},this.prev=function(t,n){n===void 0&&(n=!0);var r=x(t,e.count()-1,n);return e.item(r)},this.prevEnabled=function(t,n){n===void 0&&(n=!0);var r=e.item(t);if(r){var a=e.enabledIndexOf(r.node),u=x(a,e.enabledCount()-1,n);return e.enabledItem(u)}},this.registerNode=function(t,n){if(!(!t||e.descendants.has(t))){var r=Array.from(e.descendants.keys()).concat(t),a=l(r);n!=null&&n.disabled&&(n.disabled=!!n.disabled);var u=f({node:t,index:-1},n);e.descendants.set(t,u),e.assignIndex(a)}}};function g(){var s=i.useRef(new E);return o(function(){return function(){return s.current.destroy()}}),s.current}var I=b({name:"DescendantsProvider",errorMessage:"useDescendantsContext must be used within DescendantsProvider"}),C=I[0],N=I[1];function D(s){var e=N(),t=i.useState(-1),n=t[0],r=t[1],a=i.useRef(null);o(function(){return function(){a.current&&e.unregister(a.current)}},[]),o(function(){if(a.current){var c=Number(a.current.dataset.index);n!=c&&!Number.isNaN(c)&&r(c)}});var u=d(s?e.register(s):e.register);return{descendants:e,index:n,enabledIndex:e.enabledIndexOf(a.current),register:h(u,a)}}function T(){var s=d(C),e=function(){return d(N())},t=function(a){return D(a)},n=function(){return g()};return[s,e,n,t]}export{T as c};
//# sourceMappingURL=chakra-ui-descendant.esm-f106b18c.js.map
