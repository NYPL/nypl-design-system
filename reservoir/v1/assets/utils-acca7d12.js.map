{"version":3,"file":"utils-acca7d12.js","sources":["../../../src/utils/utils.ts"],"sourcesContent":["import { HelperErrorTextType } from \"../components/HelperErrorText/HelperErrorText\";\nimport { AriaAttributes } from \"./interfaces\";\n// Utility functions to use throughout the codebase\n\n/**\n * range\n * Get an array of values from `start` to `stop` - 1 with an optional\n * `step` between values.\n */\nexport const range = (start: number, stop: number, step = 1): number[] => {\n  if (!start) {\n    return [];\n  }\n\n  return Array(Math.ceil((stop - start) / step))\n    .fill(start)\n    .map((x, y) => x + y * step);\n};\n\n/**\n * Given a pagination's pageCount, this will return (1) a page number,\n * derived from the current URL, and (2) a function that, when passed to\n * Pagination component, makes the URL change and refreshes the page.\n * @NOTE this is only used for Storybook documentation.\n */\nexport const getStorybookHrefProps = (pageCount: number) => {\n  const urlParams = new URLSearchParams(document.location.search);\n  const pageParam = urlParams.get(\"page\");\n\n  const getPageNumber = (page: number) => {\n    return page > 0 && page <= pageCount ? page : 1;\n  };\n  const computedCurrentPage =\n    pageParam && Number(pageParam) && getPageNumber(Number(pageParam));\n  const location = window.location;\n  // Passing this function into `Pagination` makes the URL to change\n  // and refreshes the page.\n  // NOTE: This is very flaky. It removes the `&page=[number]` from the URL\n  // and replaces it with the new page number. This is not ideal, but if it is\n  // not removed, the example `Pagination` won't work.\n  // Not a problem in real life apps (maybe?).\n  const getPageHref = (selectedPage: number) => {\n    const updatedHref = location.href.replace(/&page=.*/, \"\");\n    return `${updatedHref}&page=${selectedPage}`;\n  };\n\n  return { computedCurrentPage, getPageHref };\n};\n\ninterface GetAriaAttrsProps {\n  footnote: HelperErrorTextType;\n  id: string;\n  labelText: HelperErrorTextType;\n  name: string;\n  showLabel: boolean;\n}\n/**\n * Get aria-* attributes for input components. This sets the `aria-label` and\n * `aria-describedby` attributes, based on the label and footnote values.\n */\nexport const getAriaAttrs = ({\n  footnote,\n  id,\n  labelText,\n  name,\n  showLabel,\n}: GetAriaAttrsProps): AriaAttributes => {\n  let ariaAttributes: AriaAttributes = {};\n\n  if (!showLabel) {\n    if (typeof labelText !== \"string\") {\n      console.warn(\n        `NYPL Reservoir ${name}: \\`labelText\\` must be a string when \\`showLabel\\` is false.`\n      );\n    }\n    ariaAttributes[\"aria-label\"] =\n      labelText && footnote\n        ? `${labelText} - ${footnote}`\n        : (labelText as string);\n  } else if (footnote) {\n    ariaAttributes[\"aria-describedby\"] = `${id}-helperText`;\n  }\n\n  return ariaAttributes;\n};\n\n/** Convert a hex color value to an rgb or rgba value */\nexport const hexToRGB = (hex: string, alpha: number) => {\n  const shortHex = hex.length === 4;\n  const rSlice = shortHex ? hex.slice(1, 2).repeat(2) : hex.slice(1, 3),\n    gSlice = shortHex ? hex.slice(2, 3).repeat(2) : hex.slice(3, 5),\n    bSlice = shortHex ? hex.slice(3, 4).repeat(2) : hex.slice(5, 7);\n  const r = parseInt(rSlice, 16),\n    g = parseInt(gSlice, 16),\n    b = parseInt(bSlice, 16);\n  const rgb = `${r}, ${g}, ${b}`;\n  return alpha ? `rgba(${rgb},${alpha})` : `rgb(${rgb})`;\n};\n\n/** Calculate color luminance */\nexport const colorLuminance = (r, g, b) => {\n  const a = [r, g, b].map(function (v) {\n    v /= 255;\n    return v <= 0.03928 ? v / 12.92 : Math.pow((v + 0.055) / 1.055, 2.4);\n  });\n  return a[0] * 0.2126 + a[1] * 0.7152 + a[2] * 0.0722;\n};\n\n/** Calculate color contrast ratio */\nexport const contrastRatio = (hex1: string, hex2: string) => {\n  const rgb1 = hexToRGB(hex1, null);\n  const rgb2 = hexToRGB(hex2, null);\n  const colorLuminance1 = colorLuminance(rgb1[0], rgb1[1], rgb1[2]);\n  const colorLuminance2 = colorLuminance(rgb2[0], rgb2[1], rgb2[2]);\n  const ratio =\n    colorLuminance1 > colorLuminance2\n      ? (colorLuminance2 + 0.05) / (colorLuminance1 + 0.05)\n      : (colorLuminance1 + 0.05) / (colorLuminance2 + 0.05);\n\n  return (ratio * 10).toFixed(2);\n};\n\n/** This method will truncate text by centain length. Default length is 60. */\nexport const truncateText = (text: string, truncateTextLength: number = 60) => {\n  const updatedText = text.substring(0, truncateTextLength - 1);\n  return `${updatedText.substring(0, updatedText.lastIndexOf(\" \"))}...`;\n};\n"],"names":["range","start","stop","step","x","y","getStorybookHrefProps","pageCount","pageParam","getPageNumber","page","computedCurrentPage","location","selectedPage","getAriaAttrs","footnote","id","labelText","name","showLabel","ariaAttributes","hexToRGB","hex","alpha","shortHex","rSlice","gSlice","bSlice","r","g","b","rgb","truncateText","text","truncateTextLength","updatedText"],"mappings":"AASO,MAAMA,EAAQ,CAACC,EAAeC,EAAcC,EAAO,IACnDF,EAIE,MAAM,KAAK,MAAMC,EAAOD,GAASE,CAAI,CAAC,EAC1C,KAAKF,CAAK,EACV,IAAI,CAACG,EAAGC,IAAMD,EAAIC,EAAIF,CAAI,EALpB,GAcEG,EAAyBC,GAAsB,CAEpD,MAAAC,EADY,IAAI,gBAAgB,SAAS,SAAS,MAAM,EAClC,IAAI,MAAM,EAEhCC,EAAiBC,GACdA,EAAO,GAAKA,GAAQH,EAAYG,EAAO,EAE1CC,EACJH,GAAa,OAAOA,CAAS,GAAKC,EAAc,OAAOD,CAAS,CAAC,EAC7DI,EAAW,OAAO,SAYjB,MAAA,CAAE,oBAAAD,EAAqB,YALTE,GAEZ,GADaD,EAAS,KAAK,QAAQ,WAAY,EAAE,UAC1BC,IAIlC,EAaaC,EAAe,CAAC,CAC3B,SAAAC,EACA,GAAAC,EACA,UAAAC,EACA,KAAAC,EACA,UAAAC,CACF,IAAyC,CACvC,IAAIC,EAAiC,CAAA,EAErC,OAAKD,EAUMJ,IACMK,EAAA,kBAAkB,EAAI,GAAGJ,iBAVpC,OAAOC,GAAc,UACf,QAAA,KACN,kBAAkBC,gEAAA,EAGtBE,EAAe,YAAY,EACzBH,GAAaF,EACT,GAAGE,OAAeF,IACjBE,GAKFG,CACT,EAGaC,EAAW,CAACC,EAAaC,IAAkB,CAChD,MAAAC,EAAWF,EAAI,SAAW,EAC1BG,EAASD,EAAWF,EAAI,MAAM,EAAG,CAAC,EAAE,OAAO,CAAC,EAAIA,EAAI,MAAM,EAAG,CAAC,EAClEI,EAASF,EAAWF,EAAI,MAAM,EAAG,CAAC,EAAE,OAAO,CAAC,EAAIA,EAAI,MAAM,EAAG,CAAC,EAC9DK,EAASH,EAAWF,EAAI,MAAM,EAAG,CAAC,EAAE,OAAO,CAAC,EAAIA,EAAI,MAAM,EAAG,CAAC,EAC1DM,EAAI,SAASH,EAAQ,EAAE,EAC3BI,EAAI,SAASH,EAAQ,EAAE,EACvBI,EAAI,SAASH,EAAQ,EAAE,EACnBI,EAAM,GAAGH,MAAMC,MAAMC,IAC3B,OAAOP,EAAQ,QAAQQ,KAAOR,KAAW,OAAOQ,IAClD,EA0BaC,EAAe,CAACC,EAAcC,EAA6B,KAAO,CAC7E,MAAMC,EAAcF,EAAK,UAAU,EAAGC,EAAqB,CAAC,EAC5D,MAAO,GAAGC,EAAY,UAAU,EAAGA,EAAY,YAAY,GAAG,CAAC,MACjE"}