{"version":3,"file":"FeedbackBox-8fd366e4.js","sources":["../../../src/components/FeedbackBox/useFeedbackBoxReducer.ts","../../../src/components/FeedbackBox/FeedbackBox.tsx"],"sourcesContent":["import { useReducer } from \"react\";\n\ntype Action = {\n  // The fields that we are updating or reset them all at once.\n  type: \"category\" | \"comment\" | \"email\" | \"clear\";\n  payload?: string;\n};\ninterface FeedbackBoxState {\n  category?: string;\n  comment: string;\n  email?: string;\n}\n\nconst initialState: FeedbackBoxState = {\n  category: \"comment\",\n  comment: \"\",\n  email: \"\",\n};\n\n/**\n * Simple reducer to manage the internal state of the form\n * fields in the FeedbackBox component.\n */\nfunction reducer(state: FeedbackBoxState, action: Action) {\n  switch (action.type) {\n    case \"category\":\n      return {\n        ...state,\n        category: action.payload,\n      };\n    case \"comment\":\n      return {\n        ...state,\n        comment: action.payload,\n      };\n    case \"email\":\n      return {\n        ...state,\n        email: action.payload,\n      };\n    case \"clear\":\n    default:\n      return initialState;\n  }\n}\n\n/**\n * DS internal helper reducer hook to manage internal state for the FeedbackBox\n * component. Note: this custom hook is not tested directly as it's an\n * implementation detail of the FeedbackBox component, following the guidance\n * of RTL: https://testing-library.com/docs/example-react-hooks-useReducer\n */\nfunction useFeedbackBoxReducer() {\n  const [state, dispatch] = useReducer(reducer, initialState);\n  const setCategory = (category: string) =>\n    dispatch({ type: \"category\", payload: category });\n  const setComment = (comment: string) =>\n    dispatch({ type: \"comment\", payload: comment });\n  const setEmail = (email: string) =>\n    dispatch({ type: \"email\", payload: email });\n  const clearValues = () => dispatch({ type: \"clear\" });\n\n  return { state, setCategory, setComment, setEmail, clearValues };\n}\n\nexport default useFeedbackBoxReducer;\n","import {\n  Box,\n  chakra,\n  Drawer,\n  DrawerBody,\n  DrawerContent,\n  DrawerHeader,\n  DrawerOverlay,\n  useColorModeValue,\n  useDisclosure,\n  useMultiStyleConfig,\n  VStack,\n} from \"@chakra-ui/react\";\nimport React, { forwardRef, useEffect, useRef, useState } from \"react\";\n\nimport Button from \"../Button/Button\";\nimport ButtonGroup from \"../ButtonGroup/ButtonGroup\";\nimport Form, { FormField } from \"../Form/Form\";\nimport Icon from \"../Icons/Icon\";\nimport Link from \"../Link/Link\";\nimport Notification from \"../Notification/Notification\";\nimport Radio from \"../Radio/Radio\";\nimport RadioGroup from \"../RadioGroup/RadioGroup\";\nimport Text from \"../Text/Text\";\nimport TextInput from \"../TextInput/TextInput\";\nimport useStateWithDependencies from \"../../hooks/useStateWithDependencies\";\nimport useNYPLBreakpoints from \"../../hooks/useNYPLBreakpoints\";\nimport useFeedbackBoxReducer from \"./useFeedbackBoxReducer\";\n\nexport const feedbackBoxViewTypeArray = [\n  \"form\",\n  \"confirmation\",\n  \"error\",\n] as const;\nexport type FeedbackBoxViewType = typeof feedbackBoxViewTypeArray[number];\n\ninterface FeedbackBoxProps {\n  /** Additional class name to add. */\n  className?: string;\n  /** Used to add additional information to the default confirmation message in\n   * the confirmation view. */\n  confirmationText?: string | JSX.Element;\n  /** Used to add description text above the form input fields in\n   * the initial/form view. */\n  descriptionText?: string | JSX.Element;\n  /** A data object containing key/value pairs that will be added to the form\n   * field submitted data. */\n  hiddenFields?: any;\n  /** ID that other components can cross reference for accessibility purposes */\n  id?: string;\n  /** Toggles the invalid state for the comment field. */\n  isInvalidComment?: boolean;\n  /** Toggles the invalid state for the email field. */\n  isInvalidEmail?: boolean;\n  /** Only used for internal purposes. */\n  isOpen?: boolean;\n  /** Used to add a notification above the description in the\n   * initial/form view.*/\n  notificationText?: string | JSX.Element;\n  /** Only used for internal purposes. */\n  onClose?: any;\n  /** Only used for internal purposes. */\n  onOpen?: any;\n  /** Callback function that will be invoked when the form is submitted.\n   * The returned data object contains key/value pairs including the\n   * values from the `hiddenFields` prop.\n   */\n  onSubmit: (values: { [key: string]: string }) => any;\n  /** Toggles the category radio group field. */\n  showCategoryField?: boolean;\n  /** Toggles the email input field. When set to `true`, an additional\n   * confirmation message will be rendered. */\n  showEmailField?: boolean;\n  /** Used to populate the label on the open button and the `Drawer`'s\n   * header title. */\n  title: string;\n  /** Used to specify what screen should be displayed. */\n  view?: FeedbackBoxViewType;\n}\n\n/**\n * The `FeedbackBox` component renders a fixed-positioned button on the bottom\n * right corner of a page that opens a Chakra `Drawer` popup component. Inside\n * of the popup, a form is rendered with fields that allows users to provide\n * feedback. The `FeedbackBox` component does *not* call any API with the\n * submitted data; that feature is the responsibility of the consuming\n * application.\n */\nexport const FeedbackBox = chakra(\n  forwardRef<any, FeedbackBoxProps>(\n    (\n      {\n        className,\n        confirmationText,\n        descriptionText,\n        hiddenFields,\n        id = \"feedbackbox\",\n        isInvalidComment = false,\n        isInvalidEmail = false,\n        notificationText,\n        onSubmit,\n        showCategoryField = false,\n        showEmailField = false,\n        title,\n        view = \"form\",\n        isOpen,\n        onOpen,\n        onClose,\n        ...rest\n      },\n      ref?\n    ) => {\n      // We want to keep internal state for the view but also\n      // update if the consuming app updates it, based on API\n      // success and failure responses.\n      const [viewType, setViewType] = useStateWithDependencies(view);\n      const [isSubmitted, setIsSubmitted] = useState<boolean>(false);\n      // Helps keep track of form field state values.\n      const { state, setCategory, setComment, setEmail, clearValues } =\n        useFeedbackBoxReducer();\n      // Hook into NYPL breakpoint\n      const { isLargerThanMobile } = useNYPLBreakpoints();\n      // Chakra's hook to control Drawer's actions.\n      const disclosure = useDisclosure();\n      const finalIsOpen = isOpen ? isOpen : disclosure.isOpen;\n      const finalOnOpen = onOpen ? onOpen : disclosure.onOpen;\n      const finalOnClose = onClose ? onClose : disclosure.onClose;\n      const focusRef = useRef<HTMLDivElement>();\n      const styles = useMultiStyleConfig(\"FeedbackBox\", {});\n      const isFormView = viewType === \"form\";\n      const isConfirmationView = viewType === \"confirmation\";\n      const isErrorView = viewType === \"error\";\n      const confirmationTimeout = 3000;\n      const maxCommentCharacters = 500;\n      const initMinHeight = 165;\n      const initTemplateRows = \"auto 1fr\";\n      const iconColor = useColorModeValue(null, \"dark.ui.typography.body\");\n      const minHeightWithCategory = 235;\n      const minHeightWithEmail = 275;\n      const minHeightWithCategoryAndEmail = 345;\n      const notificationHeightAdjustment = 37;\n      const descriptionHeightAdjustment = 24;\n      let drawerMinHeight = initMinHeight;\n      const closeAndResetForm = () => {\n        finalOnClose();\n        setViewType(\"form\");\n        clearValues();\n      };\n      const internalOnSubmit = (e) => {\n        e.preventDefault();\n        let submittedValues = { ...state };\n        if (hiddenFields) {\n          submittedValues = { ...submittedValues, ...hiddenFields };\n        }\n        onSubmit && onSubmit(submittedValues);\n        setIsSubmitted(true);\n      };\n      const notificationElement =\n        isFormView && notificationText ? (\n          <Notification\n            isCentered\n            noMargin\n            notificationContent={notificationText}\n            showIcon={false}\n            p=\"0\"\n            sx={{\n              // The padding of the Notification is smaller than\n              // the initial one.\n              \"> div\": {\n                py: \"xs\",\n              },\n            }}\n            width=\"100%\"\n          />\n        ) : undefined;\n      const descriptionElement =\n        isFormView && descriptionText ? (\n          <Text fontWeight=\"medium\" noSpace>\n            {descriptionText}\n          </Text>\n        ) : undefined;\n      const privacyPolicyField = (\n        <FormField>\n          <Link\n            href=\"https://www.nypl.org/help/about-nypl/legal-notices/privacy-policy\"\n            type=\"external\"\n            fontSize=\"text.tag\"\n            width=\"fit-content\"\n          >\n            Privacy Policy\n          </Link>\n        </FormField>\n      );\n\n      // When the submit button is clicked, set a timeout before displaying\n      // the confirmation or error screen. This automatically goes to the\n      // confirmation view after three (3) seconds, but the consuming app\n      // can set the error view if there are any issues.\n      useEffect(() => {\n        let timer;\n        if (isSubmitted) {\n          // If the consuming app does not provide any updates based\n          // on its API response, go to confirmation screen.\n          timer = setTimeout(() => {\n            setIsSubmitted(false);\n            if (isErrorView) {\n              setViewType(\"error\");\n            } else {\n              setViewType(\"confirmation\");\n            }\n            clearValues();\n          }, confirmationTimeout);\n\n          // If the consuming app does pass the API response to the\n          // component, then cancel the timeout above and display the\n          // appropriate screen.\n          if (view !== viewType) {\n            setIsSubmitted(false);\n            setViewType(view);\n            clearTimeout(timer);\n          }\n        }\n\n        return () => clearTimeout(timer);\n      }, [clearValues, isErrorView, isSubmitted, setViewType, view, viewType]);\n\n      // Delay focusing on the confirmation or error message\n      // because it's an element that dynamically gets rendered,\n      // so it is not always available in the DOM.\n      useEffect(() => {\n        let timer;\n        if (viewType === \"error\" || viewType === \"confirmation\") {\n          timer = setTimeout(() => {\n            focusRef?.current?.focus();\n          }, 250);\n        }\n        return () => clearTimeout(timer);\n      }, [focusRef, viewType]);\n      if (showCategoryField) {\n        drawerMinHeight = minHeightWithCategory;\n      }\n      if (showEmailField) {\n        drawerMinHeight = minHeightWithEmail;\n      }\n      if (showCategoryField && showEmailField) {\n        drawerMinHeight = minHeightWithCategoryAndEmail;\n      }\n      if (notificationText) {\n        drawerMinHeight += notificationHeightAdjustment;\n      }\n      if (descriptionText) {\n        drawerMinHeight += descriptionHeightAdjustment;\n      }\n      if (notificationText && descriptionText) {\n        drawerMinHeight += 16;\n      }\n      let finalDrawerMinHeight = drawerMinHeight + \"px\";\n\n      return (\n        <Box className={className} id={id} ref={ref} sx={styles} {...rest}>\n          <Button id=\"open\" onClick={finalOnOpen} sx={styles.openButton}>\n            {title}\n          </Button>\n\n          <Drawer\n            blockScrollOnMount={false}\n            isOpen={finalIsOpen}\n            onClose={finalOnClose}\n            placement=\"bottom\"\n          >\n            {/* Adds the opaque background. */}\n            <DrawerOverlay />\n\n            <DrawerContent sx={styles.drawerContent}>\n              <Button\n                buttonType=\"text\"\n                id=\"close-btn\"\n                onClick={finalOnClose}\n                sx={styles.closeButton}\n              >\n                <Icon color=\"ui.black\" name=\"minus\" size=\"medium\" />\n                <span>Close {title}</span>\n              </Button>\n              <DrawerHeader sx={styles.drawerHeader}>\n                <Text data-testid=\"title\">{title}</Text>\n              </DrawerHeader>\n\n              <DrawerBody sx={styles.drawerBody}>\n                <Form\n                  gap=\"grid.s\"\n                  id=\"feedback-form\"\n                  onSubmit={internalOnSubmit}\n                  sx={{\n                    \".feedback-body\": {\n                      alignItems: \"flex-start\",\n                      minHeight: finalDrawerMinHeight,\n                      gridTemplateRows: initTemplateRows,\n                    },\n                    \".feedback-body.response\": {\n                      alignItems: \"center\",\n                      display: \"flex\",\n                      flexDirection: \"column\",\n                      justifyContent: \"center\",\n                    },\n                  }}\n                >\n                  {/* Initial form Screen */}\n                  {isFormView && (\n                    <>\n                      <VStack className=\"feedback-body\" spacing=\"s\">\n                        {(notificationElement || descriptionElement) && (\n                          <>\n                            {notificationElement}\n                            {descriptionElement}\n                          </>\n                        )}\n                        {showCategoryField && (\n                          <FormField>\n                            <RadioGroup\n                              defaultValue={state.category}\n                              id={`${id}-category`}\n                              isDisabled={isSubmitted}\n                              labelText=\"What is your feedback about?\"\n                              layout={isLargerThanMobile ? \"row\" : \"column\"}\n                              name={`${id}-category`}\n                              onChange={(selected) => setCategory(selected)}\n                            >\n                              <Radio\n                                id=\"comment\"\n                                labelText=\"Comment\"\n                                value=\"comment\"\n                              />\n                              <Radio\n                                id=\"correction\"\n                                labelText=\"Correction\"\n                                value=\"correction\"\n                              />\n                              <Radio id=\"bug\" labelText=\"Bug\" value=\"bug\" />\n                            </RadioGroup>\n                          </FormField>\n                        )}\n                        <FormField width=\"100%\">\n                          <TextInput\n                            helperText={`${\n                              maxCommentCharacters - state.comment.length\n                            } characters remaining`}\n                            id={`${id}-comment`}\n                            invalidText=\"Please fill out this field.\"\n                            isDisabled={isSubmitted}\n                            isInvalid={isInvalidComment}\n                            isRequired\n                            labelText=\"Comment\"\n                            maxLength={maxCommentCharacters}\n                            name={`${id}-comment`}\n                            onChange={(e) => setComment(e.target.value)}\n                            placeholder=\"Enter your question or feedback here\"\n                            type=\"textarea\"\n                            defaultValue={state.comment}\n                          />\n                        </FormField>\n                        {showEmailField && (\n                          <FormField width=\"100%\">\n                            <TextInput\n                              id={`${id}-email`}\n                              invalidText=\"Please enter a valid email address.\"\n                              isDisabled={isSubmitted}\n                              isInvalid={isInvalidEmail}\n                              labelText=\"Email\"\n                              name={`${id}-email`}\n                              onChange={(e) => setEmail(e.target.value)}\n                              placeholder=\"Enter your email address here\"\n                              type=\"email\"\n                              value={state.email}\n                            />\n                          </FormField>\n                        )}\n                      </VStack>\n                      {privacyPolicyField}\n                      <FormField>\n                        <ButtonGroup buttonWidth=\"full\" id=\"submit-cancel\">\n                          <Button\n                            buttonType=\"secondary\"\n                            id=\"cancel\"\n                            isDisabled={isSubmitted}\n                            key=\"cancel\"\n                            onClick={closeAndResetForm}\n                          >\n                            Cancel\n                          </Button>\n                          <Button\n                            id=\"submit\"\n                            isDisabled={isSubmitted}\n                            key=\"submit\"\n                            type=\"submit\"\n                          >\n                            Submit\n                          </Button>\n                        </ButtonGroup>\n                      </FormField>\n                    </>\n                  )}\n\n                  {/* Confirmation Screen */}\n                  {isConfirmationView && (\n                    <>\n                      <Box\n                        className=\"feedback-body response\"\n                        key=\"confirmationWrapper\"\n                        margin=\"auto\"\n                        tabIndex={0}\n                        textAlign=\"center\"\n                        ref={focusRef}\n                      >\n                        <Icon\n                          color={iconColor}\n                          name=\"actionCheckCircleFilled\"\n                          size=\"large\"\n                        />\n                        <Text fontWeight=\"medium\">\n                          Thank you for submitting your feedback.\n                        </Text>\n                        {showEmailField && (\n                          <Text>\n                            If you provided an email address and require a\n                            response, our service staff will reach out to you\n                            via email.\n                          </Text>\n                        )}\n                        {confirmationText ? (\n                          <Text>{confirmationText}</Text>\n                        ) : undefined}\n                      </Box>\n                      {privacyPolicyField}\n                      <FormField>\n                        <ButtonGroup buttonWidth=\"full\" id=\"submit-cancel\">\n                          <Button\n                            id=\"return-browsing\"\n                            buttonType=\"secondary\"\n                            onClick={closeAndResetForm}\n                          >\n                            Return to Browsing\n                          </Button>\n                        </ButtonGroup>\n                      </FormField>\n                    </>\n                  )}\n\n                  {/* Error Screen */}\n                  {isErrorView && (\n                    <>\n                      <Box\n                        className=\"feedback-body response\"\n                        color=\"ui.error.primary\"\n                        key=\"errorWrapper\"\n                        margin=\"auto\"\n                        tabIndex={0}\n                        textAlign=\"center\"\n                        ref={focusRef}\n                      >\n                        <Icon\n                          color=\"ui.error.primary\"\n                          name=\"errorFilled\"\n                          size=\"large\"\n                        />\n                        <Text fontWeight=\"medium\">\n                          Oops! Something went wrong. An error occured while\n                          processing your feedback.\n                        </Text>\n                      </Box>\n                      {privacyPolicyField}\n                      <FormField>\n                        <ButtonGroup buttonWidth=\"full\" id=\"submit-cancel\">\n                          <Button\n                            id=\"return-browsing2\"\n                            key=\"return-browsing2\"\n                            buttonType=\"secondary\"\n                            onClick={closeAndResetForm}\n                          >\n                            Return to Browsing\n                          </Button>\n                          <Button\n                            id=\"try-again\"\n                            key=\"try-again\"\n                            onClick={() => setViewType(\"form\")}\n                          >\n                            Try Again\n                          </Button>\n                        </ButtonGroup>\n                      </FormField>\n                    </>\n                  )}\n                </Form>\n              </DrawerBody>\n            </DrawerContent>\n          </Drawer>\n        </Box>\n      );\n    }\n  )\n);\n\nexport function useFeedbackBox() {\n  const { isOpen, onClose, onOpen } = useDisclosure();\n  const InternalFeedbackBox = chakra((props) => {\n    return (\n      <FeedbackBox\n        isOpen={isOpen}\n        onClose={onClose}\n        onOpen={onOpen}\n        {...props}\n      />\n    );\n  });\n\n  return { isOpen, onClose, onOpen, FeedbackBox: InternalFeedbackBox };\n}\n\nexport default FeedbackBox;\n"],"names":["initialState","reducer","state","action","useFeedbackBoxReducer","dispatch","useReducer","category","comment","email","feedbackBoxViewTypeArray","FeedbackBox","chakra","forwardRef","className","confirmationText","descriptionText","hiddenFields","id","isInvalidComment","isInvalidEmail","notificationText","onSubmit","showCategoryField","showEmailField","title","view","isOpen","onOpen","onClose","rest","ref","viewType","setViewType","useStateWithDependencies","isSubmitted","setIsSubmitted","useState","setCategory","setComment","setEmail","clearValues","isLargerThanMobile","useNYPLBreakpoints","disclosure","useDisclosure","finalIsOpen","finalOnOpen","finalOnClose","focusRef","useRef","styles","useMultiStyleConfig","isFormView","isConfirmationView","isErrorView","confirmationTimeout","maxCommentCharacters","initMinHeight","initTemplateRows","iconColor","useColorModeValue","minHeightWithCategory","minHeightWithEmail","minHeightWithCategoryAndEmail","notificationHeightAdjustment","descriptionHeightAdjustment","drawerMinHeight","closeAndResetForm","internalOnSubmit","e","submittedValues","notificationElement","jsx","Notification","descriptionElement","Text","privacyPolicyField","FormField","Link","useEffect","timer","_a","finalDrawerMinHeight","jsxs","Box","Button","Drawer","DrawerOverlay","DrawerContent","Icon","DrawerHeader","DrawerBody","Form","Fragment","VStack","RadioGroup","selected","Radio","TextInput","ButtonGroup"],"mappings":"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"}