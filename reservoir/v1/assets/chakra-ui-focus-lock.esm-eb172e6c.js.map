{"version":3,"file":"chakra-ui-focus-lock.esm-eb172e6c.js","sources":["../../../node_modules/@babel/runtime/helpers/esm/objectWithoutPropertiesLoose.js","../../../node_modules/focus-lock/dist/es2015/constants.js","../../../node_modules/use-callback-ref/dist/es2015/assignRef.js","../../../node_modules/use-callback-ref/dist/es2015/useRef.js","../../../node_modules/use-callback-ref/dist/es2015/useMergeRef.js","../../../node_modules/react-focus-lock/dist/es2015/FocusGuard.js","../../../node_modules/use-sidecar/dist/es2015/medium.js","../../../node_modules/react-focus-lock/dist/es2015/medium.js","../../../node_modules/react-focus-lock/dist/es2015/Lock.js","../../../node_modules/react-clientside-effect/lib/index.es.js","../../../node_modules/focus-lock/dist/es2015/utils/array.js","../../../node_modules/focus-lock/dist/es2015/utils/all-affected.js","../../../node_modules/focus-lock/dist/es2015/utils/is.js","../../../node_modules/focus-lock/dist/es2015/utils/tabOrder.js","../../../node_modules/focus-lock/dist/es2015/utils/tabbables.js","../../../node_modules/focus-lock/dist/es2015/utils/tabUtils.js","../../../node_modules/focus-lock/dist/es2015/utils/DOMutils.js","../../../node_modules/focus-lock/dist/es2015/utils/parenting.js","../../../node_modules/focus-lock/dist/es2015/focusables.js","../../../node_modules/focus-lock/dist/es2015/focusInside.js","../../../node_modules/focus-lock/dist/es2015/focusIsHidden.js","../../../node_modules/focus-lock/dist/es2015/utils/correctFocus.js","../../../node_modules/focus-lock/dist/es2015/utils/firstFocus.js","../../../node_modules/focus-lock/dist/es2015/solver.js","../../../node_modules/focus-lock/dist/es2015/focusMerge.js","../../../node_modules/focus-lock/dist/es2015/setFocus.js","../../../node_modules/react-focus-lock/dist/es2015/util.js","../../../node_modules/react-focus-lock/dist/es2015/Trap.js","../../../node_modules/react-focus-lock/dist/es2015/Combination.js","../../../node_modules/@chakra-ui/focus-lock/dist/chakra-ui-focus-lock.esm.js"],"sourcesContent":["export default function _objectWithoutPropertiesLoose(source, excluded) {\n  if (source == null) return {};\n  var target = {};\n  var sourceKeys = Object.keys(source);\n  var key, i;\n  for (i = 0; i < sourceKeys.length; i++) {\n    key = sourceKeys[i];\n    if (excluded.indexOf(key) >= 0) continue;\n    target[key] = source[key];\n  }\n  return target;\n}","export var FOCUS_GROUP = 'data-focus-lock';\nexport var FOCUS_DISABLED = 'data-focus-lock-disabled';\nexport var FOCUS_ALLOW = 'data-no-focus-lock';\nexport var FOCUS_AUTO = 'data-autofocus-inside';\n","/**\n * Assigns a value for a given ref, no matter of the ref format\n * @param {RefObject} ref - a callback function or ref object\n * @param value - a new value\n *\n * @see https://github.com/theKashey/use-callback-ref#assignref\n * @example\n * const refObject = useRef();\n * const refFn = (ref) => {....}\n *\n * assignRef(refObject, \"refValue\");\n * assignRef(refFn, \"refValue\");\n */\nexport function assignRef(ref, value) {\n    if (typeof ref === 'function') {\n        ref(value);\n    }\n    else if (ref) {\n        ref.current = value;\n    }\n    return ref;\n}\n","import { useState } from 'react';\n/**\n * creates a MutableRef with ref change callback\n * @param initialValue - initial ref value\n * @param {Function} callback - a callback to run when value changes\n *\n * @example\n * const ref = useCallbackRef(0, (newValue, oldValue) => console.log(oldValue, '->', newValue);\n * ref.current = 1;\n * // prints 0 -> 1\n *\n * @see https://reactjs.org/docs/hooks-reference.html#useref\n * @see https://github.com/theKashey/use-callback-ref#usecallbackref---to-replace-reactuseref\n * @returns {MutableRefObject}\n */\nexport function useCallbackRef(initialValue, callback) {\n    var ref = useState(function () { return ({\n        // value\n        value: initialValue,\n        // last callback\n        callback: callback,\n        // \"memoized\" public interface\n        facade: {\n            get current() {\n                return ref.value;\n            },\n            set current(value) {\n                var last = ref.value;\n                if (last !== value) {\n                    ref.value = value;\n                    ref.callback(value, last);\n                }\n            },\n        },\n    }); })[0];\n    // update callback\n    ref.callback = callback;\n    return ref.facade;\n}\n","import { assignRef } from './assignRef';\nimport { useCallbackRef } from './useRef';\n/**\n * Merges two or more refs together providing a single interface to set their value\n * @param {RefObject|Ref} refs\n * @returns {MutableRefObject} - a new ref, which translates all changes to {refs}\n *\n * @see {@link mergeRefs} a version without buit-in memoization\n * @see https://github.com/theKashey/use-callback-ref#usemergerefs\n * @example\n * const Component = React.forwardRef((props, ref) => {\n *   const ownRef = useRef();\n *   const domRef = useMergeRefs([ref, ownRef]); // ðŸ‘ˆ merge together\n *   return <div ref={domRef}>...</div>\n * }\n */\nexport function useMergeRefs(refs, defaultValue) {\n    return useCallbackRef(defaultValue || null, function (newValue) { return refs.forEach(function (ref) { return assignRef(ref, newValue); }); });\n}\n","import * as React from 'react';\nimport PropTypes from 'prop-types';\nexport var hiddenGuard = {\n  width: '1px',\n  height: '0px',\n  padding: 0,\n  overflow: 'hidden',\n  position: 'fixed',\n  top: '1px',\n  left: '1px'\n};\n\nvar InFocusGuard = function InFocusGuard(_ref) {\n  var children = _ref.children;\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"div\", {\n    key: \"guard-first\",\n    \"data-focus-guard\": true,\n    \"data-focus-auto-guard\": true,\n    style: hiddenGuard\n  }), children, children && /*#__PURE__*/React.createElement(\"div\", {\n    key: \"guard-last\",\n    \"data-focus-guard\": true,\n    \"data-focus-auto-guard\": true,\n    style: hiddenGuard\n  }));\n};\n\nInFocusGuard.propTypes = process.env.NODE_ENV !== \"production\" ? {\n  children: PropTypes.node\n} : {};\nInFocusGuard.defaultProps = {\n  children: null\n};\nexport default InFocusGuard;","import { __assign } from \"tslib\";\nfunction ItoI(a) {\n    return a;\n}\nfunction innerCreateMedium(defaults, middleware) {\n    if (middleware === void 0) { middleware = ItoI; }\n    var buffer = [];\n    var assigned = false;\n    var medium = {\n        read: function () {\n            if (assigned) {\n                throw new Error('Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.');\n            }\n            if (buffer.length) {\n                return buffer[buffer.length - 1];\n            }\n            return defaults;\n        },\n        useMedium: function (data) {\n            var item = middleware(data, assigned);\n            buffer.push(item);\n            return function () {\n                buffer = buffer.filter(function (x) { return x !== item; });\n            };\n        },\n        assignSyncMedium: function (cb) {\n            assigned = true;\n            while (buffer.length) {\n                var cbs = buffer;\n                buffer = [];\n                cbs.forEach(cb);\n            }\n            buffer = {\n                push: function (x) { return cb(x); },\n                filter: function () { return buffer; },\n            };\n        },\n        assignMedium: function (cb) {\n            assigned = true;\n            var pendingQueue = [];\n            if (buffer.length) {\n                var cbs = buffer;\n                buffer = [];\n                cbs.forEach(cb);\n                pendingQueue = buffer;\n            }\n            var executeQueue = function () {\n                var cbs = pendingQueue;\n                pendingQueue = [];\n                cbs.forEach(cb);\n            };\n            var cycle = function () { return Promise.resolve().then(executeQueue); };\n            cycle();\n            buffer = {\n                push: function (x) {\n                    pendingQueue.push(x);\n                    cycle();\n                },\n                filter: function (filter) {\n                    pendingQueue = pendingQueue.filter(filter);\n                    return buffer;\n                },\n            };\n        },\n    };\n    return medium;\n}\nexport function createMedium(defaults, middleware) {\n    if (middleware === void 0) { middleware = ItoI; }\n    return innerCreateMedium(defaults, middleware);\n}\n// eslint-disable-next-line @typescript-eslint/ban-types\nexport function createSidecarMedium(options) {\n    if (options === void 0) { options = {}; }\n    var medium = innerCreateMedium(null);\n    medium.options = __assign({ async: true, ssr: false }, options);\n    return medium;\n}\n","import { createMedium, createSidecarMedium } from 'use-sidecar';\nexport var mediumFocus = createMedium({}, function (_ref) {\n  var target = _ref.target,\n      currentTarget = _ref.currentTarget;\n  return {\n    target: target,\n    currentTarget: currentTarget\n  };\n});\nexport var mediumBlur = createMedium();\nexport var mediumEffect = createMedium();\nexport var mediumSidecar = createSidecarMedium({\n  async: true\n});","import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport * as React from 'react';\nimport { node, bool, string, any, arrayOf, oneOfType, object, func } from 'prop-types';\nimport * as constants from 'focus-lock/constants';\nimport { useMergeRefs } from 'use-callback-ref';\nimport { hiddenGuard } from './FocusGuard';\nimport { mediumFocus, mediumBlur, mediumSidecar } from './medium';\nvar emptyArray = [];\nvar FocusLock = /*#__PURE__*/React.forwardRef(function FocusLockUI(props, parentRef) {\n  var _extends2;\n\n  var _React$useState = React.useState(),\n      realObserved = _React$useState[0],\n      setObserved = _React$useState[1];\n\n  var observed = React.useRef();\n  var isActive = React.useRef(false);\n  var originalFocusedElement = React.useRef(null);\n  var children = props.children,\n      disabled = props.disabled,\n      noFocusGuards = props.noFocusGuards,\n      persistentFocus = props.persistentFocus,\n      crossFrame = props.crossFrame,\n      autoFocus = props.autoFocus,\n      allowTextSelection = props.allowTextSelection,\n      group = props.group,\n      className = props.className,\n      whiteList = props.whiteList,\n      _props$shards = props.shards,\n      shards = _props$shards === void 0 ? emptyArray : _props$shards,\n      _props$as = props.as,\n      Container = _props$as === void 0 ? 'div' : _props$as,\n      _props$lockProps = props.lockProps,\n      containerProps = _props$lockProps === void 0 ? {} : _props$lockProps,\n      SideCar = props.sideCar,\n      shouldReturnFocus = props.returnFocus,\n      onActivationCallback = props.onActivation,\n      onDeactivationCallback = props.onDeactivation;\n\n  var _React$useState2 = React.useState({}),\n      id = _React$useState2[0]; // SIDE EFFECT CALLBACKS\n\n\n  var onActivation = React.useCallback(function () {\n    originalFocusedElement.current = originalFocusedElement.current || document && document.activeElement;\n\n    if (observed.current && onActivationCallback) {\n      onActivationCallback(observed.current);\n    }\n\n    isActive.current = true;\n  }, [onActivationCallback]);\n  var onDeactivation = React.useCallback(function () {\n    isActive.current = false;\n\n    if (onDeactivationCallback) {\n      onDeactivationCallback(observed.current);\n    }\n  }, [onDeactivationCallback]);\n  var returnFocus = React.useCallback(function (allowDefer) {\n    var current = originalFocusedElement.current;\n\n    if (Boolean(shouldReturnFocus) && current && current.focus) {\n      var focusOptions = typeof shouldReturnFocus === 'object' ? shouldReturnFocus : undefined;\n      originalFocusedElement.current = null;\n\n      if (allowDefer) {\n        // React might return focus after update\n        // it's safer to defer the action\n        Promise.resolve().then(function () {\n          return current.focus(focusOptions);\n        });\n      } else {\n        current.focus(focusOptions);\n      }\n    }\n  }, [shouldReturnFocus]); // MEDIUM CALLBACKS\n\n  var onFocus = React.useCallback(function (event) {\n    if (isActive.current) {\n      mediumFocus.useMedium(event);\n    }\n  }, []);\n  var onBlur = mediumBlur.useMedium; // REF PROPAGATION\n  // not using real refs due to race conditions\n\n  var setObserveNode = React.useCallback(function (newObserved) {\n    if (observed.current !== newObserved) {\n      observed.current = newObserved;\n      setObserved(newObserved);\n    }\n  }, []);\n\n  if (process.env.NODE_ENV !== 'production') {\n    if (typeof allowTextSelection !== 'undefined') {\n      // eslint-disable-next-line no-console\n      console.warn('React-Focus-Lock: allowTextSelection is deprecated and enabled by default');\n    }\n\n    React.useEffect(function () {\n      if (!observed.current) {\n        // eslint-disable-next-line no-console\n        console.error('FocusLock: could not obtain ref to internal node');\n      }\n    }, []);\n  }\n\n  var lockProps = _extends((_extends2 = {}, _extends2[constants.FOCUS_DISABLED] = disabled && 'disabled', _extends2[constants.FOCUS_GROUP] = group, _extends2), containerProps);\n\n  var hasLeadingGuards = noFocusGuards !== true;\n  var hasTailingGuards = hasLeadingGuards && noFocusGuards !== 'tail';\n  var mergedRef = useMergeRefs([parentRef, setObserveNode]);\n  return /*#__PURE__*/React.createElement(React.Fragment, null, hasLeadingGuards && [/*#__PURE__*/React.createElement(\"div\", {\n    key: \"guard-first\",\n    \"data-focus-guard\": true,\n    tabIndex: disabled ? -1 : 0,\n    style: hiddenGuard\n  }),\n  /*#__PURE__*/\n  // nearest focus guard\n  React.createElement(\"div\", {\n    key: \"guard-nearest\",\n    \"data-focus-guard\": true,\n    tabIndex: disabled ? -1 : 1,\n    style: hiddenGuard\n  }) // first tabbed element guard\n  ], !disabled && /*#__PURE__*/React.createElement(SideCar, {\n    id: id,\n    sideCar: mediumSidecar,\n    observed: realObserved,\n    disabled: disabled,\n    persistentFocus: persistentFocus,\n    crossFrame: crossFrame,\n    autoFocus: autoFocus,\n    whiteList: whiteList,\n    shards: shards,\n    onActivation: onActivation,\n    onDeactivation: onDeactivation,\n    returnFocus: returnFocus\n  }), /*#__PURE__*/React.createElement(Container, _extends({\n    ref: mergedRef\n  }, lockProps, {\n    className: className,\n    onBlur: onBlur,\n    onFocus: onFocus\n  }), children), hasTailingGuards && /*#__PURE__*/React.createElement(\"div\", {\n    \"data-focus-guard\": true,\n    tabIndex: disabled ? -1 : 0,\n    style: hiddenGuard\n  }));\n});\nFocusLock.propTypes = process.env.NODE_ENV !== \"production\" ? {\n  children: node,\n  disabled: bool,\n  returnFocus: oneOfType([bool, object]),\n  noFocusGuards: bool,\n  allowTextSelection: bool,\n  autoFocus: bool,\n  persistentFocus: bool,\n  crossFrame: bool,\n  group: string,\n  className: string,\n  whiteList: func,\n  shards: arrayOf(any),\n  as: oneOfType([string, func, object]),\n  lockProps: object,\n  onActivation: func,\n  onDeactivation: func,\n  sideCar: any.isRequired\n} : {};\nFocusLock.defaultProps = {\n  children: undefined,\n  disabled: false,\n  returnFocus: false,\n  noFocusGuards: false,\n  autoFocus: true,\n  persistentFocus: false,\n  crossFrame: true,\n  allowTextSelection: undefined,\n  group: undefined,\n  className: undefined,\n  whiteList: undefined,\n  shards: undefined,\n  as: 'div',\n  lockProps: {},\n  onActivation: undefined,\n  onDeactivation: undefined\n};\nexport default FocusLock;","import _inheritsLoose from '@babel/runtime/helpers/esm/inheritsLoose';\nimport _defineProperty from '@babel/runtime/helpers/esm/defineProperty';\nimport React, { PureComponent } from 'react';\n\nfunction withSideEffect(reducePropsToState, handleStateChangeOnClient) {\n  if (process.env.NODE_ENV !== \"production\") {\n    if (typeof reducePropsToState !== 'function') {\n      throw new Error('Expected reducePropsToState to be a function.');\n    }\n\n    if (typeof handleStateChangeOnClient !== 'function') {\n      throw new Error('Expected handleStateChangeOnClient to be a function.');\n    }\n  }\n\n  function getDisplayName(WrappedComponent) {\n    return WrappedComponent.displayName || WrappedComponent.name || 'Component';\n  }\n\n  return function wrap(WrappedComponent) {\n    if (process.env.NODE_ENV !== \"production\") {\n      if (typeof WrappedComponent !== 'function') {\n        throw new Error('Expected WrappedComponent to be a React component.');\n      }\n    }\n\n    var mountedInstances = [];\n    var state;\n\n    function emitChange() {\n      state = reducePropsToState(mountedInstances.map(function (instance) {\n        return instance.props;\n      }));\n      handleStateChangeOnClient(state);\n    }\n\n    var SideEffect = /*#__PURE__*/function (_PureComponent) {\n      _inheritsLoose(SideEffect, _PureComponent);\n\n      function SideEffect() {\n        return _PureComponent.apply(this, arguments) || this;\n      }\n\n      // Try to use displayName of wrapped component\n      SideEffect.peek = function peek() {\n        return state;\n      };\n\n      var _proto = SideEffect.prototype;\n\n      _proto.componentDidMount = function componentDidMount() {\n        mountedInstances.push(this);\n        emitChange();\n      };\n\n      _proto.componentDidUpdate = function componentDidUpdate() {\n        emitChange();\n      };\n\n      _proto.componentWillUnmount = function componentWillUnmount() {\n        var index = mountedInstances.indexOf(this);\n        mountedInstances.splice(index, 1);\n        emitChange();\n      };\n\n      _proto.render = function render() {\n        return /*#__PURE__*/React.createElement(WrappedComponent, this.props);\n      };\n\n      return SideEffect;\n    }(PureComponent);\n\n    _defineProperty(SideEffect, \"displayName\", \"SideEffect(\" + getDisplayName(WrappedComponent) + \")\");\n\n    return SideEffect;\n  };\n}\n\nexport default withSideEffect;\n","export var toArray = function (a) {\n    var ret = Array(a.length);\n    for (var i = 0; i < a.length; ++i) {\n        ret[i] = a[i];\n    }\n    return ret;\n};\nexport var asArray = function (a) { return (Array.isArray(a) ? a : [a]); };\n","import { FOCUS_DISABLED, FOCUS_GROUP } from '../constants';\nimport { asArray, toArray } from './array';\nvar filterNested = function (nodes) {\n    var contained = new Set();\n    var l = nodes.length;\n    for (var i = 0; i < l; i += 1) {\n        for (var j = i + 1; j < l; j += 1) {\n            var position = nodes[i].compareDocumentPosition(nodes[j]);\n            if ((position & Node.DOCUMENT_POSITION_CONTAINED_BY) > 0) {\n                contained.add(j);\n            }\n            if ((position & Node.DOCUMENT_POSITION_CONTAINS) > 0) {\n                contained.add(i);\n            }\n        }\n    }\n    return nodes.filter(function (_, index) { return !contained.has(index); });\n};\nvar getTopParent = function (node) {\n    return node.parentNode ? getTopParent(node.parentNode) : node;\n};\nexport var getAllAffectedNodes = function (node) {\n    var nodes = asArray(node);\n    return nodes.filter(Boolean).reduce(function (acc, currentNode) {\n        var group = currentNode.getAttribute(FOCUS_GROUP);\n        acc.push.apply(acc, (group\n            ? filterNested(toArray(getTopParent(currentNode).querySelectorAll(\"[\" + FOCUS_GROUP + \"=\\\"\" + group + \"\\\"]:not([\" + FOCUS_DISABLED + \"=\\\"disabled\\\"])\")))\n            : [currentNode]));\n        return acc;\n    }, []);\n};\n","var isElementHidden = function (node) {\n    if (node.nodeType !== Node.ELEMENT_NODE) {\n        return false;\n    }\n    var computedStyle = window.getComputedStyle(node, null);\n    if (!computedStyle || !computedStyle.getPropertyValue) {\n        return false;\n    }\n    return (computedStyle.getPropertyValue('display') === 'none' || computedStyle.getPropertyValue('visibility') === 'hidden');\n};\nvar isVisibleUncached = function (node, checkParent) {\n    return !node ||\n        node === document ||\n        (node && node.nodeType === Node.DOCUMENT_NODE) ||\n        (!isElementHidden(node) &&\n            checkParent(node.parentNode && node.parentNode.nodeType === Node.DOCUMENT_FRAGMENT_NODE\n                ? node.parentNode.host\n                : node.parentNode));\n};\nexport var isVisibleCached = function (visibilityCache, node) {\n    var cached = visibilityCache.get(node);\n    if (cached !== undefined) {\n        return cached;\n    }\n    var result = isVisibleUncached(node, isVisibleCached.bind(undefined, visibilityCache));\n    visibilityCache.set(node, result);\n    return result;\n};\nexport var notHiddenInput = function (node) {\n    return !((node.tagName === 'INPUT' || node.tagName === 'BUTTON') && (node.type === 'hidden' || node.disabled));\n};\nexport var isGuard = function (node) { return Boolean(node && node.dataset && node.dataset.focusGuard); };\nexport var isNotAGuard = function (node) { return !isGuard(node); };\nexport var isDefined = function (x) { return Boolean(x); };\n","import { toArray } from './array';\nexport var tabSort = function (a, b) {\n    var tabDiff = a.tabIndex - b.tabIndex;\n    var indexDiff = a.index - b.index;\n    if (tabDiff) {\n        if (!a.tabIndex) {\n            return 1;\n        }\n        if (!b.tabIndex) {\n            return -1;\n        }\n    }\n    return tabDiff || indexDiff;\n};\nexport var orderByTabIndex = function (nodes, filterNegative, keepGuards) {\n    return toArray(nodes)\n        .map(function (node, index) { return ({\n        node: node,\n        index: index,\n        tabIndex: keepGuards && node.tabIndex === -1 ? ((node.dataset || {}).focusGuard ? 0 : -1) : node.tabIndex,\n    }); })\n        .filter(function (data) { return !filterNegative || data.tabIndex >= 0; })\n        .sort(tabSort);\n};\n","export var tabbables = [\n    'button:enabled',\n    'select:enabled',\n    'textarea:enabled',\n    'input:enabled',\n    'a[href]',\n    'area[href]',\n    'summary',\n    'iframe',\n    'object',\n    'embed',\n    'audio[controls]',\n    'video[controls]',\n    '[tabindex]',\n    '[contenteditable]',\n    '[autofocus]',\n];\n","import { FOCUS_AUTO } from '../constants';\nimport { toArray } from './array';\nimport { tabbables } from './tabbables';\nvar queryTabbables = tabbables.join(',');\nvar queryGuardTabbables = queryTabbables + \", [data-focus-guard]\";\nexport var getFocusables = function (parents, withGuards) {\n    return parents.reduce(function (acc, parent) {\n        return acc.concat(toArray(parent.querySelectorAll(withGuards ? queryGuardTabbables : queryTabbables)), parent.parentNode\n            ? toArray(parent.parentNode.querySelectorAll(queryTabbables)).filter(function (node) { return node === parent; })\n            : []);\n    }, []);\n};\nexport var getParentAutofocusables = function (parent) {\n    var parentFocus = parent.querySelectorAll(\"[\" + FOCUS_AUTO + \"]\");\n    return toArray(parentFocus)\n        .map(function (node) { return getFocusables([node]); })\n        .reduce(function (acc, nodes) { return acc.concat(nodes); }, []);\n};\n","import { toArray } from './array';\nimport { isVisibleCached, notHiddenInput } from './is';\nimport { orderByTabIndex } from './tabOrder';\nimport { getFocusables, getParentAutofocusables } from './tabUtils';\nexport var filterFocusable = function (nodes, visibilityCache) {\n    return toArray(nodes)\n        .filter(function (node) { return isVisibleCached(visibilityCache, node); })\n        .filter(function (node) { return notHiddenInput(node); });\n};\nexport var getTabbableNodes = function (topNodes, visibilityCache, withGuards) {\n    return orderByTabIndex(filterFocusable(getFocusables(topNodes, withGuards), visibilityCache), true, withGuards);\n};\nexport var getAllTabbableNodes = function (topNodes, visibilityCache) {\n    return orderByTabIndex(filterFocusable(getFocusables(topNodes), visibilityCache), false);\n};\nexport var parentAutofocusables = function (topNode, visibilityCache) {\n    return filterFocusable(getParentAutofocusables(topNode), visibilityCache);\n};\n","import { asArray } from './array';\nimport { parentAutofocusables } from './DOMutils';\nvar getParents = function (node, parents) {\n    if (parents === void 0) { parents = []; }\n    parents.push(node);\n    if (node.parentNode) {\n        getParents(node.parentNode, parents);\n    }\n    return parents;\n};\nexport var getCommonParent = function (nodeA, nodeB) {\n    var parentsA = getParents(nodeA);\n    var parentsB = getParents(nodeB);\n    for (var i = 0; i < parentsA.length; i += 1) {\n        var currentParent = parentsA[i];\n        if (parentsB.indexOf(currentParent) >= 0) {\n            return currentParent;\n        }\n    }\n    return false;\n};\nexport var getTopCommonParent = function (baseActiveElement, leftEntry, rightEntries) {\n    var activeElements = asArray(baseActiveElement);\n    var leftEntries = asArray(leftEntry);\n    var activeElement = activeElements[0];\n    var topCommon = false;\n    leftEntries.filter(Boolean).forEach(function (entry) {\n        topCommon = getCommonParent(topCommon || entry, entry) || topCommon;\n        rightEntries.filter(Boolean).forEach(function (subEntry) {\n            var common = getCommonParent(activeElement, subEntry);\n            if (common) {\n                if (!topCommon || common.contains(topCommon)) {\n                    topCommon = common;\n                }\n                else {\n                    topCommon = getCommonParent(common, topCommon);\n                }\n            }\n        });\n    });\n    return topCommon;\n};\nexport var allParentAutofocusables = function (entries, visibilityCache) {\n    return entries.reduce(function (acc, node) { return acc.concat(parentAutofocusables(node, visibilityCache)); }, []);\n};\n","import { getAllAffectedNodes } from './utils/all-affected';\nimport { getTabbableNodes } from './utils/DOMutils';\nimport { isGuard, isNotAGuard } from './utils/is';\nimport { getTopCommonParent } from './utils/parenting';\nexport var getFocusabledIn = function (topNode) {\n    var entries = getAllAffectedNodes(topNode).filter(isNotAGuard);\n    var commonParent = getTopCommonParent(topNode, topNode, entries);\n    var visibilityCache = new Map();\n    var outerNodes = getTabbableNodes([commonParent], visibilityCache, true);\n    var innerElements = getTabbableNodes(entries, visibilityCache)\n        .filter(function (_a) {\n        var node = _a.node;\n        return isNotAGuard(node);\n    })\n        .map(function (_a) {\n        var node = _a.node;\n        return node;\n    });\n    return outerNodes.map(function (_a) {\n        var node = _a.node, index = _a.index;\n        return ({\n            node: node,\n            index: index,\n            lockItem: innerElements.indexOf(node) >= 0,\n            guard: isGuard(node),\n        });\n    });\n};\n","import { getAllAffectedNodes } from './utils/all-affected';\nimport { toArray } from './utils/array';\nvar focusInFrame = function (frame) { return frame === document.activeElement; };\nvar focusInsideIframe = function (topNode) {\n    return Boolean(toArray(topNode.querySelectorAll('iframe')).some(function (node) { return focusInFrame(node); }));\n};\nexport var focusInside = function (topNode) {\n    var activeElement = document && document.activeElement;\n    if (!activeElement || (activeElement.dataset && activeElement.dataset.focusGuard)) {\n        return false;\n    }\n    return getAllAffectedNodes(topNode).reduce(function (result, node) { return result || node.contains(activeElement) || focusInsideIframe(node); }, false);\n};\n","import { FOCUS_ALLOW } from './constants';\nimport { toArray } from './utils/array';\nexport var focusIsHidden = function () {\n    return document &&\n        toArray(document.querySelectorAll(\"[\" + FOCUS_ALLOW + \"]\")).some(function (node) { return node.contains(document.activeElement); });\n};\n","var isRadio = function (node) { return node.tagName === 'INPUT' && node.type === 'radio'; };\nvar findSelectedRadio = function (node, nodes) {\n    return nodes\n        .filter(isRadio)\n        .filter(function (el) { return el.name === node.name; })\n        .filter(function (el) { return el.checked; })[0] || node;\n};\nexport var correctNode = function (node, nodes) {\n    if (isRadio(node) && node.name) {\n        return findSelectedRadio(node, nodes);\n    }\n    return node;\n};\nexport var correctNodes = function (nodes) {\n    var resultSet = new Set();\n    nodes.forEach(function (node) { return resultSet.add(correctNode(node, nodes)); });\n    return nodes.filter(function (node) { return resultSet.has(node); });\n};\n","import { correctNode } from './correctFocus';\nexport var pickFirstFocus = function (nodes) {\n    if (nodes[0] && nodes.length > 1) {\n        return correctNode(nodes[0], nodes);\n    }\n    return nodes[0];\n};\nexport var pickFocusable = function (nodes, index) {\n    if (nodes.length > 1) {\n        return nodes.indexOf(correctNode(nodes[index], nodes));\n    }\n    return index;\n};\n","import { correctNodes } from './utils/correctFocus';\nimport { pickFocusable } from './utils/firstFocus';\nimport { isGuard } from './utils/is';\nexport var NEW_FOCUS = 'NEW_FOCUS';\nexport var newFocus = function (innerNodes, outerNodes, activeElement, lastNode) {\n    var cnt = innerNodes.length;\n    var firstFocus = innerNodes[0];\n    var lastFocus = innerNodes[cnt - 1];\n    var isOnGuard = isGuard(activeElement);\n    if (innerNodes.indexOf(activeElement) >= 0) {\n        return undefined;\n    }\n    var activeIndex = outerNodes.indexOf(activeElement);\n    var lastIndex = lastNode ? outerNodes.indexOf(lastNode) : activeIndex;\n    var lastNodeInside = lastNode ? innerNodes.indexOf(lastNode) : -1;\n    var indexDiff = activeIndex - lastIndex;\n    var firstNodeIndex = outerNodes.indexOf(firstFocus);\n    var lastNodeIndex = outerNodes.indexOf(lastFocus);\n    var correctedNodes = correctNodes(outerNodes);\n    var correctedIndexDiff = correctedNodes.indexOf(activeElement) - (lastNode ? correctedNodes.indexOf(lastNode) : activeIndex);\n    var returnFirstNode = pickFocusable(innerNodes, 0);\n    var returnLastNode = pickFocusable(innerNodes, cnt - 1);\n    if (activeIndex === -1 || lastNodeInside === -1) {\n        return NEW_FOCUS;\n    }\n    if (!indexDiff && lastNodeInside >= 0) {\n        return lastNodeInside;\n    }\n    if (activeIndex <= firstNodeIndex && isOnGuard && Math.abs(indexDiff) > 1) {\n        return returnLastNode;\n    }\n    if (activeIndex >= lastNodeIndex && isOnGuard && Math.abs(indexDiff) > 1) {\n        return returnFirstNode;\n    }\n    if (indexDiff && Math.abs(correctedIndexDiff) > 1) {\n        return lastNodeInside;\n    }\n    if (activeIndex <= firstNodeIndex) {\n        return returnLastNode;\n    }\n    if (activeIndex > lastNodeIndex) {\n        return returnFirstNode;\n    }\n    if (indexDiff) {\n        if (Math.abs(indexDiff) > 1) {\n            return lastNodeInside;\n        }\n        return (cnt + lastNodeInside + indexDiff) % cnt;\n    }\n    return undefined;\n};\n","import { NEW_FOCUS, newFocus } from './solver';\nimport { getAllAffectedNodes } from './utils/all-affected';\nimport { getAllTabbableNodes, getTabbableNodes } from './utils/DOMutils';\nimport { pickFirstFocus } from './utils/firstFocus';\nimport { isDefined, isNotAGuard } from './utils/is';\nimport { allParentAutofocusables, getTopCommonParent } from './utils/parenting';\nvar findAutoFocused = function (autoFocusables) { return function (node) {\n    return node.autofocus || (node.dataset && !!node.dataset.autofocus) || autoFocusables.indexOf(node) >= 0;\n}; };\nvar reorderNodes = function (srcNodes, dstNodes) {\n    var remap = new Map();\n    dstNodes.forEach(function (entity) { return remap.set(entity.node, entity); });\n    return srcNodes.map(function (node) { return remap.get(node); }).filter(isDefined);\n};\nexport var getFocusMerge = function (topNode, lastNode) {\n    var activeElement = (document && document.activeElement);\n    var entries = getAllAffectedNodes(topNode).filter(isNotAGuard);\n    var commonParent = getTopCommonParent(activeElement || topNode, topNode, entries);\n    var visibilityCache = new Map();\n    var anyFocusable = getAllTabbableNodes(entries, visibilityCache);\n    var innerElements = getTabbableNodes(entries, visibilityCache).filter(function (_a) {\n        var node = _a.node;\n        return isNotAGuard(node);\n    });\n    if (!innerElements[0]) {\n        innerElements = anyFocusable;\n        if (!innerElements[0]) {\n            return undefined;\n        }\n    }\n    var outerNodes = getAllTabbableNodes([commonParent], visibilityCache).map(function (_a) {\n        var node = _a.node;\n        return node;\n    });\n    var orderedInnerElements = reorderNodes(outerNodes, innerElements);\n    var innerNodes = orderedInnerElements.map(function (_a) {\n        var node = _a.node;\n        return node;\n    });\n    var newId = newFocus(innerNodes, outerNodes, activeElement, lastNode);\n    if (newId === NEW_FOCUS) {\n        var autoFocusable = anyFocusable\n            .map(function (_a) {\n            var node = _a.node;\n            return node;\n        })\n            .filter(findAutoFocused(allParentAutofocusables(entries, visibilityCache)));\n        return {\n            node: autoFocusable && autoFocusable.length ? pickFirstFocus(autoFocusable) : pickFirstFocus(innerNodes),\n        };\n    }\n    if (newId === undefined) {\n        return newId;\n    }\n    return orderedInnerElements[newId];\n};\n","import { getFocusMerge } from './focusMerge';\nexport var focusOn = function (target) {\n    target.focus();\n    if ('contentWindow' in target && target.contentWindow) {\n        target.contentWindow.focus();\n    }\n};\nvar guardCount = 0;\nvar lockDisabled = false;\nexport var setFocus = function (topNode, lastNode) {\n    var focusable = getFocusMerge(topNode, lastNode);\n    if (lockDisabled) {\n        return;\n    }\n    if (focusable) {\n        if (guardCount > 2) {\n            console.error('FocusLock: focus-fighting detected. Only one focus management system could be active. ' +\n                'See https://github.com/theKashey/focus-lock/#focus-fighting');\n            lockDisabled = true;\n            setTimeout(function () {\n                lockDisabled = false;\n            }, 1);\n            return;\n        }\n        guardCount++;\n        focusOn(focusable.node);\n        guardCount--;\n    }\n};\n","export function deferAction(action) {\n  // Hidding setImmediate from Webpack to avoid inserting polyfill\n  var _window = window,\n      setImmediate = _window.setImmediate;\n\n  if (typeof setImmediate !== 'undefined') {\n    setImmediate(action);\n  } else {\n    setTimeout(action, 1);\n  }\n}\nexport var inlineProp = function inlineProp(name, value) {\n  var obj = {};\n  obj[name] = value;\n  return obj;\n};","import * as React from 'react';\nimport PropTypes from 'prop-types';\nimport withSideEffect from 'react-clientside-effect';\nimport moveFocusInside, { focusInside, focusIsHidden, getFocusabledIn } from 'focus-lock';\nimport { deferAction } from './util';\nimport { mediumFocus, mediumBlur, mediumEffect } from './medium';\n\nvar focusOnBody = function focusOnBody() {\n  return document && document.activeElement === document.body;\n};\n\nvar isFreeFocus = function isFreeFocus() {\n  return focusOnBody() || focusIsHidden();\n};\n\nvar lastActiveTrap = null;\nvar lastActiveFocus = null;\nvar lastPortaledElement = null;\nvar focusWasOutsideWindow = false;\n\nvar defaultWhitelist = function defaultWhitelist() {\n  return true;\n};\n\nvar focusWhitelisted = function focusWhitelisted(activeElement) {\n  return (lastActiveTrap.whiteList || defaultWhitelist)(activeElement);\n};\n\nvar recordPortal = function recordPortal(observerNode, portaledElement) {\n  lastPortaledElement = {\n    observerNode: observerNode,\n    portaledElement: portaledElement\n  };\n};\n\nvar focusIsPortaledPair = function focusIsPortaledPair(element) {\n  return lastPortaledElement && lastPortaledElement.portaledElement === element;\n};\n\nfunction autoGuard(startIndex, end, step, allNodes) {\n  var lastGuard = null;\n  var i = startIndex;\n\n  do {\n    var item = allNodes[i];\n\n    if (item.guard) {\n      if (item.node.dataset.focusAutoGuard) {\n        lastGuard = item;\n      }\n    } else if (item.lockItem) {\n      if (i !== startIndex) {\n        // we will tab to the next element\n        return;\n      }\n\n      lastGuard = null;\n    } else {\n      break;\n    }\n  } while ((i += step) !== end);\n\n  if (lastGuard) {\n    lastGuard.node.tabIndex = 0;\n  }\n}\n\nvar extractRef = function extractRef(ref) {\n  return ref && 'current' in ref ? ref.current : ref;\n};\n\nvar focusWasOutside = function focusWasOutside(crossFrameOption) {\n  if (crossFrameOption) {\n    // with cross frame return true for any value\n    return Boolean(focusWasOutsideWindow);\n  } // in other case return only of focus went a while aho\n\n\n  return focusWasOutsideWindow === 'meanwhile';\n};\n\nvar activateTrap = function activateTrap() {\n  var result = false;\n\n  if (lastActiveTrap) {\n    var _lastActiveTrap = lastActiveTrap,\n        observed = _lastActiveTrap.observed,\n        persistentFocus = _lastActiveTrap.persistentFocus,\n        autoFocus = _lastActiveTrap.autoFocus,\n        shards = _lastActiveTrap.shards,\n        crossFrame = _lastActiveTrap.crossFrame;\n    var workingNode = observed || lastPortaledElement && lastPortaledElement.portaledElement;\n    var activeElement = document && document.activeElement;\n\n    if (workingNode) {\n      var workingArea = [workingNode].concat(shards.map(extractRef).filter(Boolean));\n\n      if (!activeElement || focusWhitelisted(activeElement)) {\n        if (persistentFocus || focusWasOutside(crossFrame) || !isFreeFocus() || !lastActiveFocus && autoFocus) {\n          if (workingNode && !(focusInside(workingArea) || focusIsPortaledPair(activeElement, workingNode))) {\n            if (document && !lastActiveFocus && activeElement && !autoFocus) {\n              // Check if blur() exists, which is missing on certain elements on IE\n              if (activeElement.blur) {\n                activeElement.blur();\n              }\n\n              document.body.focus();\n            } else {\n              result = moveFocusInside(workingArea, lastActiveFocus);\n              lastPortaledElement = {};\n            }\n          }\n\n          focusWasOutsideWindow = false;\n          lastActiveFocus = document && document.activeElement;\n        }\n      }\n\n      if (document) {\n        var newActiveElement = document && document.activeElement;\n        var allNodes = getFocusabledIn(workingArea);\n        var focusedIndex = allNodes.map(function (_ref) {\n          var node = _ref.node;\n          return node;\n        }).indexOf(newActiveElement);\n\n        if (focusedIndex > -1) {\n          // remove old focus\n          allNodes.filter(function (_ref2) {\n            var guard = _ref2.guard,\n                node = _ref2.node;\n            return guard && node.dataset.focusAutoGuard;\n          }).forEach(function (_ref3) {\n            var node = _ref3.node;\n            return node.removeAttribute('tabIndex');\n          });\n          autoGuard(focusedIndex, allNodes.length, +1, allNodes);\n          autoGuard(focusedIndex, -1, -1, allNodes);\n        }\n      }\n    }\n  }\n\n  return result;\n};\n\nvar onTrap = function onTrap(event) {\n  if (activateTrap() && event) {\n    // prevent scroll jump\n    event.stopPropagation();\n    event.preventDefault();\n  }\n};\n\nvar onBlur = function onBlur() {\n  return deferAction(activateTrap);\n};\n\nvar onFocus = function onFocus(event) {\n  // detect portal\n  var source = event.target;\n  var currentNode = event.currentTarget;\n\n  if (!currentNode.contains(source)) {\n    recordPortal(currentNode, source);\n  }\n};\n\nvar FocusWatcher = function FocusWatcher() {\n  return null;\n};\n\nvar FocusTrap = function FocusTrap(_ref4) {\n  var children = _ref4.children;\n  return /*#__PURE__*/React.createElement(\"div\", {\n    onBlur: onBlur,\n    onFocus: onFocus\n  }, children);\n};\n\nFocusTrap.propTypes = process.env.NODE_ENV !== \"production\" ? {\n  children: PropTypes.node.isRequired\n} : {};\n\nvar onWindowBlur = function onWindowBlur() {\n  focusWasOutsideWindow = 'just'; // using setTimeout to set  this variable after React/sidecar reaction\n\n  setTimeout(function () {\n    focusWasOutsideWindow = 'meanwhile';\n  }, 0);\n};\n\nvar attachHandler = function attachHandler() {\n  document.addEventListener('focusin', onTrap, true);\n  document.addEventListener('focusout', onBlur);\n  window.addEventListener('blur', onWindowBlur);\n};\n\nvar detachHandler = function detachHandler() {\n  document.removeEventListener('focusin', onTrap, true);\n  document.removeEventListener('focusout', onBlur);\n  window.removeEventListener('blur', onWindowBlur);\n};\n\nfunction reducePropsToState(propsList) {\n  return propsList.filter(function (_ref5) {\n    var disabled = _ref5.disabled;\n    return !disabled;\n  });\n}\n\nfunction handleStateChangeOnClient(traps) {\n  var trap = traps.slice(-1)[0];\n\n  if (trap && !lastActiveTrap) {\n    attachHandler();\n  }\n\n  var lastTrap = lastActiveTrap;\n  var sameTrap = lastTrap && trap && trap.id === lastTrap.id;\n  lastActiveTrap = trap;\n\n  if (lastTrap && !sameTrap) {\n    lastTrap.onDeactivation(); // return focus only of last trap was removed\n\n    if (!traps.filter(function (_ref6) {\n      var id = _ref6.id;\n      return id === lastTrap.id;\n    }).length) {\n      // allow defer is no other trap is awaiting restore\n      lastTrap.returnFocus(!trap);\n    }\n  }\n\n  if (trap) {\n    lastActiveFocus = null;\n\n    if (!sameTrap || lastTrap.observed !== trap.observed) {\n      trap.onActivation();\n    }\n\n    activateTrap(true);\n    deferAction(activateTrap);\n  } else {\n    detachHandler();\n    lastActiveFocus = null;\n  }\n} // bind medium\n\n\nmediumFocus.assignSyncMedium(onFocus);\nmediumBlur.assignMedium(onBlur);\nmediumEffect.assignMedium(function (cb) {\n  return cb({\n    moveFocusInside: moveFocusInside,\n    focusInside: focusInside\n  });\n});\nexport default withSideEffect(reducePropsToState, handleStateChangeOnClient)(FocusWatcher);","import _objectWithoutPropertiesLoose from \"@babel/runtime/helpers/esm/objectWithoutPropertiesLoose\";\nimport _extends from \"@babel/runtime/helpers/esm/extends\";\nimport * as React from 'react';\nimport FocusLockUI from './Lock';\nimport FocusTrap from './Trap';\n/* that would be a BREAKING CHANGE!\n// delaying sidecar execution till the first usage\nconst RequireSideCar = (props) => {\n  // eslint-disable-next-line global-require\n  const SideCar = require('./Trap').default;\n  return <SideCar {...props} />;\n};\n*/\n\nvar FocusLockCombination = /*#__PURE__*/React.forwardRef(function FocusLockUICombination(props, ref) {\n  return /*#__PURE__*/React.createElement(FocusLockUI, _extends({\n    sideCar: FocusTrap,\n    ref: ref\n  }, props));\n});\n\nvar _ref = FocusLockUI.propTypes || {},\n    sideCar = _ref.sideCar,\n    propTypes = _objectWithoutPropertiesLoose(_ref, [\"sideCar\"]);\n\nFocusLockCombination.propTypes = process.env.NODE_ENV !== \"production\" ? propTypes : {};\nexport default FocusLockCombination;","import * as React from 'react';\nimport ReactFocusLock from 'react-focus-lock';\nimport { getAllFocusable, focus, __DEV__ } from '@chakra-ui/utils';\n\nvar FocusLock = function FocusLock(props) {\n  var initialFocusRef = props.initialFocusRef,\n      finalFocusRef = props.finalFocusRef,\n      contentRef = props.contentRef,\n      restoreFocus = props.restoreFocus,\n      children = props.children,\n      isDisabled = props.isDisabled,\n      autoFocus = props.autoFocus,\n      persistentFocus = props.persistentFocus,\n      lockFocusAcrossFrames = props.lockFocusAcrossFrames;\n  var onActivation = React.useCallback(function () {\n    if (initialFocusRef != null && initialFocusRef.current) {\n      initialFocusRef.current.focus();\n    } else if (contentRef != null && contentRef.current) {\n      var focusables = getAllFocusable(contentRef.current);\n\n      if (focusables.length === 0) {\n        focus(contentRef.current, {\n          nextTick: true\n        });\n      }\n    }\n  }, [initialFocusRef, contentRef]);\n  var onDeactivation = React.useCallback(function () {\n    var _finalFocusRef$curren;\n\n    finalFocusRef == null ? void 0 : (_finalFocusRef$curren = finalFocusRef.current) == null ? void 0 : _finalFocusRef$curren.focus();\n  }, [finalFocusRef]);\n  var returnFocus = restoreFocus && !finalFocusRef;\n  return /*#__PURE__*/React.createElement(ReactFocusLock, {\n    crossFrame: lockFocusAcrossFrames,\n    persistentFocus: persistentFocus,\n    autoFocus: autoFocus,\n    disabled: isDisabled,\n    onActivation: onActivation,\n    onDeactivation: onDeactivation,\n    returnFocus: returnFocus\n  }, children);\n};\n\nif (__DEV__) {\n  FocusLock.displayName = \"FocusLock\";\n}\n\nexport { FocusLock, FocusLock as default };\n"],"names":["_objectWithoutPropertiesLoose","source","excluded","target","sourceKeys","key","i","FOCUS_GROUP","FOCUS_DISABLED","FOCUS_ALLOW","FOCUS_AUTO","assignRef","ref","value","useCallbackRef","initialValue","callback","useState","last","useMergeRefs","refs","defaultValue","newValue","hiddenGuard","ItoI","a","innerCreateMedium","defaults","middleware","buffer","assigned","medium","data","item","x","cb","cbs","pendingQueue","executeQueue","cycle","filter","createMedium","createSidecarMedium","options","__assign","mediumFocus","_ref","currentTarget","mediumBlur","mediumEffect","mediumSidecar","emptyArray","FocusLock","React.forwardRef","props","parentRef","_extends2","_React$useState","React.useState","realObserved","setObserved","observed","React.useRef","isActive","originalFocusedElement","children","disabled","noFocusGuards","persistentFocus","crossFrame","autoFocus","group","className","whiteList","_props$shards","shards","_props$as","Container","_props$lockProps","containerProps","SideCar","shouldReturnFocus","onActivationCallback","onDeactivationCallback","_React$useState2","id","onActivation","React.useCallback","onDeactivation","returnFocus","allowDefer","current","focusOptions","onFocus","event","onBlur","setObserveNode","newObserved","lockProps","_extends","constants.FOCUS_DISABLED","constants.FOCUS_GROUP","hasLeadingGuards","hasTailingGuards","mergedRef","React.createElement","React.Fragment","FocusLockUI","withSideEffect","reducePropsToState","handleStateChangeOnClient","getDisplayName","WrappedComponent","mountedInstances","state","emitChange","instance","SideEffect","_PureComponent","_inheritsLoose","_proto","index","React","PureComponent","_defineProperty","toArray","ret","asArray","filterNested","nodes","contained","l","j","position","_","getTopParent","node","getAllAffectedNodes","acc","currentNode","isElementHidden","computedStyle","isVisibleUncached","checkParent","isVisibleCached","visibilityCache","cached","result","notHiddenInput","isGuard","isNotAGuard","isDefined","tabSort","b","tabDiff","indexDiff","orderByTabIndex","filterNegative","keepGuards","tabbables","queryTabbables","queryGuardTabbables","getFocusables","parents","withGuards","parent","getParentAutofocusables","parentFocus","filterFocusable","getTabbableNodes","topNodes","getAllTabbableNodes","parentAutofocusables","topNode","getParents","getCommonParent","nodeA","nodeB","parentsA","parentsB","currentParent","getTopCommonParent","baseActiveElement","leftEntry","rightEntries","activeElements","leftEntries","activeElement","topCommon","entry","subEntry","common","allParentAutofocusables","entries","getFocusabledIn","commonParent","outerNodes","innerElements","_a","focusInFrame","frame","focusInsideIframe","focusInside","focusIsHidden","isRadio","findSelectedRadio","el","correctNode","correctNodes","resultSet","pickFirstFocus","pickFocusable","NEW_FOCUS","newFocus","innerNodes","lastNode","cnt","firstFocus","lastFocus","isOnGuard","activeIndex","lastIndex","lastNodeInside","firstNodeIndex","lastNodeIndex","correctedNodes","correctedIndexDiff","returnFirstNode","returnLastNode","findAutoFocused","autoFocusables","reorderNodes","srcNodes","dstNodes","remap","entity","getFocusMerge","anyFocusable","orderedInnerElements","newId","autoFocusable","focusOn","guardCount","lockDisabled","setFocus","focusable","deferAction","action","_window","setImmediate","focusOnBody","isFreeFocus","lastActiveTrap","lastActiveFocus","lastPortaledElement","focusWasOutsideWindow","defaultWhitelist","focusWhitelisted","recordPortal","observerNode","portaledElement","focusIsPortaledPair","element","autoGuard","startIndex","end","step","allNodes","lastGuard","extractRef","focusWasOutside","crossFrameOption","activateTrap","_lastActiveTrap","workingNode","workingArea","moveFocusInside","newActiveElement","focusedIndex","_ref2","guard","_ref3","onTrap","FocusWatcher","onWindowBlur","attachHandler","detachHandler","propsList","_ref5","traps","trap","lastTrap","sameTrap","_ref6","FocusTrap","FocusLockCombination","FocusLock$1","initialFocusRef","finalFocusRef","contentRef","restoreFocus","isDisabled","lockFocusAcrossFrames","focusables","getAllFocusable","focus","_finalFocusRef$curren","ReactFocusLock"],"mappings":"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","x_google_ignoreList":[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29]}