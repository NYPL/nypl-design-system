import{j as h,a as k}from"./emotion-react-jsx-runtime.browser.esm-b12afd4d.js";import{r as m}from"./index-f2bd0723.js";import{p as M}from"./chakra-ui-hooks.esm-02e82f78.js";import{f as A,u as L,B as g}from"./chakra-ui-layout.esm-b2fa9d31.js";var I=void 0;function W(){var e=m.useState(I),t=e[0],i=e[1];return m.useEffect(function(){I===void 0&&(I="loading"in HTMLImageElement.prototype),i(I)},[]),t}var q=new Map,R=new WeakMap,N=0,E=void 0;function F(e){return e?(R.has(e)||(N+=1,R.set(e,N.toString())),R.get(e)):"0"}function j(e){return Object.keys(e).sort().filter(function(t){return e[t]!==void 0}).map(function(t){return t+"_"+(t==="root"?F(e.root):e[t])}).toString()}function P(e){var t=j(e),i=q.get(t);if(!i){var r=new Map,l,n=new IntersectionObserver(function(c){c.forEach(function(a){var s,o=a.isIntersecting&&l.some(function(u){return a.intersectionRatio>=u});e.trackVisibility&&typeof a.isVisible>"u"&&(a.isVisible=o),(s=r.get(a.target))==null||s.forEach(function(u){u(o,a)})})},e);l=n.thresholds||(Array.isArray(e.threshold)?e.threshold:[e.threshold||0]),i={id:t,observer:n,elements:r},q.set(t,i)}return i}function $(e,t,i,r){if(i===void 0&&(i={}),r===void 0&&(r=E),typeof window.IntersectionObserver>"u"&&r!==void 0){var l=e.getBoundingClientRect();return t(r,{isIntersecting:r,target:e,intersectionRatio:typeof i.threshold=="number"?i.threshold:0,time:0,boundingClientRect:l,intersectionRect:l,rootBounds:l}),function(){}}var n=P(i),c=n.id,a=n.observer,s=n.elements,o=s.get(e)||[];return s.has(e)||s.set(e,o),o.push(t),a.observe(e),function(){o.splice(o.indexOf(t),1),o.length===0&&(s.delete(e),a.unobserve(e)),s.size===0&&(a.disconnect(),q.delete(c))}}function H(e){var t=e===void 0?{}:e,i=t.threshold,r=t.delay,l=t.trackVisibility,n=t.rootMargin,c=t.root,a=t.triggerOnce,s=t.skip,o=t.initialInView,u=t.fallbackInView,S=t.onChange,d=m.useRef(),v=m.useRef(),V=m.useState({inView:!!o}),w=V[0],_=V[1];v.current=S;var O=m.useCallback(function(b){d.current!==void 0&&(d.current(),d.current=void 0),!s&&b&&(d.current=$(b,function(p,y){_({inView:p,entry:y}),v.current&&v.current(p,y),y.isIntersecting&&a&&d.current&&(d.current(),d.current=void 0)},{root:c,rootMargin:n,threshold:i,trackVisibility:l,delay:r},u))},[Array.isArray(i)?i.toString():i,c,n,a,s,l,u,r]);m.useEffect(function(){!d.current&&w.entry&&!a&&!s&&_({inView:!!o})});var f=[O,w.inView,w.entry];return f.ref=f[0],f.inView=f[1],f.entry=f[2],f}const Q=["fourByThree","oneByTwo","original","sixteenByNine","square","threeByFour","threeByTwo","twoByOne"],U=["default","xxsmall","xsmall","small","medium","large"],X=["default","circle"],Y=A(e=>{const{additionalWrapperStyles:t={},className:i="",children:r,aspectRatio:l="original",size:n="default",...c}=e,a=L("CustomImageWrapper",{ratio:l,size:n});return h(g,{className:`the-wrap ${i}`,__css:{...a,...t},...c,children:h(g,{className:"the-crop",__css:a.crop,children:r})})}),T=A(m.forwardRef((e,t)=>{const{additionalFigureStyles:i={},additionalImageStyles:r={},additionalWrapperStyles:l={},alt:n,aspectRatio:c="original",caption:a,className:s="",component:o,credit:u,imageType:S="default",isLazy:d=!1,size:v="default",src:V,...w}=e,_=W(),[O,f]=H({triggerOnce:!0,skip:_}),b=c!=="original",p=L("CustomImage",{variant:S,size:v});let y=null,x,B,z=d?{}:{src:V};if(n&&n.length>300)throw new Error("NYPL Reservoir Image: Alt text must be less than 300 characters.");d&&(f||_)&&(x=O,z={src:V}),B=M(x,t),y=o||h(g,{as:"img",alt:n,loading:d?"lazy":void 0,...z,__css:{...p.img,...r},...w});const C=b?h(Y,{additionalWrapperStyles:l,aspectRatio:c,className:s,size:v,...a||u?{}:w,children:y}):y;return h(g,{ref:B,children:a||u?k(g,{as:"figure",__css:{...p.figure,...i},children:[C,k(g,{as:"figcaption",__css:p.figcaption,children:[a&&h(g,{__css:p.captionWrappers,children:a}),u&&h(g,{__css:p.captionWrappers,children:u})]})]}):C})}),{shouldForwardProp:()=>!0});try{T.displayName="Image",T.__docgenInfo={description:"",displayName:"Image",props:{caption:{defaultValue:null,description:"Adding will wrap the image in a <figure>",name:"caption",required:!1,type:{name:"string"}},className:{defaultValue:null,description:"ClassName you can add in addition to 'image'",name:"className",required:!1,type:{name:"string"}},size:{defaultValue:null,description:"Optional value to control the size of the image",name:"size",required:!1,type:{name:'"small" | "medium" | "large" | "default" | "xsmall" | "xxsmall"'}},aspectRatio:{defaultValue:null,description:'Optional value to control the aspect ratio of the card image; default\nvalue is `"original"`',name:"aspectRatio",required:!1,type:{name:'"fourByThree" | "sixteenByNine" | "square" | "oneByTwo" | "original" | "threeByFour" | "threeByTwo" | "twoByOne"'}},additionalFigureStyles:{defaultValue:null,description:"Optionally pass in additional Chakra-based styles only for the figure.",name:"additionalFigureStyles",required:!1,type:{name:"{ [key: string]: any; }"}},additionalImageStyles:{defaultValue:null,description:"Optionally pass in additional Chakra-based styles only for the image.",name:"additionalImageStyles",required:!1,type:{name:"{ [key: string]: any; }"}},alt:{defaultValue:null,description:"Alternate text description of the image",name:"alt",required:!1,type:{name:"string"}},component:{defaultValue:null,description:"Custom image component",name:"component",required:!1,type:{name:"Element"}},credit:{defaultValue:null,description:"Adding will wrap the image in a <figure>",name:"credit",required:!1,type:{name:"string"}},imageType:{defaultValue:null,description:"Optional value for the image type",name:"imageType",required:!1,type:{name:'"circle" | "default"'}},isLazy:{defaultValue:null,description:"Flag to set the internal `Image` component to `isLazy` mode.",name:"isLazy",required:!1,type:{name:"boolean"}},src:{defaultValue:null,description:"The src attribute is required, and contains the path to the image you want to embed.",name:"src",required:!1,type:{name:"string"}},additionalWrapperStyles:{defaultValue:null,description:"Optionally pass in additional Chakra-based styles.",name:"additionalWrapperStyles",required:!1,type:{name:"{ [key: string]: any; }"}}}}}catch{}export{T as I,X as a,U as b,Q as i};
//# sourceMappingURL=Image-3405777f.js.map
