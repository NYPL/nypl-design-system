{"version":3,"file":"Link-0ed02cf7.js","sources":["../../../src/components/Link/Link.tsx"],"sourcesContent":["import { Box, chakra, useMultiStyleConfig } from \"@chakra-ui/react\";\nimport React, { forwardRef } from \"react\";\n\nimport Icon from \"../Icons/Icon\";\n\nexport const linkTypesArray = [\n  \"action\",\n  \"backwards\",\n  // The \"button\" type is deprecated as of 1.2.x.\n  \"button\",\n  // Instead, use the following \"buttonX\" types.\n  \"buttonPrimary\",\n  \"buttonSecondary\",\n  \"buttonPill\",\n  \"buttonCallout\",\n  \"buttonNoBrand\",\n  \"buttonDisabled\",\n  \"default\",\n  \"external\",\n  \"forwards\",\n] as const;\nexport type LinkTypes = typeof linkTypesArray[number];\n\nexport interface LinkProps {\n  /** Any child node passed to the component. */\n  children: React.ReactNode;\n  /** Additional class name to render in the `Link` component. */\n  className?: string;\n  /** The `href` attribute for the anchor element. */\n  href?: string;\n  /** ID used for accessibility purposes. */\n  id?: string;\n  onClick?: (\n    event: React.MouseEvent<HTMLDivElement | HTMLAnchorElement, MouseEvent>\n  ) => void;\n  /** Prop that sets the HTML attribute to target where the link should go. */\n  target?: \"_blank\" | \"_parent\" | \"_self\" | \"_top\";\n  /** Controls the link visuals: action, button, backwards, forwards, or default. */\n  type?: LinkTypes;\n}\n\n/**\n * Renders the `Link` children components with a direction arrow icon based\n * on the `\"backwards\"` or `\"forwards\"` `linkType` value.\n */\nfunction getWithDirectionIcon(\n  children: JSX.Element,\n  type: LinkTypes,\n  linkId: string\n) {\n  let iconRotation;\n  let iconAlign;\n  let icon = null;\n\n  // An icon needs a position in order for it to be created and\n  // rendered in the link.\n  if (type === \"backwards\") {\n    iconRotation = \"rotate90\";\n    iconAlign = \"left\";\n  } else if (type === \"forwards\") {\n    iconRotation = \"rotate270\";\n    iconAlign = \"right\";\n  }\n\n  const iconId = `${linkId}-icon`;\n\n  icon = (\n    <Icon\n      align={iconAlign}\n      className=\"more-link\"\n      iconRotation={iconRotation}\n      id={iconId}\n      name=\"arrow\"\n      size=\"medium\"\n    />\n  );\n\n  return (\n    <>\n      {type === \"backwards\" && icon}\n      {children}\n      {type === \"forwards\" && icon}\n    </>\n  );\n}\n\nfunction getExternalExtraElements(\n  children: JSX.Element,\n  linkId: string,\n  styles: object\n) {\n  const iconId = `${linkId}-icon`;\n  const extraElements = (\n    <>\n      <Box as=\"span\" __css={styles}>\n        This link opens in a new window\n      </Box>\n      <Icon\n        align={\"right\"}\n        className=\"more-link\"\n        id={iconId}\n        name=\"actionLaunch\"\n        size=\"medium\"\n        title=\"External link\"\n      />\n    </>\n  );\n\n  return (\n    <>\n      {children}\n      {extraElements}\n    </>\n  );\n}\n\n/**\n * A component that uses an `href` prop or a child anchor element, to create\n * an anchor element with added styling and conventions.\n */\nexport const Link = chakra(\n  forwardRef<HTMLDivElement & HTMLAnchorElement, LinkProps>((props, ref?) => {\n    const {\n      children,\n      className,\n      href,\n      id,\n      onClick,\n      target,\n      type = \"default\",\n      ...rest\n    } = props;\n\n    // Merge the necessary props alongside any extra props for the\n    // anchor element.\n    const linkProps = {\n      id,\n      href,\n      ...rest,\n    };\n    // The \"default\" type.\n    let variant = \"link\";\n\n    if (typeof children === \"string\" && !href) {\n      throw new Error(\n        \"NYPL Reservoir Link: The `Link` component needs the `href` prop if its child element is a string.\"\n      );\n    }\n\n    if (\n      type === \"action\" ||\n      type === \"forwards\" ||\n      type === \"backwards\" ||\n      type === \"external\"\n    ) {\n      variant = \"moreLink\";\n    } else if (type.includes(\"button\")) {\n      /** This deprecation warning is temporarily being removed, but it will be\n       * reinstated once teams are able to update their `Link`s appropriately. */\n      // if (type === \"button\") {\n      //   console.warn(\n      //     `NYPL Reservoir Link: The \"button\" type is deprecated. Instead, use either \"buttonPrimary\", \"buttonSecondary\", \"buttonPill\", \"buttonCallout\", \"buttonNoBrand\", or \"buttonDisabled\".`\n      //   );\n      // }\n      variant = type;\n    }\n    const styles = useMultiStyleConfig(\"Link\", { variant });\n    const rel = type === \"external\" ? \"nofollow noopener noreferrer\" : null;\n    const internalTarget =\n      type === \"external\" ? \"_blank\" : target ? target : null;\n    // Render with specific direction arrows if the type is\n    // \"forwards\" or \"backwards\". Or render with the launch icon\n    // if the type is \"external\". Otherwise, do not add an icon.\n    const newChildren =\n      ((type === \"forwards\" || type === \"backwards\") &&\n        getWithDirectionIcon(children as JSX.Element, type, id)) ||\n      (type === \"external\" &&\n        getExternalExtraElements(children as JSX.Element, id, styles.srOnly)) ||\n      children;\n\n    if (!href) {\n      // React Types error makes this fail:\n      // https://github.com/DefinitelyTyped/DefinitelyTyped/issues/32832\n      // let children = React.Children.only(children);\n      if (React.Children.count(children) > 1) {\n        throw new Error(\n          \"NYPL Reservoir Link: Please pass only one child into the `Link` component.\"\n        );\n      }\n      const childrenToClone: any = children[0] ? children[0] : children;\n      const childProps = childrenToClone.props;\n      return (\n        <Box as=\"span\" __css={styles} {...rest}>\n          {React.cloneElement(\n            childrenToClone,\n            {\n              className,\n              ...linkProps,\n              ...childProps,\n              ref,\n              rel,\n              target: internalTarget,\n            },\n            [childrenToClone.props.children]\n          )}\n        </Box>\n      );\n    } else {\n      return (\n        <Box\n          as=\"a\"\n          className={className}\n          ref={ref}\n          rel={rel}\n          onClick={onClick}\n          target={internalTarget}\n          {...linkProps}\n          __css={styles}\n        >\n          {newChildren}\n        </Box>\n      );\n    }\n  })\n);\n\nexport default Link;\n"],"names":["linkTypesArray","getWithDirectionIcon","children","type","linkId","iconRotation","iconAlign","icon","iconId","jsx","Icon","jsxs","Fragment","getExternalExtraElements","styles","Box","Link","chakra","forwardRef","props","ref","className","href","id","onClick","target","rest","linkProps","variant","useMultiStyleConfig","rel","internalTarget","newChildren","React","childrenToClone","childProps"],"mappings":"iPAKO,MAAAA,EAAA,CAAuB,SAC5B,YACA,SAEA,gBAEA,kBACA,aACA,gBACA,gBACA,iBACA,UACA,WACA,UAEF,EAyBA,SAAAC,EAAAC,EAAAC,EAAAC,EAAA,CAKE,IAAAC,EACAC,EACAC,EAAA,KAIAJ,IAAA,aACEE,EAAA,WACAC,EAAA,QAAYH,IAAA,aAEZE,EAAA,YACAC,EAAA,SAGF,MAAAE,EAAA,GAAAJ,SAEA,OAAAG,EAAAE,EACEC,EAAC,CAAA,MAAAJ,EACQ,UAAA,YACG,aAAAD,EACV,GAAAG,EACI,KAAA,QACC,KAAA,QACA,CAAA,EAITG,EAAAC,EAAA,CAAA,SAAA,CAEKT,IAAA,aAAAI,EAAwBL,EACxBC,IAAA,YAAAI,CACuB,CAAA,CAAA,CAG9B,CAEA,SAAAM,EAAAX,EAAAE,EAAAU,EAAA,CAKE,MAAAN,EAAA,GAAAJ,SAiBA,OAAAO,EAAAC,EAAA,CAAA,SAAA,CAEKV,EAlBLS,EAAAC,EAAA,CAAA,SAAA,CAEIH,EAAAM,EAAA,CAAA,GAAA,OAAA,MAAAD,EAAA,SAAA,kCAAA,EAEAL,EACAC,EAAC,CAAA,MAAA,QACQ,UAAA,YACG,GAAAF,EACN,KAAA,eACC,KAAA,SACA,MAAA,eACC,CAAA,CACR,CAAA,CAAA,CAOC,CAAA,CAAA,CAGP,CAMO,MAAAQ,EAAAC,EAAaC,aAAA,CAAAC,EAAAC,IAAA,CAEhB,KAAA,CAAM,SAAAlB,EACJ,UAAAmB,EACA,KAAAC,EACA,GAAAC,EACA,QAAAC,EACA,OAAAC,EACA,KAAAtB,EAAA,UACO,GAAAuB,CACJ,EAAAP,EAKLQ,EAAA,CAAkB,GAAAJ,EAChB,KAAAD,EACA,GAAAI,CACG,EAGL,IAAAE,EAAA,OAEA,GAAA,OAAA1B,GAAA,UAAA,CAAAoB,EACE,MAAA,IAAA,MAAU,mGACR,EAIJnB,IAAA,UAAAA,IAAA,YAAAA,IAAA,aAAAA,IAAA,WAMEyB,EAAA,WAAUzB,EAAA,SAAA,QAAA,IASVyB,EAAAzB,GAEF,MAAAW,EAAAe,EAAA,OAAA,CAAA,QAAAD,CAAA,CAAA,EACAE,EAAA3B,IAAA,WAAA,+BAAA,KACA4B,EAAA5B,IAAA,WAAA,SAAAsB,GAAA,KAKAO,GAAA7B,IAAA,YAAAA,IAAA,cAAAF,EAAAC,EAAAC,EAAAoB,CAAA,GAAApB,IAAA,YAAAU,EAAAX,EAAAqB,EAAAT,EAAA,MAAA,GAAAZ,EAOA,GAAAoB,EA4BE,OAAAb,EACEM,EAAC,CAAA,GAAA,IACI,UAAAM,EACH,IAAAD,EACA,IAAAU,EACA,QAAAN,EACA,OAAAO,EACQ,GAAAJ,EACJ,MAAAb,EACG,SAAAkB,CAEN,CAAA,EAvCP,CAIE,GAAAC,EAAA,SAAA,MAAA/B,CAAA,EAAA,EACE,MAAA,IAAA,MAAU,4EACR,EAGJ,MAAAgC,EAAAhC,EAAA,CAAA,EAAAA,EAAA,CAAA,EAAAA,EACAiC,EAAAD,EAAA,MACA,OAAAzB,EAAAM,EAAA,CAAA,GAAA,OAAA,MAAAD,EAAA,GAAAY,EAAA,SAAAO,EAAA,aAEWC,EACL,CACA,UAAAb,EACE,GAAAM,EACG,GAAAQ,EACA,IAAAf,EACH,IAAAU,EACA,OAAAC,CACQ,EACV,CAAAG,EAAA,MAAA,QAAA,CAC+B,CAAA,CAAA,EAmBvC,CAAA,CAEJ"}